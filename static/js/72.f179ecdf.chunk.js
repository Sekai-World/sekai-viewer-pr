(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[72],{1126:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(0),c=a(17),i=a(31),s=a(9),o=a.n(s),l=a(25),u=a(89),d=a(316),j=a(295),b=a(296),h=a(1105),m=a(294),O=a(135),x=a(334),g=a(385),f=a(519),p=a(362),v=a(391),k=a(367),y=a(455),S=a(466),w=a(213),_=a(347),D=a.n(_),C=a(677),N=a.n(C),L=a(348),M=a.n(L),I=(a(377),a(37)),T=a(309),W=a(303),F=a(48),z=a(1),E=function(e){var t=e.slug,a=Object(w.a)().t,c=Object(W.a)(),s=Object(r.useContext)(I.c),_=s.jwtToken,C=s.usermeta,L=Object(T.f)(_),E=L.getAnnouncementById,B=L.getTranslationBySlug,P=L.postTranslation,H=L.putTranslationId,J=Object(F.l)(),R=Object(F.f)(),V=R.showSuccess,$=R.showError,A=Object(r.useState)(),q=Object(n.a)(A,2),G=q[0],K=q[1],Q=Object(r.useState)(!1),U=Object(n.a)(Q,2),X=U[0],Y=U[1],Z=Object(r.useState)(0),ee=Object(n.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(r.useState)(""),re=Object(n.a)(ne,2),ce=re[0],ie=re[1],se=Object(r.useState)(""),oe=Object(n.a)(se,2),le=oe[0],ue=oe[1],de=Object(r.useState)(""),je=Object(n.a)(de,2),be=je[0],he=je[1],me=Object(r.useState)(!1),Oe=Object(n.a)(me,2),xe=Oe[0],ge=Oe[1],fe=Object(r.useState)(null),pe=Object(n.a)(fe,2),ve=pe[0],ke=pe[1],ye=Object(r.useState)([]),Se=Object(n.a)(ye,2),we=Se[0],_e=Se[1],De=Object(r.useState)([]),Ce=Object(n.a)(De,2),Ne=Ce[0],Le=Ce[1],Me=Object(r.useState)(!1),Ie=Object(n.a)(Me,2),Te=Ie[0],We=Ie[1],Fe=Object(r.useState)(),ze=Object(n.a)(Fe,2),Ee=ze[0],Be=ze[1],Pe=Object(r.useState)(!1),He=Object(n.a)(Pe,2),Je=He[0],Re=He[1],Ve=Object(r.useState)(!1),$e=Object(n.a)(Ve,2),Ae=$e[0],qe=$e[1],Ge=Object(r.useMemo)((function(){return t.split(":")}),[t]),Ke=Object(n.a)(Ge,2),Qe=Ke[0],Ue=Ke[1],Xe=Object(r.useMemo)((function(){return new D.a({linkify:!0,typographer:!0}).use(N.a)}),[]);return Object(r.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.next=3,E(Ue);case 3:return a=e.sent,K(a),Y(!1),e.next=8,B(t,"source",{targetLang_in:null===C||void 0===C?void 0:C.languages.map((function(e){return e.id}))});case 8:if((n=e.sent).length){e.next=11;break}return e.abrupt("return");case 11:_e(n),J.get("targetLang")&&ae(Number(J.get("targetLang")));case 13:case"end":return e.stop()}}),e)})))()}),[Ue,E,B,J,t,C]),Object(r.useEffect)((function(){!function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r,c,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=we.find((function(e){var a;return(null===(a=e.targetLang)||void 0===a?void 0:a.id)===t})))){e.next=19;break}if(Be(a.id),Re(a.isFin),ke(!1),Le(a.users),r=a.targetSlug.split(":"),c=Object(n.a)(r,2),i=c[0],s=c[1],"announcement"!==i){e.next=17;break}return ge(!0),e.next=11,E(s,{_publicationState:"preview"});case 11:l=e.sent,ie(l.title),ue(l.description),he(l.content),ke(!0),ge(!1);case 17:e.next=24;break;case 19:ie(""),ue(""),he(""),ke(!1),Le([]);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(te)}),[E,we,te]),"announcement"===Qe&&G&&C?Object(z.jsxs)(r.Fragment,{children:[Object(z.jsxs)(u.a,{variant:"h6",className:c.header,children:[a("translate:editor.title.source"),X&&Object(z.jsx)(d.a,{size:20})]}),Object(z.jsxs)(j.a,{className:c.content,maxWidth:"md",children:[Object(z.jsxs)(b.a,{container:!0,spacing:1,children:[Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{color:"textSecondary",children:a("translate:editor.source_lang")})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{children:G.language.name})})]}),Object(z.jsxs)(r.Fragment,{children:[Object(z.jsxs)(b.a,{container:!0,spacing:1,children:[Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{color:"textSecondary",children:a("translate:editor.announcement.source_title")})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{children:G.title})})]}),Object(z.jsxs)(b.a,{container:!0,spacing:1,children:[Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{color:"textSecondary",children:a("translate:editor.announcement.source_desc")})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{children:G.description})})]})]}),Object(z.jsx)("br",{}),Object(z.jsx)(M.a,{value:G.content,renderHTML:function(e){return Xe.render(e)},config:{view:{html:!0,md:!0,menu:!1},canView:{html:!0,md:!0,menu:!1,hideMenu:!1}},readOnly:!0,style:{height:"calc(50vh)"}})]}),Object(z.jsxs)(u.a,{variant:"h6",className:c.header,children:[a("translate:editor.title.target"),xe&&Object(z.jsx)(d.a,{size:20})]}),Object(z.jsxs)(j.a,{className:c.content,maxWidth:"md",children:[Object(z.jsxs)(b.a,{container:!0,spacing:1,alignItems:"center",children:[Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{color:"textSecondary",children:a("translate:editor.target_lang")})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(h.a,{style:{minWidth:200,maxWidth:"100%"},value:te,onChange:function(e){return ae(e.target.value)},children:C.languages.filter((function(e){return e.code!==G.language.code})).map((function(e){return Object(z.jsx)(m.a,{value:e.id,children:e.name},"lang-".concat(e.code))}))})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(O.a,{variant:"contained",onClick:function(){return We(!0)},children:a("translate:editor.button.copy_source")})})]}),ve&&Object(z.jsxs)(b.a,{container:!0,spacing:1,alignItems:"center",children:[Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(u.a,{color:"textSecondary",children:a("translate:editor.target_contributors")})}),Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(b.a,{container:!0,spacing:1,children:Ne.map((function(e){return Object(z.jsx)(b.a,{item:!0,children:Object(z.jsx)(x.a,{label:e.nickname,avatar:Object(z.jsx)(g.a,{src:e.avatar?e.avatar.url:""})},e.id)})}))})})]}),Object(z.jsxs)(b.a,{container:!0,spacing:1,alignItems:"center",children:[Object(z.jsx)(b.a,{item:!0,xs:12,children:Object(z.jsx)(f.a,{label:a("translate:editor.announcement.target_title"),value:ce,style:{width:"100%"},onChange:function(e){return ie(e.target.value)}})}),Object(z.jsx)(b.a,{item:!0,xs:12,children:Object(z.jsx)(f.a,{label:a("translate:editor.announcement.target_desc"),value:le,style:{width:"100%"},onChange:function(e){return ue(e.target.value)}})})]}),Object(z.jsx)("br",{}),Object(z.jsx)(M.a,{value:be,renderHTML:function(e){return Xe.render(e)},config:{view:{html:!0,md:!0},canView:{fullScreen:!1}},onChange:function(e){var t=e.text;return he(t)},style:{height:"calc(50vh)"}})]}),Object(z.jsxs)(b.a,{container:!0,spacing:2,children:[Object(z.jsx)(b.a,{item:!0,xs:12,md:6,children:Object(z.jsx)(O.a,{variant:"contained",color:Je?"secondary":"primary",disabled:Ae||!ve||!te||!ce||!le||!be,style:{width:"100%"},onClick:Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe(!0),e.prev=1,e.next=4,H(Ee,{isFin:!Je});case 4:Re(!Je),V(a("translate:editor.submit-status.success")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),$(a("translate:editor.submit-status.failed"));case 11:qe(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),children:a(Je?"translate:button.mark_unfinished":"translate:button.mark_finished")})}),Object(z.jsx)(b.a,{item:!0,xs:12,md:6,children:Object(z.jsx)(O.a,{disabled:Ae||null===ve||ve&&Je||!te||!ce||!le||!be,style:{width:"100%"},variant:"contained",color:"primary",onClick:Object(l.a)(o.a.mark((function e(){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={title:ce,description:le,content:be,user:C.id,language:te,category:G.category},e.prev=1,qe(!0),!ve){e.next=8;break}return e.next=6,H(Ee,{target:n,targetLang:te});case 6:e.next=13;break;case 8:return e.next=10,P(C,t,G.language.id,n,te);case 10:r=e.sent,c=r.id,Be(c);case 13:ve||ke(!0),Ne.find((function(e){return e.id===C.id}))||Le([].concat(Object(i.a)(Ne),[C])),V(a("translate:editor.submit-status.success")),qe(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),qe(!1),$(a("translate:editor.submit-status.failed"));case 23:case"end":return e.stop()}}),e,null,[[1,19]])}))),children:a("common:submit")})})]}),Object(z.jsxs)(p.a,{open:Te,onClose:function(){return We(!1)},children:[Object(z.jsx)(v.a,{children:a("translate:editor.dialog.copy_source.title")}),Object(z.jsx)(k.a,{children:Object(z.jsx)(y.a,{children:a("translate:editor.dialog.copy_source.text")})}),Object(z.jsxs)(S.a,{children:[Object(z.jsx)(O.a,{color:"primary",onClick:function(){ie(G.title),ue(G.description),he(G.content),We(!1)},children:a("translate:editor.dialog.copy_source.confirm")}),Object(z.jsx)(O.a,{onClick:function(){return We(!1)},children:a("translate:editor.dialog.copy_source.cancel")})]})]})]}):Object(z.jsx)(u.a,{variant:"h6",className:c.header,children:"Loading..."})};t.default=function(){var e=Object(c.i)().slug,t=Object(r.useMemo)((function(){return e.split(":")}),[e]),a=Object(n.a)(t,1)[0];return Object(z.jsx)(r.Fragment,{children:"announcement"===a&&Object(z.jsx)(E,{slug:e})})}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(234),r=Object(n.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},316:function(e,t,a){"use strict";var n=a(2),r=a(3),c=a(0),i=(a(4),a(5)),s=a(6),o=a(10),l=44,u=c.forwardRef((function(e,t){var a=e.classes,s=e.className,u=e.color,d=void 0===u?"primary":u,j=e.disableShrink,b=void 0!==j&&j,h=e.size,m=void 0===h?40:h,O=e.style,x=e.thickness,g=void 0===x?3.6:x,f=e.value,p=void 0===f?0:f,v=e.variant,k=void 0===v?"indeterminate":v,y=Object(r.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),S={},w={},_={};if("determinate"===k||"static"===k){var D=2*Math.PI*((l-g)/2);S.strokeDasharray=D.toFixed(3),_["aria-valuenow"]=Math.round(p),S.strokeDashoffset="".concat(((100-p)/100*D).toFixed(3),"px"),w.transform="rotate(-90deg)"}return c.createElement("div",Object(n.a)({className:Object(i.a)(a.root,s,"inherit"!==d&&a["color".concat(Object(o.a)(d))],{determinate:a.determinate,indeterminate:a.indeterminate,static:a.static}[k]),style:Object(n.a)({width:m,height:m},w,O),ref:t,role:"progressbar"},_,y),c.createElement("svg",{className:a.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},c.createElement("circle",{className:Object(i.a)(a.circle,b&&a.circleDisableShrink,{determinate:a.circleDeterminate,indeterminate:a.circleIndeterminate,static:a.circleStatic}[k]),style:S,cx:l,cy:l,r:(l-g)/2,fill:"none",strokeWidth:g})))}));t.a=Object(s.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(u)}}]);