(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[63],{1120:function(e,t,a){"use strict";a.r(t);var c=a(31),n=a(8),r=a(89),s=a(295),i=a(296),o=a(259),l=a(134),j=a(334),d=a(385),b=a(547),O=a(548),u=a(549),m=a(550),f=a(474),p=a(475),g=a(551),h=a.n(g),x=a(472),y=a.n(x),v=a(473),N=a.n(v),S=a(0),w=a(213),k=a(338),I=a(312),C=a(303),_=a(48),J=a(310),T=a(234),E=a(345),P=a(366),z=a(380),D=a(386),L=a(297),K=a(307),A=a(1),B=Object(T.a)((function(e){return{media:{marginTop:"0.5em",paddingTop:"75%",backgroundSize:"contain"},card:{cursor:"pointer"},subheader:{}}})),M=function(e){var t=e.data,a=B(),c=Object(_.n)(),s=Object(n.a)(c,1)[0],i=Object(S.useState)(""),o=Object(n.a)(i,2),l=o[0],j=o[1];return Object(S.useEffect)((function(){t&&Object(_.c)("stamp/".concat(t.assetbundleName,"_rip/").concat(t.assetbundleName,"/").concat(t.assetbundleName,".webp"),j,window.isChinaMainland?"cn":"ww",s)}),[t,s]),t?Object(A.jsx)(z.a,{href:l.replace(".webp",".png"),target:"_blank",style:{textDecoration:"none"},children:Object(A.jsxs)(E.a,{className:a.card,children:[Object(A.jsx)(D.a,{className:a.media,image:l,title:t.name}),Object(A.jsx)(P.a,{style:{paddingBottom:"16px"},children:Object(A.jsx)(K.b,{contentKey:"stamp_name:".concat(t.id),original:t.name.replace(/\[.*\]/,"").replace(/^.*\uff1a/,""),originalProps:{variant:"subtitle1"},translatedProps:{variant:"subtitle1"}})})]})}):Object(A.jsxs)(E.a,{className:a.card,children:[Object(A.jsx)(L.a,{variant:"rect",className:a.media}),Object(A.jsx)(P.a,{children:Object(A.jsx)(r.a,{variant:"subtitle1",className:a.subheader,children:Object(A.jsx)(L.a,{variant:"text",width:"90%"})})})]})},R=a(329),F=a(514),H=a(489),V=a(49),W=M;t.default=function(){var e=Object(C.a)(),t=Object(I.a)(),a=Object(w.a)().t,g=Object(V.c)(),x=Object(_.g)("stamps"),v=Object(n.a)(x,1)[0],T=Object(S.useState)([]),E=Object(n.a)(T,2),P=E[0],z=E[1],D=Object(S.useState)([]),L=Object(n.a)(D,2),K=L[0],B=L[1],M=Object(S.useState)(!1),Q=Object(n.a)(M,2),q=Q[0],G=Q[1],U=Object(_.h)("stamp-list-update-sort","desc"),X=Object(n.a)(U,2),Y=X[0],Z=X[1],$=Object(_.h)("stamp-list-filter-sort-by","id"),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],ce=Object(S.useReducer)(k.b,JSON.parse(localStorage.getItem("stamp-list-filter-charas")||"[]")),ne=Object(n.a)(ce,2),re=ne[0],se=ne[1],ie=Object(S.useState)(0),oe=Object(n.a)(ie,2),le=oe[0],je=oe[1],de=Object(S.useState)(12),be=Object(n.a)(de,1)[0],Oe=Object(S.useState)(!0),ue=Object(n.a)(Oe,2),me=ue[0],fe=ue[1],pe=Object(S.useState)(!1),ge=Object(n.a)(pe,2),he=ge[0],xe=ge[1],ye=Object(S.useState)(""),ve=Object(n.a)(ye,2),Ne=ve[0],Se=ve[1],we=Object(S.useCallback)((function(e,t){return K.slice(t*(e-1),t*e)}),[K]),ke=Object(S.useCallback)((function(e,t){he&&(e[0].isIntersecting&&me&&(!K.length||K.length>le*be)?(je((function(e){return e+1})),fe(!1)):K.length&&K.length<=le*be&&t(!1))}),[K.length,he,me,be,le]);Object(S.useEffect)((function(){document.title=a("title:stampList")}),[a]),Object(S.useEffect)((function(){if(v&&v.length){var e=v;if(re.length&&(e=v.filter((function(e){return re.includes(e.characterId1)}))),Ne){var t=[Ne];"text"===Ne&&t.push("cheerful_carnival_message"),e=v.filter((function(e){return t.includes(e.stampType)}))}"desc"===Y?e=e.sort((function(e,t){return t[te]-e[te]})):"asc"===Y&&(e=e.sort((function(e,t){return e[te]-t[te]}))),B(e),z([]),je(0)}}),[re,v,z,je,B,Y,te,Ne]),Object(S.useEffect)((function(){z((function(e){return[].concat(Object(c.a)(e),Object(c.a)(we(le,be)))})),fe(!0)}),[le,be,fe,we]),Object(S.useEffect)((function(){xe(Boolean(v&&v.length))}),[xe,v]);var Ie=Object(S.useCallback)((function(e,t){t&&Z(t||"asc")}),[Z]),Ce=Object(S.useCallback)((function(e,t){t&&ae(t||"id")}),[ae]);return Object(A.jsxs)(S.Fragment,{children:[Object(A.jsx)(r.a,{variant:"h6",className:e.header,children:a("common:stamp")}),Object(A.jsxs)(s.a,{className:e.content,children:[Object(A.jsxs)(i.a,{container:!0,justify:"space-between",children:[Object(A.jsx)(i.a,{item:!0,children:Object(A.jsxs)(i.a,{container:!0,spacing:1,children:[Object(A.jsx)(i.a,{item:!0,children:Object(A.jsxs)(F.a,{value:Y,color:"primary",exclusive:!0,onChange:Ie,children:[Object(A.jsx)(H.a,{value:"asc",children:"asc"===Y?Object(A.jsx)(b.a,{}):Object(A.jsx)(O.a,{})}),Object(A.jsx)(H.a,{value:"desc",children:"desc"===Y?Object(A.jsx)(u.a,{}):Object(A.jsx)(m.a,{})})]})}),Object(A.jsx)(i.a,{item:!0,children:Object(A.jsx)(F.a,{size:"medium",value:te,color:"primary",exclusive:!0,onChange:Ce,children:Object(A.jsx)(H.a,{value:"id",children:Object(A.jsx)(h.a,{})})})})]})}),Object(A.jsx)(i.a,{item:!0,children:Object(A.jsxs)(H.a,{value:"check",selected:q,onChange:function(){return G((function(e){return!e}))},children:[q?Object(A.jsx)(y.a,{}):Object(A.jsx)(N.a,{}),q?Object(A.jsx)(f.a,{}):Object(A.jsx)(p.a,{})]})})]}),Object(A.jsx)("br",{}),Object(A.jsx)(o.a,{in:q,children:Object(A.jsx)(l.a,{className:t.container,children:Object(A.jsxs)(i.a,{container:!0,direction:"column",spacing:1,children:[Object(A.jsxs)(i.a,{item:!0,container:!0,xs:12,alignItems:"center",justify:"space-between",spacing:1,children:[Object(A.jsx)(i.a,{item:!0,xs:12,md:1,children:Object(A.jsx)(r.a,{classes:{root:t.caption},children:a("filter:character.caption")})}),Object(A.jsx)(i.a,{item:!0,xs:12,md:11,children:Object(A.jsx)(i.a,{container:!0,spacing:1,children:Array.from({length:26}).map((function(e,t){return Object(A.jsx)(i.a,{item:!0,children:Object(A.jsx)(j.a,{clickable:!0,color:re.includes(t+1)?"primary":"default",avatar:Object(A.jsx)(d.a,{alt:g(t+1),src:J.h["CharaIcon".concat(t+1)]}),label:g(t+1),onClick:function(){re.includes(t+1)?se({type:"remove",payload:t+1,storeName:"stamp-list-filter-charas"}):se({type:"add",payload:t+1,storeName:"stamp-list-filter-charas"})}})},"chara-filter-"+t)}))})})]}),Object(A.jsxs)(i.a,{item:!0,container:!0,xs:12,alignItems:"center",justify:"space-between",spacing:1,children:[Object(A.jsx)(i.a,{item:!0,xs:12,md:1,children:Object(A.jsx)(r.a,{classes:{root:t.caption},children:a("filter:stampType.caption")})}),Object(A.jsx)(i.a,{item:!0,xs:12,md:11,children:Object(A.jsx)(i.a,{container:!0,spacing:1,children:["text","illustration"].map((function(e){return Object(A.jsx)(i.a,{item:!0,children:Object(A.jsx)(j.a,{clickable:!0,color:Ne===e?"primary":"default",label:a("filter:stampType.".concat(e)),onClick:function(){Se(Ne===e?"":e)}})},"stamp-type-filter-"+e)}))})})]})]})})}),Object(A.jsx)(R.a,{ViewComponent:W,callback:ke,data:P,gridSize:{xs:6,sm:4,md:3,lg:2}})]})]})}},307:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return O})),a.d(t,"c",(function(){return u}));var c=a(8),n=a(24),r=a(89),s=a(296),i=a(0),o=a(37),l=a(48),j=a(49),d=a(1),b=function(e){var t=e.contentKey,a=e.original,c=e.originalProps,l=e.translatedProps,b=e.assetTOptions,O=Object(i.useContext)(o.a).contentTransMode,u=Object(j.b)().assetT;switch(O){case"original":return Object(d.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{children:a}));case"translated":return Object(d.jsx)(r.a,Object(n.a)(Object(n.a)({},l),{},{color:"textPrimary",children:u(t,a,b)}));case"both":return Object(d.jsxs)(s.a,{container:!0,direction:"column",children:[Object(d.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{color:"textPrimary",children:a})),Object(d.jsx)(r.a,Object(n.a)(Object(n.a)({},l),{},{color:"textSecondary",children:u(t,a,b)}))]})}},O=function(e){var t=e.characterId,a=e.originalProps,b=e.translatedProps,O=e.assetTOptions,u=Object(i.useContext)(o.a).contentTransMode,m=Object(l.g)("gameCharacters"),f=Object(c.a)(m,1)[0],p=Object(j.b)(),g=p.assetT,h=p.assetI18n,x=Object(i.useState)(),y=Object(c.a)(x,2),v=y[0],N=y[1];if(Object(i.useEffect)((function(){f&&N(f.find((function(e){return e.id===t})))}),[f,t]),!v)return Object(d.jsx)(r.a,{});switch(u){case"original":return Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{color:"textPrimary",children:[v.firstName," ",v.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(h.language)?Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({},b),{},{color:"textPrimary",children:[v.firstName?g("character_name:".concat(t,".firstName"),v.firstName,O):""," ",g("character_name:".concat(t,".givenName"),v.givenName,O)]})):Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({},b),{},{color:"textPrimary",children:[g("character_name:".concat(t,".givenName"),v.givenName,O)," ",v.firstName?g("character_name:".concat(t,".firstName"),v.firstName,O):""]}));case"both":return Object(d.jsxs)(s.a,{container:!0,direction:"column",children:[Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{children:[v.firstName," ",v.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(h.language)?Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},b),{},{children:[v.firstName?g("character_name:".concat(t,".firstName"),v.firstName,O):""," ",g("character_name:".concat(t,".givenName"),v.givenName,O)]})):Object(d.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},b),{},{children:[g("character_name:".concat(t,".givenName"),v.givenName,O)," ",v.firstName?g("character_name:".concat(t,".firstName"),v.firstName,O):""]}))]})}},u=function(e){var t=e.releaseCondId,a=e.originalProps,n=e.translatedProps,r=e.assetTOptions,s=Object(l.g)("releaseConditions"),o=Object(c.a)(s,1)[0],j=Object(i.useState)(),O=Object(c.a)(j,2),u=O[0],m=O[1];if(Object(i.useEffect)((function(){o&&m(o.find((function(e){return e.id===t})))}),[t,o]),u){var f="";switch(u.releaseConditionType){case"none":f="release_cond:none_".concat(u.id);break;case"card_level":f="release_cond:card_level",r=Object.assign({},r,{level:u.releaseConditionTypeLevel});break;case"unit_rank":f="release_cond:unit_rank_".concat(u.releaseConditionTypeId),r=Object.assign({},r,{rank:u.releaseConditionTypeLevel});break;case"event_point":f="release_cond:event_point",r=Object.assign({},r,{point:u.releaseConditionTypeQuantity});break;default:f="release_cond:".concat(u.releaseConditionType)}return Object(d.jsx)(b,{contentKey:f,original:u.sentence,originalProps:a,translatedProps:n,assetTOptions:r})}return Object(d.jsx)("div",{})}},312:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(7),n=a(234),r=Object(n.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(c.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(c.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)}),inputHidden:{display:"none"},noDecorationAlsoOnHover:{textDecoration:"none","&:hover":{textDecoration:"none"},color:"inherit"},noDecoration:{textDecoration:"none","&:hover":{textDecoration:"underline"},color:"inherit"},pointer:{cursor:"pointer"}}}))},329:function(e,t,a){"use strict";var c=a(8),n=a(24),r=a(18),s=a(260),i=a(296),o=a(0),l=a(1),j=["xs","sm","md","lg","xl"],d={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,b=e.data,O=e.gridSize,u=e.viewProps,m=e.onComponentClick,f=function(e){var t=Object(n.a)({},e||d);return j.forEach((function(e,a,c){t[e]||(t[e]=a>0?t[c[a-1]]:12)})),t}(O),p=function(){var e=Object(r.a)();return j.map((function(t){return Object(s.a)(e.breakpoints.down(t))&&t})).find(Boolean)||j[j.length-1]}(),g=Object(o.useState)(!0),h=Object(c.a)(g,2),x=h[0],y=h[1],v=Object(o.useCallback)((function(e){return a(e,y)}),[a]),N=Object(o.useRef)(null);Object(o.useEffect)((function(){y(!0)}),[b]),Object(o.useEffect)((function(){var e=new IntersectionObserver(v,{threshold:.5}),t=N.current;return t&&e.observe(t),function(){t&&e.disconnect()}}),[v]);var S=12/f[p],w=b.length?S:2*S;return Object(l.jsxs)(o.Fragment,{children:[Object(l.jsx)(i.a,{container:!0,direction:"row",spacing:1,children:b.length?b.map((function(e,a){return Object(l.jsx)(i.a,{item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl,onClick:function(){m&&m(e)},children:Object(l.jsx)(t,Object(n.a)({data:e,index:a},u))},e.id)})):null}),Object(l.jsx)(i.a,{container:!0,direction:"row",ref:N,style:{display:x?"flex":"none",paddingTop:"4px"},spacing:1,children:Array.from({length:w}).map((function(e,a){return Object(l.jsx)(i.a,{item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl,children:Object(l.jsx)(t,{})},"empty-".concat(a))}))})]})}},338:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return j}));var c=a(31);function n(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem(t.storeName,JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem(t.storeName,JSON.stringify(n)),n;case"reset":return localStorage.setItem(t.storeName,JSON.stringify([])),[];default:throw new Error}}function r(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem(t.storeName,JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem(t.storeName,JSON.stringify(n)),n;case"reset":return localStorage.setItem(t.storeName,JSON.stringify([])),[];default:throw new Error}}function s(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem(t.storeName,JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem(t.storeName,JSON.stringify(n)),n;case"reset":return localStorage.setItem(t.storeName,JSON.stringify([])),[];default:throw new Error}}function i(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem(t.storeName,JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem(t.storeName,JSON.stringify(n)),n;case"reset":return localStorage.setItem(t.storeName,JSON.stringify([])),[];default:throw new Error}}function o(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem("card-list-filter-skills",JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem("card-list-filter-skills",JSON.stringify(n)),n;case"reset":return localStorage.setItem("card-list-filter-skills",JSON.stringify([])),[];default:throw new Error}}function l(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e),[t.payload]);return localStorage.setItem(t.storeName,JSON.stringify(a)),a;case"remove":var n=[].concat(Object(c.a)(e.slice(0,e.indexOf(t.payload))),Object(c.a)(e.slice(e.indexOf(t.payload)+1)));return localStorage.setItem(t.storeName,JSON.stringify(n)),n;case"reset":return localStorage.setItem(t.storeName,JSON.stringify([])),[];default:throw new Error}}function j(e,t){switch(t.type){case"add":var a=[].concat(Object(c.a)(e.teams),[t.payload]);return"local"===e.storageLocation&&localStorage.setItem(e.localKey,JSON.stringify(a)),Object.assign({},e,{teams:a});case"remove":var n=[].concat(Object(c.a)(e.teams.slice(0,t.payload)),Object(c.a)(e.teams.slice(t.payload+1)));return"local"===e.storageLocation&&localStorage.setItem(e.localKey,JSON.stringify(n)),Object.assign({},e,{teams:n});case"replace":var r=[].concat(Object(c.a)(e.teams.slice(0,t.payload.id)),[t.payload.data],Object(c.a)(e.teams.slice(t.payload.id+1)));return"local"===e.storageLocation&&localStorage.setItem(e.localKey,JSON.stringify(r)),Object.assign({},e,{teams:r});case"reload":return Object.assign({},e,{storageLocation:t.payload.location,teams:t.payload.teams});default:throw new Error}}}}]);