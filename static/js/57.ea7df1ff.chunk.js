(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[57],{1098:function(e,t,i){"use strict";i.r(t);var r=i(9),a=i.n(r),n=i(25),s=i(8),c=i(7),l=i(234),o=i(18),u=i(296),j=i(334),d=i(89),b=i(256),f=i(1061),m=i(135),p=i(316),h=i(521),O=i(386),x=i(1095),k=i(498),v=i(727),_=i(1096),g=i(378),y=i(458),P=i(0),w=i(213),S=i(680),U=i(687),C=i(309),I=i(37),z=i(342),E=i(48),N=i(1),L=Object(l.a)((function(e){var t;return{media:(t={},Object(c.a)(t,e.breakpoints.down("sm"),{paddingTop:"75%"}),Object(c.a)(t,e.breakpoints.up("md"),{paddingTop:"56.25%"}),Object(c.a)(t,"backgroundSize","contain"),Object(c.a)(t,"width","100%"),t)}}));t.default=function(){var e=Object(w.a)().t,t=Object(o.a)(),i=L(),r=Object(P.useContext)(I.c),c=r.jwtToken,l=r.sekaiProfile,R=r.updateSekaiProfile,T=Object(C.f)(c),M=T.getSekaiProfileMe,A=T.postSekaiProfileVerify,F=T.postSekaiProfileConfirm,G=T.putSekaiProfileUpdate,V=Object(E.f)().showError,B=Object(P.useState)(!1),J=Object(s.a)(B,2),H=J[0],$=J[1],q=Object(P.useState)(!1),D=Object(s.a)(q,2),K=D[0],Q=D[1],W=Object(P.useState)(!1),X=Object(s.a)(W,2),Y=X[0],Z=X[1],ee=Object(P.useState)(!1),te=Object(s.a)(ee,2),ie=te[0],re=te[1];return Object(P.useEffect)((function(){M().then((function(e){R(e)})).catch((function(e){"SekaiProfile.me.error.not-exist"===e.id&&R()}))}),[M,R]),Object(N.jsxs)(u.a,{container:!0,direction:"column",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(u.a,{container:!0,spacing:1,alignItems:"center",children:[l?Object(N.jsxs)(P.Fragment,{children:[!l.sekaiUserProfile&&Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(j.a,{size:"small",color:"secondary",label:e("user:profile.label.sekai_id_not_verified")})}),!H&&Object(N.jsxs)(P.Fragment,{children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(j.a,{size:"small",label:e("user:profile.label.sekai_user_id")})}),Object(N.jsx)(u.a,{item:!0,children:Object(N.jsxs)(u.a,{container:!0,alignItems:"center",children:[Object(N.jsx)(d.a,{children:l.sekaiUserId}),Object(N.jsx)(b.a,{size:"small",onClick:function(){return $(!0)},disabled:l.updateAvailable<=l.updateUsed,children:Object(N.jsx)(x.a,{})})]})}),l.sekaiUserProfile&&Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(f.a,{title:e("user:profile.label.update_left",{allowed:l.updateAvailable,used:l.updateUsed}),disableFocusListener:!0,arrow:!0,interactive:!0,children:Object(N.jsx)("span",{children:Object(N.jsxs)(m.a,{size:"small",onClick:function(){re(!0),G(l.id).then(function(){var e=Object(n.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,M();case 3:e.t1=e.sent,(0,e.t0)(e.t1),re(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){V(e.message),re(!1)}))},disabled:ie||l.updateAvailable<=l.updateUsed,variant:"contained",color:"primary",children:[ie?Object(N.jsx)(p.a,{size:24}):Object(N.jsx)(k.a,{}),e("user:profile.button.update_sekai_profile")]})})})})]})]}):!H&&Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return $(!0)},children:e("user:profile.button.bind_sekai_id")})}),H&&Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(g.c,{initialValues:{userid:(null===l||void 0===l?void 0:l.sekaiUserId)||""},onSubmit:function(){var t=Object(n.a)(a.a.mark((function t(i,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.setErrors,/^\d{16,18}$/.test(i.userid)){t.next=4;break}return V(e("user:profile.error.sekai_id_malformed")),t.abrupt("return");case 4:return t.prev=4,t.next=7,A(i.userid);case 7:return t.t0=R,t.next=10,M();case 10:t.t1=t.sent,(0,t.t0)(t.t1),$(!1),t.next=19;break;case 15:t.prev=15,t.t2=t.catch(4),console.log(t.t2),V(e("user:profile.error.sekai_id_already_bind"));case 19:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e,i){return t.apply(this,arguments)}}(),children:function(e){var t=e.submitForm,i=e.isSubmitting;return Object(N.jsx)(P.Fragment,{children:Object(N.jsxs)(g.b,{children:[Object(N.jsx)(g.a,{component:y.b,name:"userid",type:"text",InputProps:{endAdornment:Object(N.jsxs)(h.a,{position:"end",children:[Object(N.jsxs)(b.a,{size:"small",onClick:function(){return t()},disabled:i,children:[Object(N.jsx)(v.a,{})," ",i&&Object(N.jsx)(p.a,{size:"inherit"})]}),Object(N.jsx)(b.a,{size:"small",onClick:function(){return $(!1)},children:Object(N.jsx)(_.a,{})})]})}}),Object(N.jsx)("input",{type:"submit",style:{display:"none"}})]})})}})})]})}),l&&!l.sekaiUserProfile&&Object(N.jsxs)(u.a,{container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsxs)(d.a,{children:[e("user:profile.label.sekai_id_verify_token"),":"," ",l.sekaiUserToken]})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(u.a,{container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){return Q(!0)},disabled:Y,children:e("user:profile.button.verify_sekai_id")})}),Y&&Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(p.a,{size:24})})]})})]}),l&&l.sekaiUserProfile&&Object(N.jsxs)(u.a,{item:!0,container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,xs:12,sm:6,lg:4,xl:3,children:Object(N.jsxs)(u.a,{container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(j.a,{size:"small",label:e("user:profile.label.sekai_user_name")})}),Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(d.a,{children:l.sekaiUserProfile.user.userGamedata.name})})]})}),Object(N.jsx)(u.a,{item:!0,xs:12,sm:6,lg:4,xl:3,children:Object(N.jsxs)(u.a,{container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(j.a,{size:"small",label:e("user:profile.label.sekai_user_rank")})}),Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(d.a,{children:l.sekaiUserProfile.user.userGamedata.rank})})]})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(u.a,{container:!0,alignItems:"center",spacing:1,children:[Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(j.a,{size:"small",label:e("user:profile.label.sekai_user_word")})}),Object(N.jsx)(u.a,{item:!0,children:Object(N.jsx)(d.a,{children:l.sekaiUserProfile.userProfile.word})})]})}),Object(N.jsx)(u.a,{item:!0,xs:12,children:Object(N.jsxs)(u.a,{container:!0,spacing:1,children:[Object(N.jsx)(u.a,{item:!0,xs:12,md:4,children:Object(N.jsx)(z.a,{honorId:l.sekaiUserProfile.userProfile.honorId1,honorLevel:l.sekaiUserProfile.userProfile.honorLevel1})}),Object(N.jsx)(u.a,{item:!0,xs:12,md:4,children:Object(N.jsx)(z.a,{honorId:l.sekaiUserProfile.userProfile.honorId2,honorLevel:l.sekaiUserProfile.userProfile.honorLevel2})}),Object(N.jsx)(u.a,{item:!0,xs:12,md:4,children:Object(N.jsx)(z.a,{honorId:l.sekaiUserProfile.userProfile.honorId3,honorLevel:l.sekaiUserProfile.userProfile.honorLevel3})})]})})]}),Object(N.jsxs)(S.AutoRotatingCarousel,{label:e("user:profile.label.sekai_id_verify"),open:K,onClose:function(){return Q(!1)},onStart:function(){Z(!0),F(l.id,l.sekaiUserId).then(Object(n.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,M();case 3:e.t1=e.sent,(0,e.t0)(e.t1),Z(!1);case 6:case"end":return e.stop()}}),e)})))).catch((function(){V(e("user:profile.error.sekai_id_verify_failed")),Z(!1)})),Q(!1)},mobile:U.isMobile,autoplay:!1,children:[Object(N.jsx)(S.Slide,{media:Object(N.jsx)(O.a,{image:"".concat(window.isChinaMainland?"https://minio.dnaroma.eu/sekai-best-assets":"".concat("https://minio.dnaroma.eu","/sekai-best-assets"),"/verify/step_1.png"),title:"sekai id verify step 1",className:i.media}),mediaBackgroundStyle:{backgroundColor:t.palette.primary.main},style:{backgroundColor:t.palette.primary.main},title:e("user:profile.label.sekai_id_verify_step_1_title"),subtitle:e("user:profile.label.sekai_id_verify_step_1_subtitle")}),Object(N.jsx)(S.Slide,{media:Object(N.jsx)(O.a,{image:"".concat(window.isChinaMainland?"https://minio.dnaroma.eu/sekai-best-assets":"".concat("https://minio.dnaroma.eu","/sekai-best-assets"),"/verify/step_2.png"),title:"sekai id verify step 2",className:i.media}),mediaBackgroundStyle:{backgroundColor:t.palette.primary.main},style:{backgroundColor:t.palette.primary.main},title:e("user:profile.label.sekai_id_verify_step_2_title"),subtitle:e("user:profile.label.sekai_id_verify_step_2_subtitle",{verify_token:null===l||void 0===l?void 0:l.sekaiUserToken})})]})]})}},491:function(e,t,i){"use strict";i.d(t,"b",(function(){return u}));var r=i(2),a=i(3),n=i(0),s=i.n(n),c=(i(4),i(52)),l=i.n(c),o=i(91);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,i=function(e){var i=s.a.forwardRef((function(i,n){var c=i.innerRef,l=Object(a.a)(i,["innerRef"]),u=Object(o.a)()||t;return s.a.createElement(e,Object(r.a)({theme:u,ref:c||n},l))}));return l()(i,e),i};return i}var j=u();t.a=j},498:function(e,t,i){"use strict";var r=i(0),a=i(14);t.a=Object(a.a)(r.createElement("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update")},544:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var r=i(2),a=i(3),n=i(0),s=i.n(n),c=i(5),l=(i(4),i(52)),o=i.n(l),u=i(145);function j(e,t){var i={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(i[r]=e[r])})),i}function d(e){return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.name,l=Object(a.a)(i,["name"]);var d,b=n,f="function"===typeof t?function(e){return{root:function(i){return t(Object(r.a)({theme:e},i))}}}:{root:t},m=Object(u.a)(f,Object(r.a)({Component:e,name:n||e.displayName,classNamePrefix:b},l));t.filterProps&&(d=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var p=s.a.forwardRef((function(t,i){var n=t.children,l=t.className,o=t.clone,u=t.component,b=Object(a.a)(t,["children","className","clone","component"]),f=m(t),p=Object(c.a)(f.root,l),h=b;if(d&&(h=j(h,d)),o)return s.a.cloneElement(n,Object(r.a)({className:Object(c.a)(n.props.className,p)},h));if("function"===typeof n)return n(Object(r.a)({className:p},h));var O=u||e;return s.a.createElement(O,Object(r.a)({ref:i,className:p},h),n)}));return o()(p,e),p}}},729:function(e,t,i){"use strict";function r(e){return e}i.d(t,"a",(function(){return r}))},730:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var r=i(2),a=i(22),n=i(19),s=i(0),c=i.n(s),l=i(27),o=i(229),u=i(212),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this.options=t}return Object(n.a)(e,[{key:"collect",value:function(e){var t=new Map;this.sheetsRegistry=new l.b;var i=Object(u.a)();return c.a.createElement(o.b,Object(r.a)({sheetsManager:t,serverGenerateClassName:i,sheetsRegistry:this.sheetsRegistry},this.options),e)}},{key:"toString",value:function(){return this.sheetsRegistry?this.sheetsRegistry.toString():""}},{key:"getStyleElement",value:function(e){return c.a.createElement("style",Object(r.a)({id:"jss-server-side",key:"jss-server-side",dangerouslySetInnerHTML:{__html:this.toString()}},e))}}]),e}()}}]);