(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[23],{1004:function(t,e,n){var r=n(510);n(153);var i=n(1005),o=n(689),a=n(1029),s=n(690),l=n(1030),u=n(599).setLogging;t.exports=r({OEM:s,PSM:l,createScheduler:i,createWorker:o,setLogging:u},a)},1005:function(t,e,n){var r=n(9),i=n(1006),o=n(151),a=this,s=n(688),l=n(599).log,u=n(598),c=0;t.exports=function(){var t=u("Scheduler",c),e={},n={},h=[];c+=1;var g=function(){return Object.keys(e).length},f=function(){if(0!==h.length)for(var t=Object.keys(e),r=0;r<t.length;r+=1)if("undefined"===typeof n[t[r]]){h[0](e[t[r]]);break}},d=function(e,u){return new Promise((function(c,g){var d=s({action:e,payload:u});h.push(function(){var t=o(r.mark((function t(o){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.shift(),n[o.id]=d,t.prev=2,t.t0=c,t.next=6,o[e].apply(a,[].concat(i(u),[d.id]));case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(2),g(t.t2);case 13:return t.prev=13,delete n[o.id],f(),t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[2,10,13,17]])})));return function(e){return t.apply(this,arguments)}}()),l("[".concat(t,"]: Add ").concat(d.id," to JobQueue")),l("[".concat(t,"]: JobQueue length=").concat(h.length)),f()}))};return{addWorker:function(n){return e[n.id]=n,l("[".concat(t,"]: Add ").concat(n.id)),l("[".concat(t,"]: Number of workers=").concat(g())),f(),n.id},addJob:function(){var e=o(r.mark((function e(n){var i,o,a,s=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==g()){e.next=2;break}throw Error("[".concat(t,"]: You need to have at least one worker before adding jobs"));case 2:for(i=s.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=s[a];return e.abrupt("return",d(n,o));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),terminate:function(){var t=o(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object.keys(e).forEach(function(){var t=o(r.mark((function t(n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e[n].terminate();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),h=[];case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getQueueLen:function(){return h.length},getNumWorkers:g}}},1006:function(t,e,n){var r=n(1007),i=n(1008),o=n(156),a=n(1009);t.exports=function(t){return r(t)||i(t)||o(t)||a()}},1007:function(t,e,n){var r=n(157);t.exports=function(t){if(Array.isArray(t))return r(t)}},1008:function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},1009:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},1010:function(t,e,n){var r=n(510),i="browser"===n(1011)("type")?n(600):function(t){return t};t.exports=function(t){var e=r({},t);return["corePath","workerPath","langPath"].forEach((function(n){"undefined"!==typeof t[n]&&(e[n]=i(e[n]))})),e}},1011:function(t,e,n){(function(e){var r=n(1012);t.exports=function(t){var n={};return"undefined"!==typeof WorkerGlobalScope?n.type="webworker":"object"===typeof window?n.type="browser":r()?n.type="electron":"object"===typeof e&&(n.type="node"),"undefined"===typeof t?n:n[t]}}).call(this,n(111))},1012:function(t,e,n){(function(e){t.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof e||"object"!==typeof e.versions||!e.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,n(111))},1013:function(t,e,n){var r=n(510);t.exports=function(t){var e=[],n=[],i=[],o=[],a=[];return t.blocks.forEach((function(s){s.paragraphs.forEach((function(e){e.lines.forEach((function(n){n.words.forEach((function(i){i.symbols.forEach((function(o){a.push(r(r({},o),{},{page:t,block:s,paragraph:e,line:n,word:i}))})),o.push(r(r({},i),{},{page:t,block:s,paragraph:e,line:n}))})),i.push(r(r({},n),{},{page:t,block:s,paragraph:e}))})),n.push(r(r({},e),{},{page:t,block:s}))})),e.push(r(r({},s),{},{page:t}))})),r(r({},t),{},{blocks:e,paragraphs:n,lines:i,words:o,symbols:a})}},1014:function(t,e,n){var r=n(690);t.exports={defaultOEM:r.DEFAULT}},1015:function(t,e,n){var r=n(1016),i=n(1019),o=n(1020),a=n(1021),s=n(1022),l=n(1023);t.exports={defaultOptions:r,spawnWorker:i,terminateWorker:o,onMessage:a,send:s,loadImage:l}},1016:function(t,e,n){(function(e){var r=n(510),i=n(600),o=n(1017),a=o.version,s=o.dependencies,l=n(1018);t.exports=r(r({},l),{},{workerPath:"undefined"!==typeof e&&"development"===Object({NODE_ENV:"production",PUBLIC_URL:"/pr-342",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ASSET_DOMAIN_WW:"https://sekai-res.dnaroma.eu/file",REACT_APP_ASSET_DOMAIN_MINIO:"https://minio.dnaroma.eu",REACT_APP_ASSET_DOMAIN_CN:"https://sekai-assets-1258184166.file.myqcloud.com",REACT_APP_JSON_DOMAIN_WW:"https://i18n-json.sekai.best",REACT_APP_JSON_DOMAIN_CN:"https://sekai-json-1258184166.file.myqcloud.com",REACT_APP_JSON_DOMAIN_MASTER:"https://sekai-world.github.io",REACT_APP_API_BACKEND_BASE:"https://api.sekai.best",REACT_APP_STRAPI_BASE:"https://strapi.sekai.best",REACT_APP_FRONTEND_ASSET_BASE:"https://minio.dnaroma.eu/sekai-best-assets",REACT_APP_FRONTEND_ASSET_BASE_CN:"https://sekai-best-assets-1258184166.file.myqcloud.com",REACT_APP_VERSION:"0.8.0",REACT_APP_NAME:"sekai-viewer"}).TESS_ENV?i("/dist/worker.dev.js?nocache=".concat(Math.random().toString(36).slice(3))):"https://unpkg.com/tesseract.js@v".concat(a,"/dist/worker.min.js"),corePath:"https://unpkg.com/tesseract.js-core@v".concat(s["tesseract.js-core"].substring(1),"/tesseract-core.").concat("object"===typeof WebAssembly?"wasm":"asm",".js")})}).call(this,n(111))},1017:function(t){t.exports=JSON.parse('{"name":"tesseract.js","version":"2.1.4","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.1.0","cors":"^2.8.5","eslint":"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^8.1.3","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.44.2","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-middleware":"^3.7.2"},"dependencies":{"blueimp-load-image":"^3.0.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","jpeg-autorotate":"^7.1.1","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"},"_resolved":"https://registry.npmjs.org/tesseract.js/-/tesseract.js-2.1.4.tgz","_integrity":"sha512-r1nPDjkaD7QdlGfgn/q0BIKBnnCSXcM9PTrgp6rP2aWutwuf1BrQX564rSd1uQFJYk6GQYU6U6fm3bTQ/XMBZw==","_from":"tesseract.js@2.1.4"}')},1018:function(t,e){t.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:function(){}}},1019:function(t,e){t.exports=function(t){var e,n=t.workerPath,r=t.workerBlobURL;if(Blob&&URL&&r){var i=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});e=new Worker(URL.createObjectURL(i))}else e=new Worker(n);return e}},1020:function(t,e){t.exports=function(t){t.terminate()}},1021:function(t,e){t.exports=function(t,e){t.onmessage=function(t){var n=t.data;e(n)}}},1022:function(t,e,n){var r=n(9),i=n(151);t.exports=function(){var t=i(r.mark((function t(e,n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.postMessage(n);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},1023:function(t,e,n){var r=n(9),i=n(151),o=n(600),a=n(1024),s=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(t){var e=t.target.error.code;n(Error("File could not be read! Code=".concat(e)))},r.readAsArrayBuffer(t)}))},l=function(t){return new Promise((function(e){a(t,(function(t){return t.toBlob(e)}),{orientation:!0,canvas:!0})}))},u=function(){var t=i(r.mark((function t(e){var n,a,c,h;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,"undefined"!==typeof e){t.next=3;break}return t.abrupt("return","undefined");case 3:if("string"!==typeof e){t.next=24;break}if(!e.endsWith(".pbm")){t.next=13;break}return t.next=7,fetch(o(e));case 7:return a=t.sent,t.next=10,a.arrayBuffer();case 10:n=t.sent,t.next=22;break;case 13:return c=e,/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)||(c=o(e)),t.t0=s,t.next=18,l(c);case 18:return t.t1=t.sent,t.next=21,(0,t.t0)(t.t1);case 21:n=t.sent;case 22:t.next=47;break;case 24:if(!(e instanceof HTMLElement)){t.next=38;break}if("IMG"!==e.tagName){t.next=29;break}return t.next=28,u(e.src);case 28:n=t.sent;case 29:if("VIDEO"!==e.tagName){t.next=33;break}return t.next=32,u(e.poster);case 32:n=t.sent;case 33:if("CANVAS"!==e.tagName){t.next=36;break}return t.next=36,new Promise((function(t){e.toBlob(function(){var e=i(r.mark((function e(i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(i);case 2:n=e.sent,t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 36:t.next=47;break;case 38:if(!(e instanceof File||e instanceof Blob)){t.next=47;break}if(h=e,e.name.endsWith(".pbm")){t.next=44;break}return t.next=43,l(h);case 43:h=t.sent;case 44:return t.next=46,s(h);case 46:n=t.sent;case 47:return t.abrupt("return",new Uint8Array(n));case 48:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t.exports=u},1024:function(t,e,n){t.exports=n(449),n(691),n(540),n(1025),n(692),n(1026),n(693),n(1027),n(1028)},1025:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449)],void 0===(o="function"===typeof(r=function(t){"undefined"!==typeof fetch&&"undefined"!==typeof Request?t.fetchBlob=function(t,e,n){fetch(new Request(t,n)).then((function(t){return t.blob()})).then(e).catch((function(t){e(null,t)}))}:"undefined"!==typeof XMLHttpRequest&&"undefined"!==typeof ProgressEvent&&(t.fetchBlob=function(t,e,n){n=n||{};var r=new XMLHttpRequest;r.open(n.method||"GET",t),n.headers&&Object.keys(n.headers).forEach((function(t){r.setRequestHeader(t,n.headers[t])})),r.withCredentials="include"===n.credentials,r.responseType="blob",r.onload=function(){e(r.response)},r.onerror=r.onabort=r.ontimeout=function(t){e(null,t)},r.send(n.body)})})?r.apply(e,i):r)||(t.exports=o)}()},1026:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449),n(692)],void 0===(o="function"===typeof(r=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,n,r={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?r[this.privateIFDs[t].name]=e.getAll():(n=this.tags[t])&&(r[n]=this.getText(n)));return r},e.getName=function(t){var e=this.tags[t];return"object"===typeof e?this.privateIFDs[t].name:e},function(){var t,n,r,i=e.tags;for(t in i)if(Object.prototype.hasOwnProperty.call(i,t))if(n=e.privateIFDs[t])for(t in r=i[t])Object.prototype.hasOwnProperty.call(r,t)&&(n.map[r[t]]=Number(t));else e.map[i[t]]=Number(t)}()})?r.apply(e,i):r)||(t.exports=o)}()},1027:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449),n(693)],void 0===(o="function"===typeof(r=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),n=this.map[t],r=this.stringValues[n];return r?r[e]:String(e)},e.getAll=function(){var t,e,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(n[e]=this.getText(e));return n},e.getName=function(t){return this.tags[t]},function(){var t,n=e.tags,r=e.map||{};for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[n[t]]=Number(t))}()})?r.apply(e,i):r)||(t.exports=o)}()},1028:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449),n(691),n(540)],void 0===(o="function"===typeof(r=function(t){var e=t.hasCanvasOption,n=t.hasMetaOption,r=t.transformCoordinates,i=t.getTransformedOptions;(function(){var e="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",n=document.createElement("img");n.onload=function(){t.orientation=1===n.width&&2===n.height},n.src=e})(),t.hasCanvasOption=function(n){return!0===!!n.orientation&&!t.orientation||n.orientation>1&&n.orientation<9||e.call(t,n)},t.hasMetaOption=function(e){return e&&!0===e.orientation&&!t.orientation||n.call(t,e)},t.transformCoordinates=function(e,n){r.call(t,e,n);var i=e.getContext("2d"),o=e.width,a=e.height,s=e.style.width,l=e.style.height,u=n.orientation;if(u>1&&u<9)switch(u>4&&(e.width=a,e.height=o,e.style.width=l,e.style.height=s),u){case 2:i.translate(o,0),i.scale(-1,1);break;case 3:i.translate(o,a),i.rotate(Math.PI);break;case 4:i.translate(0,a),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-a);break;case 7:i.rotate(.5*Math.PI),i.translate(o,-a),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-o,0)}},t.getTransformedOptions=function(e,n,r){var o,a,s=i.call(t,e,n),l=s.orientation;if(!0===l){if(t.orientation)return s;l=r&&r.exif&&r.exif.get("Orientation")}if(!(l>1&&l<9))return s;for(a in o={},s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a]);switch(o.orientation=l,l){case 2:o.left=s.right,o.right=s.left;break;case 3:o.left=s.right,o.top=s.bottom,o.right=s.left,o.bottom=s.top;break;case 4:o.top=s.bottom,o.bottom=s.top;break;case 5:o.left=s.top,o.top=s.left,o.right=s.bottom,o.bottom=s.right;break;case 6:o.left=s.top,o.top=s.right,o.right=s.bottom,o.bottom=s.left;break;case 7:o.left=s.bottom,o.top=s.right,o.right=s.top,o.bottom=s.left;break;case 8:o.left=s.bottom,o.top=s.left,o.right=s.top,o.bottom=s.right}return o.orientation>4&&(o.maxWidth=s.maxHeight,o.maxHeight=s.maxWidth,o.minWidth=s.minHeight,o.minHeight=s.minWidth,o.sourceWidth=s.sourceHeight,o.sourceHeight=s.sourceWidth),o}})?r.apply(e,i):r)||(t.exports=o)}()},1029:function(t,e,n){var r=n(9),i=n(151),o=n(689),a=function(){var t=i(r.mark((function t(e,n,a){var s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o(a),t.next=3,s.load();case 3:return t.next=5,s.loadLanguage(n);case 5:return t.next=7,s.initialize(n);case 7:return t.abrupt("return",s.recognize(e).finally(i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.terminate();case 2:case"end":return t.stop()}}),t)})))));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),s=function(){var t=i(r.mark((function t(e,n){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o(n),t.next=3,a.load();case 3:return t.next=5,a.loadLanguage("osd");case 5:return t.next=7,a.initialize("osd");case 7:return t.abrupt("return",a.detect(e).finally(i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.terminate();case 2:case"end":return t.stop()}}),t)})))));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();t.exports={recognize:a,detect:s}},1030:function(t,e){t.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}},1036:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return _}));var r=n(43),i=n(73),o=n(22),a=n(19);function s(t,e,n){for(var r=new Array(t),i=0;i<r.length;i++)r[i]=new Array(e),r[i].fill(n);return r}function l(t,e){for(var n=s(t.length,t.length),r=0;r<t.length;r++)for(var i=0;i<t.length;i++)n[r][i]=t[r][i]*e;return n}function u(t,e,n,r,i,o){return void 0!=i&&void 0!=o?function(t,e,n,r,i,o){var a=t-r,s=e-i,l=n-o;return Math.sqrt(a*a+s*s+l*l)}(t,e,n,r,i,o):function(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}(t,e,n,r)}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0;Object(o.a)(this,t),this.image=null,this.canvas=null,this.ctx=void 0,this.data=new Uint8ClampedArray,this.width=0,this.height=0,this.colorModel=null==r?0:r,e>=0&&n>=0&&this.create(e,n),1==r&&void 0!=e&&void 0!=n&&(this.arrBinaryColor=new Array(e*n))}return Object(a.a)(t,[{key:"create",value:function(t,e){this.data=new Uint8ClampedArray(t*e*4),this.width=t,this.height=e}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getColorModel",value:function(){return this.colorModel}},{key:"setDimension",value:function(t,e){this.create(t,e)}},{key:"load",value:function(t,e){this.onload=e,this.image=new Image;var n=this;this.image.onload=function(){n.callbackImageLoaded(n)},this.image.crossOrigin="anonymous",this.image.src=t}},{key:"callbackImageLoaded",value:function(t){t.width=t.image.width,t.height=t.image.height,t.canvas=document.createElement("canvas"),t.canvas.width=t.image.width,t.canvas.height=t.image.height,t.ctx=t.canvas.getContext("2d"),void 0!=t.ctx&&(t.ctx.drawImage(t.image,0,0),this.data=t.ctx.getImageData(0,0,t.width,t.height).data,null!=t.onload&&t.onload())}},{key:"clone",value:function(){var e=new t(this.width,this.height,this.colorModel);return this.copyColorArray(e),e}},{key:"loadImageData",value:function(){for(var t=new ImageData(this.width,this.height),e=0;e<this.width*this.height*4;e++)t.data[e]=this.data[e];return t}},{key:"update",value:function(){this.canvas.getContext("2d").putImageData(this.loadImageData(),0,0)}},{key:"clear",value:function(t){for(var e=0;e<this.height;e++)for(var n=0;n<this.width;n++)this.setIntColor(n,e,t)}},{key:"getAlphaComponent",value:function(t,e){var n=4*(e*this.width+t);return this.data[n+3]}},{key:"setAlphaComponent",value:function(t,e,n){var r=4*(e*this.width+t);this.data[r+3]=n}},{key:"getIntComponent0",value:function(t,e){var n=4*(e*this.width+t);return this.data[n]}},{key:"getIntComponent1",value:function(t,e){var n=4*(e*this.width+t);return this.data[n+1]}},{key:"getIntComponent2",value:function(t,e){var n=4*(e*this.width+t);return this.data[n+2]}},{key:"setIntColor",value:function(t,e,n,r,i,o){null==r?this.setIntColor1(t,e,n):null==i&&null==o?this.setIntColor2(t,e,n,r):null==o?this.setIntColor3(t,e,n,r,i):this.setIntColor4(t,e,n,r,i,o)}},{key:"getIntColor",value:function(t,e){var n=4*(e*this.width+t);return 4294967296+(this.data[n+3]<<24)+(this.data[n]<<16)+(this.data[n+1]<<8)+this.data[n+2]}},{key:"setIntColor1",value:function(t,e,n){var r=(4278190080&n)>>>24,i=(16711680&n)>>16,o=(65280&n)>>8,a=255&n;this.setIntColor4(t,e,r,i,o,a)}},{key:"setBinaryColor",value:function(t,e,n){var r=e*this.width+t;this.arrBinaryColor[r]=n}},{key:"getBinaryColor",value:function(t,e){var n=e*this.width+t;return this.arrBinaryColor[n]}},{key:"copyColorArray",value:function(t){if(this.colorModel==t.colorModel)switch(this.colorModel){case 0:for(var e=0;e<this.data.length;e++)t.data[e]=this.data[e];break;case 1:for(e=0;e<this.arrBinaryColor.length;e++)t.arrBinaryColor[e]=this.arrBinaryColor[e]}}},{key:"drawRect",value:function(t,e,n,r,i){for(var o=t;o<t+n;o++)this.setIntColor(o,e,i),this.setIntColor(o,e+(r-1),i);for(o=e;o<e+r;o++)this.setIntColor(t,o,i),this.setIntColor(t+(n-1),o,i)}},{key:"fillRect",value:function(t,e,n,r,i){for(var o=t;o<t+n;o++)for(var a=e;a<e+r;a++)o<this.width&&a<this.width&&this.setIntColor(o,a,i)}},{key:"setColorToAlpha",value:function(t,e){for(var n=0;n<this.height;n++)for(var r=0;r<this.width;r++)(16777215&this.getIntColor(r,n))==(16777215&t)&&this.setAlphaComponent(r,n,e)}},{key:"setAlphaToColor",value:function(t){for(var e=0;e<this.height;e++)for(var n=0;n<this.width;n++)0==this.getAlphaComponent(n,e)&&this.setIntColor(n,e,4294967295)}},{key:"setIntColor2",value:function(t,e,n,r){var i=(16711680&r)>>16,o=(65280&r)>>8,a=255&r;this.setIntColor4(t,e,n,i,o,a)}},{key:"setIntColor3",value:function(t,e,n,r,i){this.setIntColor4(t,e,255,n,r,i)}},{key:"setIntColor4",value:function(t,e,n,r,i,o){var a=4*(e*this.width+t);this.data[a]=r,this.data[a+1]=i,this.data[a+2]=o,this.data[a+3]=n}},{key:"isValidPosition",value:function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height}},{key:"draw",value:function(t,e,n,r){null==e&&(e=0),null==n&&(n=0);var i=t.getContext("2d");void 0!=i&&i.putImageData(this.loadImageData(),e,n)}},{key:"toBlob",value:function(){return this.update(),this.dataURItoBlob(this.canvas.toDataURL("image/png"))}},{key:"dataURItoBlob",value:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return new Blob([r],{type:n})}}]),t}(),h=new(function(){function t(e,n){Object(o.a)(this,t),this.width=e,this.height=n,this.arrMask=0!=e&&0!=n?s(e,n):void 0}return Object(a.a)(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"addPixel",value:function(t,e){void 0!=this.arrMask&&(this.arrMask[t][e]=!0)}},{key:"removePixel",value:function(t,e){void 0!=this.arrMask&&(this.arrMask[t][e]=!1)}},{key:"clear",value:function(){if(null!=this.arrMask)for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.arrMask[e][t]=!1}},{key:"getMask",value:function(){return this.arrMask}},{key:"addRectRegion",value:function(t,e,n,r){if(void 0!=this.arrMask)for(var i=t;i<t+n;i++)for(var o=e;o<e+r;o++)this.arrMask[i][o]=!0}}]),t}())(0,0),g=function(){function t(e,n,r,i){Object(o.a)(this,t),this.width=-1,this.height=-1,this.area=-1,this.x1=e,this.x2=r,this.y1=n,this.y2=i,-1!=e&&-1!=n&&-1!=r&&-1!=i&&(this.width=r-e+1,this.height=i-n+1,this.area=this.width*this.height)}return Object(a.a)(t,[{key:"segmentMinDistance",value:function(t,e){for(var n,r,i=0;i<t.length-1;i++)for(var o=i+1;o<t.length;o++)n=t[i],r=t[o],u((n.x1+n.x2)/2,(n.y1+n.y2)/2,(r.x1+r.x2)/2,(r.y1+r.y2)/2)<e&&(t.splice(o,1),o--)}}]),t}(),f=function(){function t(){Object(o.a)(this,t),this.attributes={}}return Object(a.a)(t,[{key:"setAttribute",value:function(t,e){this.attributes[t]=e}},{key:"getAttribute",value:function(t){return this.attributes[t]}}]),t}(),d=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("threshold",30),t}return Object(a.a)(n,[{key:"process",value:function(t,e){for(var n=this.getAttribute("threshold"),r=t[0],i=0;i<r.getHeight();i++)for(var o=0;o<r.getWidth();o++)e.setIntColor(o,i,this.getBackgroundPixel(o,i,t,n))}},{key:"getBackgroundPixel",value:function(t,e,n,r){var i=new Array;for(var o in n){var a=n[o],s=new Array(4);if(s[0]=a.getIntComponent0(t,e),s[1]=a.getIntComponent1(t,e),s[2]=a.getIntComponent2(t,e),s[3]=0,0==i.length)i.push(s);else{var l=!1;for(var u in i){var c=i[u];if(Math.abs(c[0]-s[0])<.3*r&&Math.abs(c[1]-s[1])<.3*r&&Math.abs(c[2]-s[2])<.3*r){c[0]=Math.floor((c[0]+s[0])/2),c[1]=Math.floor((c[1]+s[1])/2),c[2]=Math.floor((c[2]+s[2])/2),c[3]++,l=!0;break}}l||i.push(s)}}for(var h=-1,g=0,f=(c=null,0);f<i.length;f++)c=i[f],(-1==h||c[3]>h)&&(h=c[3],g=f);return 4278190080+((c=i[g])[0]<<16)+(c[1]<<8)+c[2]}}]),n}(f),p=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).RED=0,t.GREEN=1,t.BLUE=2,t.kernelMatrix=null,t.resultMatrix=null,t.appiledkernelMatrix=null,t.radius=null,t.setAttribute("radius",3),t}return Object(a.a)(n,[{key:"process",value:function(t,e,n){this.radius=this.getAttribute("radius");var r,i=t.getWidth(),o=t.getHeight();this.kernelMatrix=this.getGaussianKernel(),this.resultMatrix=function(t,e,n,r){for(var i=new Array(t),o=0;o<i.length;o++){i[o]=new Array(e);for(var a=0;a<i[o].length;a++)i[o][a]=new Array(n),i[o][a].fill(r)}return i}(i,o,3,0),this.appiledkernelMatrix=s(i,o,0);for(var a=n.getMask(),l=0;l<i;l++)for(var u=0;u<o;u++)(null==a||a[l][u])&&(r=t.getIntColor(l,u),this.applyKernel(l,u,r,e));for(l=0;l<i;l++)for(u=0;u<o;u++)(null==a||a[l][u])&&(this.resultMatrix[l][u][this.RED]=this.resultMatrix[l][u][0]/this.appiledkernelMatrix[l][u]%256,this.resultMatrix[l][u][this.GREEN]=this.resultMatrix[l][u][1]/this.appiledkernelMatrix[l][u]%256,this.resultMatrix[l][u][this.BLUE]=this.resultMatrix[l][u][2]/this.appiledkernelMatrix[l][u]%256,e.setIntColor(l,u,t.getAlphaComponent(l,u),Math.floor(this.resultMatrix[l][u][0]),Math.floor(this.resultMatrix[l][u][1]),Math.floor(this.resultMatrix[l][u][2])))}},{key:"getGaussianKernel",value:function(){for(var t,e,n,r=s(2*this.radius+1,2*this.radius+1),i=this.radius/3,o=1;o<=2*this.radius+1;o++)for(var a=1;a<=2*this.radius+1;a++)e=Math.abs(o-(this.radius+1)),n=Math.abs(a-(this.radius+1)),t=Math.sqrt(e*e+n*n),r[a-1][o-1]=1/(2*Math.PI*i*i)*Math.exp(-t*t/(2*i*i));return r}},{key:"applyKernel",value:function(t,e,n,r){for(var i=e;i<e+2*this.radius;i++)for(var o=t;o<t+2*this.radius;o++)o-this.radius>=0&&o-this.radius<r.getWidth()&&i-this.radius>=0&&i-this.radius<r.getHeight()&&(this.resultMatrix[o-this.radius][i-this.radius][this.RED]+=((16711680&n)>>>16)*this.kernelMatrix[o-t][i-e],this.resultMatrix[o-this.radius][i-this.radius][this.GREEN]+=((65280&n)>>>8)*this.kernelMatrix[o-t][i-e],this.resultMatrix[o-this.radius][i-this.radius][this.BLUE]+=(255&n)*this.kernelMatrix[o-t][i-e],this.appiledkernelMatrix[o-this.radius][i-this.radius]+=this.kernelMatrix[o-t][i-e])}}]),n}(f),b=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("radius",5),t}return Object(a.a)(n,[{key:"process",value:function(t,e){for(var n=this.getAttribute("radius"),r=0;r<e.getHeight();r++)for(var i=0;i<e.getWidth();i++)this.alphaRadius(e,i,r,n)}},{key:"alphaRadius",value:function(t,e,n,r){for(var i,o=t.getAlphaComponent(e,n),a=0,s=0,l=Math.floor(r/2),u=n-l;u<n+l;u++)for(var c=e-l;c<e+l;c++)c>=0&&c<t.getWidth()&&u>=0&&u<t.getHeight()&&(a+=t.getAlphaComponent(c,u),s++);(i=Math.floor(a/s))<o&&t.setAlphaComponent(e,n,i)}}]),n}(f),v=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){return Object(o.a)(this,n),e.call(this)}return Object(a.a)(n,[{key:"process",value:function(t,e){for(var n=0,r=0,i=0,o=0;o<t.getWidth();o++)for(var a=0;a<t.getHeight();a++)n+=t.getIntComponent0(o,a),r+=t.getIntComponent1(o,a),i+=t.getIntComponent2(o,a);var s=t.getWidth()*t.getHeight();n=Math.round(n/s),r=Math.round(r/s),i=Math.round(i/s),null!=e&&e.set("averageColor",[n,r,i])}}]),n}(f),m=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).MAX_RLEVEL=.03,t.grayScale=new C,t.setAttribute("level",10),t}return Object(a.a)(n,[{key:"process",value:function(t,e){this.grayScale.process(t,e);for(var n,r=this.getAttribute("level"),i=r/100*this.MAX_RLEVEL,o=0,a=0;a<e.getHeight();a++)for(var s=0;s<e.getWidth();s++)n=(n=t.getIntComponent0(s,a))<=127?Math.max(n*(1-(127-n)*i),0):Math.min(n*(1+(n-127)*i),255),o++<1&&(console.log("gray:"+n),console.log("level:"+r),console.log("rlevel:"+i)),e.setIntColor(s,a,255,Math.floor(n),Math.floor(n),Math.floor(n))}}]),n}(f),y=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("brightness",0),t.setAttribute("contrast",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n,r,i,o=this.getAttribute("brightness"),a=this.getAttribute("contrast");a=Math.pow((127+a)/127,2);for(var s=0;s<t.getWidth();s++)for(var l=0;l<t.getHeight();l++)n=t.getIntComponent0(s,l),r=t.getIntComponent1(s,l),i=t.getIntComponent2(s,l),(n+=(1-n/255)*o)<0&&(n=0),n>255&&(n=255),(r+=(1-r/255)*o)<0&&(r=0),r>255&&(r=255),(i+=(1-i/255)*o)<0&&(i=0),i>255&&(i=255),e.setIntColor(s,l,t.getAlphaComponent(s,l),Math.floor(n),Math.floor(r),Math.floor(i));for(s=0;s<t.getWidth();s++)for(l=0;l<t.getHeight();l++)n=e.getIntComponent0(s,l),r=e.getIntComponent1(s,l),i=e.getIntComponent2(s,l),n/=255,n-=.5,n*=a,n+=.5,r/=255,r-=.5,r*=a,r+=.5,i/=255,i-=.5,i*=a,i+=.5,(n*=255)<0&&(n=0),n>255&&(n=255),(r*=255)<0&&(r=0),r>255&&(r=255),(i*=255)<0&&(i=0),i>255&&(i=255),e.setIntColor(s,l,t.getAlphaComponent(s,l),Math.floor(n),Math.floor(r),Math.floor(i))}}]),n}(f),A=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("red",0),t.setAttribute("green",0),t.setAttribute("blue",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n,r,i,o=this.getAttribute("red"),a=this.getAttribute("green"),s=this.getAttribute("blue"),l=1+Math.abs(o/100*2.5),u=1+Math.abs(a/100*2.5),c=1+Math.abs(s/100*2.5);l=o>0?l:1/l,u=a>0?u:1/u,c=s>0?c:1/c;for(var h=0;h<t.getHeight();h++)for(var g=0;g<t.getWidth();g++)n=t.getIntComponent0(g,h),r=t.getIntComponent1(g,h),i=t.getIntComponent2(g,h),n=Math.min(n*l,255),r=Math.min(r*u,255),i=Math.min(i*c,255),e.setIntColor(g,h,255,n,r,i)}}]),n}(f),x=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){return Object(o.a)(this,n),e.call(this)}return Object(a.a)(n,[{key:"process",value:function(t,e,n){for(var r=n.getMask(),i=0;i<t.getWidth();i++)for(var o=0;o<t.getHeight();o++)if(null==r||r[i][o]){var a=0,s=0,l=0;o>0&&i>0?(a=t.getIntComponent0(i,o)-t.getIntComponent0(i-1,o-1),s=t.getIntComponent1(i,o)-t.getIntComponent1(i-1,o-1),l=t.getIntComponent2(i,o)-t.getIntComponent2(i-1,o-1)):(a=0,s=0,l=0);var u=a;Math.abs(s)>Math.abs(u)&&(u=s),Math.abs(l)>Math.abs(u)&&(u=l);var c=Math.max(Math.min(128+u,255),0);e.setIntColor(i,o,255,c,c,c)}else e.setIntColor(i,o,255,t.getIntColor(i,o))}}]),n}(f),C=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){return Object(o.a)(this,n),e.call(this)}return Object(a.a)(n,[{key:"process",value:function(t,e,n){var r,i,o,a,s;null!=n&&(r=n.getMask());for(var l=0;l<t.getWidth();l++)for(var u=0;u<t.getHeight();u++)(null==r||r[l][u])&&(i=t.getIntComponent0(l,u),o=t.getIntComponent1(l,u),a=t.getIntComponent2(l,u),s=Math.ceil(.3*i+.59*o+.11*a),e.setIntColor(l,u,t.getAlphaComponent(l,u),s,s,s))}}]),n}(f),w=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){return Object(o.a)(this,n),e.call(this)}return Object(a.a)(n,[{key:"process",value:function(t,e,n){for(var r,i,o,a=n.getMask(),s=0;s<t.getWidth();s++)for(var l=0;l<t.getHeight();l++)(null==a||a[s][l])&&(r=255-t.getIntComponent0(s,l),i=255-t.getIntComponent1(s,l),o=255-t.getIntComponent2(s,l),e.setIntColor(s,l,t.getAlphaComponent(s,l),r,i,o))}}]),n}(f),k=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("txtValue","20"),t.setAttribute("intensity",20),t}return Object(a.a)(n,[{key:"process",value:function(t,e,n){var r,i,o,a;a=this.getAttribute("intensity");t.getWidth(),t.getHeight();for(var s=n.getMask(),l=0;l<t.getWidth();l++)for(var u=0;u<t.getHeight();u++)(null==s||s[l][u])&&(r=i=o=((r=t.getIntComponent0(l,u))+(i=t.getIntComponent1(l,u))+(o=t.getIntComponent2(l,u)))/3,r=this.truncate(r+2*a),i=this.truncate(i+a),e.setIntColor(l,u,t.getAlphaComponent(l,u),r,i,o))}},{key:"truncate",value:function(t){return t<0?0:t>255?255:t}}]),n}(f),O=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("threshold",125),t.setAttribute("thresholdRange",-1),t.setAttribute("neighborhood",-1),t.setAttribute("range",-1),t.pluginGray=new C,t.threshold=null,t.thresholdRange=null,t.neighborhood=null,t.range=null,t}return Object(a.a)(n,[{key:"process",value:function(t,e,n){this.threshold=this.getAttribute("threshold"),this.thresholdRange=this.getAttribute("thresholdRange"),this.neighborhood=this.getAttribute("neighborhood"),this.range=this.getAttribute("range"),-1==this.thresholdRange&&(this.thresholdRange=255-this.threshold),this.pluginGray.process(t,e,n);var r=n.getMask();-1==this.neighborhood&&-1==this.range?this.hardThreshold(t,e,r):this.contrastThreshold(t,e)}},{key:"hardThreshold",value:function(t,e,n){for(var r=0;r<t.getHeight();r++)for(var i=0;i<t.getWidth();i++)if(null==n||n[i][r]){var o=t.getIntComponent0(i,r),a=255*Number(!(o<this.threshold||o>this.threshold+this.thresholdRange));e.setIntColor(i,r,t.getAlphaComponent(i,r),a,a,a)}}},{key:"contrastThreshold",value:function(t,e){this.range=1;for(var n=0;n<t.getWidth();n++)for(var r=0;r<t.getHeight();r++)this.checkNeighbors(n,r,this.neighborhood,this.neighborhood,t)?e.setIntColor(n,r,0,0,0):e.setIntColor(n,r,255,255,255)}},{key:"checkNeighbors",value:function(t,e,n,r,i){var o,a=0;o=i.getIntComponent0(t,e);for(var s=0-n;s<=n;s++)for(var l=0-r;l<=r;l++)0==s&&0==l||o<this.getSafeColor(t+s,e+l,i)-this.range&&-1!=this.getSafeColor(t+s,e+l,i)&&a++;return a>n*r*.5}},{key:"getSafeColor",value:function(t,e,n){return t>=0&&t<n.getWidth()&&e>=0&&e<n.getHeight()?n.getIntComponent0(t,e):-1}}]),n}(f),P=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("neighborhoodSide",10),t.setAttribute("samplingPixelDistance",1),t.setAttribute("thresholdPercentageOfAverage",1),t}return Object(a.a)(n,[{key:"process",value:function(t,e){for(var n=this.getAttribute("neighborhoodSide"),r=this.getAttribute("samplingPixelDistance"),i=this.getAttribute("thresholdPercentageOfAverage"),o=0;o<t.getHeight();o++)for(var a=0;a<t.getWidth();a++)this.theshold(t,e,a,o,i,n,r)}},{key:"theshold",value:function(t,e,n,r,i,o,a){for(var s=-1,l=-1,u=0,c=0,h=a,g=r-o/2;g<r+(h+o/2);g+=h)for(var f=n-o/2;f<n+o/2;f+=h)if(f>=0&&g>=0&&f<t.getWidth()&&g<t.getHeight()){var d=t.getIntComponent0(f,g);(-1==s||d<s)&&(s=d),(-1==l||d>l)&&(l=d),c+=d,u++}c/=u,(d=t.getIntComponent0(n,r))<c*i||l-s<=30?e.setIntColor(n,r,255,0,0,0):e.setIntColor(n,r,255,255,255,255)}}]),n}(f),I=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("imageOther",null),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("imageOther"),r=this.getAttribute("x"),i=this.getAttribute("y");if(null!=n)for(var o=0;o<t.getHeight();o++)for(var a=0;a<t.getWidth();a++){var s=a-r,l=o-i;if(s>=0&&s<n.getWidth()&&l>=0&&l<n.getHeight()){var u=n.getAlphaComponent(s,l);if(0!=u){var c=u/255,h=t.getIntComponent0(a,o),g=t.getIntComponent1(a,o),f=t.getIntComponent2(a,o),d=n.getIntComponent0(s,l),p=n.getIntComponent1(s,l),b=n.getIntComponent2(s,l),v=Math.floor(h*(1-c)+d*c),m=Math.floor(g*(1-c)+p*c),y=Math.floor(f*(1-c)+b*c);e.setIntColor(a,o,Math.max(t.getAlphaComponent(r,i),u),v,m,y)}else e.setIntColor(a,o,t.getIntColor(a,o))}else e.setIntColor(a,o,t.getIntColor(a,o))}}}]),n}(f),S=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).background=new d,t.setAttribute("threshold",30),t}return Object(a.a)(n,[{key:"process",value:function(t,e){if(t.length>0){var n=this.getAttribute("threshold");this.background.setAttribute("threshold",n);var r=t[0].clone();this.background.process(t,r),r.copyColorArray(e),this.mergePhotos(t,e,r,n)}}},{key:"mergePhotos",value:function(t,e,n,r){for(var i in t){var o=t[i];this.mergePhotosSingle(o,e,n,r)}}},{key:"mergePhotosSingle",value:function(t,e,n,r){for(var i,o,a,s,l,u,c=0;c<t.getHeight();c++)for(var h=0;h<t.getWidth();h++)i=t.getIntComponent0(h,c),o=t.getIntComponent1(h,c),a=t.getIntComponent2(h,c),s=n.getIntComponent0(h,c),l=n.getIntComponent1(h,c),u=n.getIntComponent2(h,c),(Math.abs(i-s)>r||Math.abs(o-l)>r||Math.abs(a-u)>r)&&e.setIntColor(h,c,255,i,o,a)}}]),n}(f),j=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("matrix",null),t}return Object(a.a)(n,[{key:"process",value:function(t,e,n,r,i){var o=this.getAttribute("matrix");if(null!=o&&o.length>0)for(var a=0;a<t.getHeight();a++)for(var s=0;s<t.getWidth();s++)a>=o.length/2&&a<t.getHeight()-o.length/2&&s>=o[0].length/2&&s<t.getWidth()-o[0].length/2?this.applyMatrix(s,a,o,t,e):e.setIntColor(s,a,4278190080)}},{key:"applyMatrix",value:function(t,e,n,r,i){for(var o,a,s=0,l=0,u=0,c=Math.ceil(n[0].length/2),h=Math.ceil(n.length/2),g=0;g<n.length;g++)for(var f=0;f<n[0].length;f++)0!=n[g][f]&&(a=e+(g-h),(o=t+(f-c))>=0&&o<i.getWidth()&&a>=0&&a<i.getHeight()&&(s+=n[g][f]*r.getIntComponent0(o,a),l+=n[g][f]*r.getIntComponent1(o,a),u+=n[g][f]*r.getIntComponent2(o,a)));s=Math.abs(s),l=Math.abs(l),u=Math.abs(u),s+=i.getIntComponent0(t,e),l+=i.getIntComponent1(t,e),u+=i.getIntComponent2(t,e),s=Math.min(s,255),l=Math.min(l,255),u=Math.min(u,255),s=Math.max(s,0),l=Math.max(l,0),u=Math.max(u,0),i.setIntColor(t,e,r.getAlphaComponent(t,e),Math.floor(s),Math.floor(l),Math.floor(u))}}]),n}(f),M=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).directions=[[1,0],[-1,0],[0,1],[0,-1],[-1,-1],[1,-1],[-1,1],[1,1]],t.setAttribute("matrixSize",3),t.setAttribute("threshold",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("matrixSize"),r=this.getAttribute("threshold"),i=new c(t.getWidth(),t.getHeight());_.grayScale(t,i);for(var o=s(i.getWidth(),i.getHeight(),0),a=s(i.getWidth(),i.getHeight(),0),l=0;l<i.getHeight();l++)for(var u=0;u<i.getWidth();u++)o[u][l]=this.c(u,l,n,i),o[u][l]<r&&(o[u][l]=0);for(u=0;u<o.length;u++)for(l=0;l<o[u].length;l++)a[u][l]=this.nonmax(u,l,n,o),a[u][l]>0&&(a[u][l]=1);null!=e&&e.set("cornernessMap",a)}},{key:"nonmax",value:function(t,e,n,r){var i=Math.floor(n/2);if(t-(i+1)>=0&&t+(i+1)<r.length&&e-(i+1)>=0&&e+(i+1)<r[0].length)for(var o=-i;o<=i;o++)for(var a=-i;a<=i;a++)if((0!=o||0!=a)&&r[t][e]<r[t+o][e+a])return 0;return r[t][e]}},{key:"c",value:function(t,e,n,r){var i,o=-1,a=Math.floor(n/2);if(t-(a+1)>=0&&t+(a+1)<r.getWidth()&&e-(a+1)>=0&&e+(a+1)<r.getHeight())for(var s=0;s<this.directions.length;s++){i=0;for(var l=-a;l<=a;l++)for(var u=-a;u<=a;u++)i+=Math.pow(r.getIntComponent0(t+l,e+u)-r.getIntComponent0(t+l+this.directions[s][0],e+u+this.directions[s][1]),2);(-1==o||i<o)&&(o=i)}return o}}]),n}(f),E=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).matrixPrewittX=[[1,0,-1],[1,0,-1],[1,0,-1]],t.matrixPrewittY=[[1,1,1],[0,0,0],[-1,-1,-1]],t.convolution=new j,t.setAttribute("intensity",1),t}return Object(a.a)(n,[{key:"process",value:function(t,e,n,r){var i=this.getAttribute("intensity");1==i?(this.convolution.setAttribute("matrix",this.matrixPrewittX),this.convolution.process(t,e,null,n,r),this.convolution.setAttribute("matrix",this.matrixPrewittY),this.convolution.process(t,e,null,n,r)):(this.convolution.setAttribute("matrix",l(this.matrixPrewittX,i)),this.convolution.process(t,e,null,n,r),this.convolution.setAttribute("matrix",l(this.matrixPrewittY,i)),this.convolution.process(t,e,null,n,r))}}]),n}(f),D=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("color",4294901760),t.setAttribute("tile",null),t.setAttribute("threshold",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n,r,i,o=new Array,a=this.getAttribute("x"),l=this.getAttribute("y"),u=this.getAttribute("tile");if(this.threshold=this.getAttribute("threshold"),e.isValidPosition(a,l)){t.getIntColor(a,l);var c=t.getIntComponent0(a,l),h=t.getIntComponent1(a,l),g=t.getIntComponent2(a,l),f=this.getAttribute("color"),d=s(e.getWidth(),e.getHeight(),!1);for(d[a][l]=!0,o.push(new N(a,l));o.length>0;){for(n=o.splice(0,1)[0],r=new N(n.x,n.y),i=new N(n.x,n.y);r.x-1>=0&&this.match(t,r.x-1,r.y,c,h,g,this.threshold)&&!d[r.x-1][r.y];)r.x--;for(;i.x+1<t.getWidth()&&this.match(t,i.x+1,i.y,c,h,g,this.threshold)&&!d[i.x+1][i.y];)i.x++;for(var p=r.x;p<=i.x;p++)d[p][n.y]=!0,n.y-1>=0&&this.match(t,p,n.y-1,c,h,g,this.threshold)&&!d[p][n.y-1]&&o.push(new N(p,n.y-1)),n.y+1<e.getHeight()&&this.match(t,p,n.y+1,c,h,g,this.threshold)&&!d[p][n.y+1]&&o.push(new N(p,n.y+1))}if(null!=u);else for(var b=0;b<e.getHeight();b++)for(var v=0;v<e.getWidth();v++)d[v][b]&&e.setIntColor(v,b,f)}}},{key:"match",value:function(t,e,n,r,i,o,a){return Math.abs(t.getIntComponent0(e,n)-r)+Math.abs(t.getIntComponent1(e,n)-i)+Math.abs(t.getIntComponent2(e,n)-o)<=a}}]),n}(f),B=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).threshold=128,t}return Object(a.a)(n,[{key:"process",value:function(t,e,n){var r,i;_.grayScale(t,e),null!=n&&(i=n.getMask());for(var o=0;o<e.getHeight();o++)for(var a=0;a<e.getWidth();a++)if(null==i||i[a][o]){var s=e.getIntComponent0(a,o);s>this.threshold?(e.setIntColor(a,o,t.getAlphaComponent(a,o),255,255,255),r=-(255-s)):(e.setIntColor(a,o,t.getAlphaComponent(a,o),0,0,0),r=s),a+1<e.getWidth()&&(s=e.getIntComponent0(a+1,o),s+=Math.floor(.4375*r),s=this.getValidGray(s),e.setIntColor(a+1,o,t.getAlphaComponent(a+1,o),s,s,s),o+1<e.getHeight()&&(s=e.getIntComponent0(a+1,o+1),s+=Math.floor(.0625*r),s=this.getValidGray(s),e.setIntColor(a+1,o+1,t.getAlphaComponent(a+1,o+1),s,s,s))),o+1<e.getHeight()&&(s=e.getIntComponent0(a,o+1),s+=Math.floor(.3125*r),s=this.getValidGray(s),e.setIntColor(a,o+1,t.getAlphaComponent(a,o+1),s,s,s),a-1>=0&&(s=e.getIntComponent0(a-1,o+1),s+=Math.floor(.1875*r),s=this.getValidGray(s),e.setIntColor(a-1,o+1,t.getAlphaComponent(a-1,o+1),s,s,s)))}}},{key:"getValidGray",value:function(t){return t<0?0:t>255?255:t}}]),n}(f),R=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).matrix=s(3,3,!0),t.setAttribute("matrix",3),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("matrix");1==t.getColorModel()&&null!=n&&(_.morphologicalDilation(t,e,n),e.copyColorArray(t),_.morphologicalErosion(t,e,n))}}]),n}(f),W=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).matrix=s(3,3,!0),t.setAttribute("matrix",3),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("matrix");if(1==t.getColorModel()&&null!=n){t.copyColorArray(e);for(var r=0;r<t.getHeight();r++)for(var i=0;i<t.getWidth();i++)this.applyMatrix(i,r,n,t,e)}}},{key:"applyMatrix",value:function(t,e,n,r,i){var o,a,s=n[0].length/2,l=n.length/2;if(r.getBinaryColor(t,e))for(var u=0;u<n.length;u++)for(var c=0;c<n.length;c++)u==l&&c==s||!n[u][c]||(a=e+(u-l),(o=t+(c-s))>0&&o<i.getWidth()&&a>0&&a<i.getHeight()&&i.setBinaryColor(o,a,!0))}}]),n}(f),T=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).matrix=s(3,3,!0),t.setAttribute("matrix",3),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("matrix");if(1==t.getColorModel()&&null!=n){t.copyColorArray(e);for(var r=0;r<t.getHeight();r++)for(var i=0;i<t.getWidth();i++)this.applyMatrix(i,r,n,t,e)}}},{key:"applyMatrix",value:function(t,e,n,r,i){var o,a,s=Math.floor(n[0].length/2),l=Math.floor(n.length/2);if(!r.getBinaryColor(t,e))for(var u=0;u<n.length;u++)for(var c=0;c<n[0].length;c++)u==l&&c==s||!n[u][c]||(a=e+(u-l),(o=t+(c-s))>=0&&o<i.getWidth()&&a>=0&&a<i.getHeight()&&i.setBinaryColor(o,a,!1))}}]),n}(f),F=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).rules=[],t.EXAMPLE_RULES="0,0,0,0.16,0,0,0.01\n0.85,0.04,-0.04,0.85,0,1.6,0.85\n0.2,-0.26,0.23,0.22,0,1.6,0.07\n-0.15,0.28,0.26,0.24,0,0.44,0.07\n",t.setAttribute("rules",t.EXAMPLE_RULES),t.setAttribute("iterations",1e6),t}return Object(a.a)(n,[{key:"process",value:function(t,e){this.loadRules();var n,r,i,o,a,s,l=this.getAttribute("iterations"),u=999999999,c=999999999,h=-999999999,g=-99999999,f=[0,0];e.clear(4294967295);for(var d=0;d<l;d++)s=this.getRule(),this.applyRule(f,s),(n=f[0])<u&&(u=n),n>h&&(h=n),(r=f[1])<c&&(c=r),r>g&&(g=r);var p=e.getWidth(),b=e.getHeight(),v=Math.abs(h-u),m=Math.abs(g-c);v>m?m*(a=p/v)>b&&(a*=b/(m*a)):v*(a=b/m)>p&&(a*=p/(v*a)),a*=.9,i=Math.floor(p/2-(u+v/2)*a),o=Math.floor(b-(b/2-(c+m/2)*a)),f[0]=0,f[1]=0;for(d=0;d<l;d++)s=this.getRule(),this.applyRule(f,s),n=Math.floor(f[0]*a+i),r=o-Math.floor(f[1]*a),n>=0&&n<p&&r>=0&&r<b&&e.setIntColor(Math.floor(n),Math.floor(r),255,0)}},{key:"loadRules",value:function(){this.rules=[];for(var t=this.getAttribute("rules").split("\n"),e=0;e<t.length;e++)this.addRule(t[e])}},{key:"addRule",value:function(t){var e=(t=t.replace(/ /g,"")).split(",");if(7==e.length){var n={};n.a=parseFloat(e[0]),n.b=parseFloat(e[1]),n.c=parseFloat(e[2]),n.d=parseFloat(e[3]),n.e=parseFloat(e[4]),n.f=parseFloat(e[5]),n.probability=parseFloat(e[6]),this.rules.push(n)}}},{key:"getRule",value:function(){var t,e=Math.random(),n=0;for(t=0;t<this.rules.length;t++)if(e<(n+=this.rules[t].probability))return this.rules[t];return 0!=t?this.rules[t-1]:this.rules[0]}},{key:"applyRule",value:function(t,e){var n=e.a*t[0]+e.b*t[1]+e.e,r=e.c*t[0]+e.d*t[1]+e.f;t[0]=n,t[1]=r}}]),n}(f),L=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",0),t.setAttribute("height",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=this.getAttribute("x"),r=this.getAttribute("y"),i=this.getAttribute("width"),o=this.getAttribute("height");e.setDimension(i,o);for(var a=n;a<n+i;a++)for(var s=r;s<r+o;s++)e.setIntColor(a-n,s-r,t.getIntColor(a,s))}}]),n}(f),H=function(t){Object(r.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).setAttribute("newWidth",0),t.setAttribute("newHeight",0),t}return Object(a.a)(n,[{key:"process",value:function(t,e){var n=t.getWidth(),r=t.getHeight(),i=this.getAttribute("newWidth"),o=this.getAttribute("newHeight");e.getWidth()==i&&e.getHeight()==o||e.setDimension(i,o);for(var a,s,l=Math.floor((n<<16)/i),u=Math.floor((r<<16)/o),c=0;c<o;c++)for(var h=0;h<i;h++)a=Math.floor(h*l>>16),s=Math.floor(c*u>>16),e.setIntColor(h,c,t.getAlphaComponent(a,s),t.getIntColor(a,s))}}]),n}(f),U=function(){function t(){Object(o.a)(this,t),this.hashAttributes=new Object}return Object(a.a)(t,[{key:"set",value:function(t,e){this.hashAttributes[t]=e}},{key:"get",value:function(t,e){var n=this.hashAttributes[t];return null!=n?n:e}},{key:"clone",value:function(){var e=new t;for(var n in this.hashAttributes)e.set(n,this.hashAttributes[n]);return e}}]),t}(),N=function(){function t(e,n){Object(o.a)(this,t),this.x=e,this.y=n}return Object(a.a)(t,[{key:"setX",value:function(t){this.x=t}},{key:"setY",value:function(t){this.y=t}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}}]),t}(),_=new(function(){function t(){Object(o.a)(this,t),this.alphaBoundaryPlugin=new b,this.averageColorPlugin=new v,this.blackAndWhitePlugin=new m,this.boundaryFillPlugin=new D,this.brightnessAndContrastPlugin=new y,this.colorChannelPlugin=new A,this.cropPlugin=new L,this.combineByAlphaPlugin=new I,this.embossPlugin=new x,this.halftoneErrorDiffusionPlugin=new B,this.gaussianBlurPlugin=new p,this.invertColorsPlugin=new w,this.iteratedFunctionSystemPlugin=new F,this.grayScalePlugin=new C,this.mergePhotosPlugin=new S,this.moravecPlugin=new M,this.morphologicalDilationPlugin=new W,this.morphologicalErosionPlugin=new T,this.morphologicalClosingPlugin=new R,this.prewittPlugin=new E,this.scalePlugin=new H,this.sepiaPlugin=new k,this.thresholdingPlugin=new O,this.thresholdingNeighborhoodPlugin=new P}return Object(a.a)(t,[{key:"getValue",value:function(t,e){return null!=t?t:e}},{key:"alphaBoundary",value:function(t,e,n){this.alphaBoundaryPlugin.setAttribute("radius",n),this.alphaBoundaryPlugin.process(t,e)}},{key:"averageColor",value:function(t){var e=new U;return this.averageColorPlugin.process(t,e),e.get("averageColor")}},{key:"blackAndWhite",value:function(t,e,n){this.blackAndWhitePlugin.setAttribute("level",n),this.blackAndWhitePlugin.process(t,e)}},{key:"boundaryFill",value:function(t,e,n,r,i,o){this.boundaryFillPlugin.setAttribute("x",n),this.boundaryFillPlugin.setAttribute("y",r),this.boundaryFillPlugin.setAttribute("color",i),null!=o&&this.boundaryFillPlugin.setAttribute("threshold",o),this.boundaryFillPlugin.process(t,e)}},{key:"brightnessAndContrast",value:function(t,e,n,r){this.brightnessAndContrastPlugin.setAttribute("brightness",n),this.brightnessAndContrastPlugin.setAttribute("contrast",r),this.brightnessAndContrastPlugin.process(t,e)}},{key:"colorChannel",value:function(t,e,n,r,i){this.colorChannelPlugin.setAttribute("red",n),this.colorChannelPlugin.setAttribute("green",r),this.colorChannelPlugin.setAttribute("blue",i),this.colorChannelPlugin.process(t,e)}},{key:"crop",value:function(t,e,n,r,i,o){this.cropPlugin.setAttribute("x",n),this.cropPlugin.setAttribute("y",r),this.cropPlugin.setAttribute("width",i),this.cropPlugin.setAttribute("height",o),this.cropPlugin.process(t,e)}},{key:"combineByAlpha",value:function(t,e,n,r,i){this.combineByAlphaPlugin.setAttribute("imageOther",e),this.combineByAlphaPlugin.setAttribute("x",r),this.combineByAlphaPlugin.setAttribute("y",i),this.combineByAlphaPlugin.process(t,n)}},{key:"emboss",value:function(t,e){this.embossPlugin.process(t,e,h)}},{key:"halftoneErrorDiffusion",value:function(t,e){this.halftoneErrorDiffusionPlugin.process(t,e,h)}},{key:"gaussianBlur",value:function(t,e,n){this.gaussianBlurPlugin.setAttribute("radius",_.getValue(n,3)),this.gaussianBlurPlugin.process(t,e,h)}},{key:"invertColors",value:function(t,e){this.invertColorsPlugin.process(t,e,h)}},{key:"iteratedFunctionSystem",value:function(t,e,n,r){this.iteratedFunctionSystemPlugin.setAttribute("rules",n),this.iteratedFunctionSystemPlugin.setAttribute("iterations",r),this.iteratedFunctionSystemPlugin.process(t,e)}},{key:"grayScale",value:function(t,e){this.grayScalePlugin.process(t,e,h)}},{key:"mergePhotos",value:function(t,e,n){this.mergePhotosPlugin.setAttribute("threshold",n),this.mergePhotosPlugin.process(t,e)}},{key:"moravec",value:function(t,e,n){var r=new U;return this.moravecPlugin.setAttribute("matrixSize",e),this.moravecPlugin.setAttribute("threshold",n),this.moravecPlugin.process(t,r),r.get("cornernessMap")}},{key:"morphologicalDilation",value:function(t,e,n){this.morphologicalDilationPlugin.setAttribute("matrix",n),this.morphologicalDilationPlugin.process(t,e)}},{key:"morphologicalErosion",value:function(t,e,n){this.morphologicalErosionPlugin.setAttribute("matrix",n),this.morphologicalErosionPlugin.process(t,e)}},{key:"morphologicalClosing",value:function(t,e,n){this.morphologicalClosingPlugin.setAttribute("matrix",n),this.morphologicalClosingPlugin.process(t,e)}},{key:"prewitt",value:function(t,e,n){this.prewittPlugin.setAttribute("intensity",_.getValue(n,1)),this.prewittPlugin.process(t,e)}},{key:"scale",value:function(t,e,n,r){if(null==r){var i=t.getHeight()/t.getWidth();r=Math.floor(i*n)}this.scalePlugin.setAttribute("newWidth",n),this.scalePlugin.setAttribute("newHeight",r),this.scalePlugin.process(t,e)}},{key:"sepia",value:function(t,e,n){this.sepiaPlugin.setAttribute("intensity",n),this.sepiaPlugin.process(t,e,h)}},{key:"thresholding",value:function(t,e,n,r){this.thresholdingPlugin.setAttribute("threshold",n),this.thresholdingPlugin.setAttribute("thresholdRange",r),this.thresholdingPlugin.process(t,e,h)}},{key:"thresholdingNeighborhood",value:function(t,e,n,r,i){this.thresholdingNeighborhoodPlugin.setAttribute("thresholdPercentageOfAverage",n),this.thresholdingNeighborhoodPlugin.setAttribute("neighborhoodSide",r),this.thresholdingNeighborhoodPlugin.setAttribute("samplingPixelDistance",i),this.thresholdingNeighborhoodPlugin.process(t,e)}}]),t}())},1101:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=(0,((r=n(59))&&r.__esModule?r:{default:r}).default)("M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z");e.default=i},362:function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(7),a=n(0),s=(n(4),n(5)),l=n(6),u=n(10),c=n(159),h=n(236),g=n(158),f=n(21),d=n(134),p={enter:f.b.enteringScreen,exit:f.b.leavingScreen},b=a.forwardRef((function(t,e){var n=t.BackdropProps,o=t.children,l=t.classes,f=t.className,b=t.disableBackdropClick,v=void 0!==b&&b,m=t.disableEscapeKeyDown,y=void 0!==m&&m,A=t.fullScreen,x=void 0!==A&&A,C=t.fullWidth,w=void 0!==C&&C,k=t.maxWidth,O=void 0===k?"sm":k,P=t.onBackdropClick,I=t.onClose,S=t.onEnter,j=t.onEntered,M=t.onEntering,E=t.onEscapeKeyDown,D=t.onExit,B=t.onExited,R=t.onExiting,W=t.open,T=t.PaperComponent,F=void 0===T?d.a:T,L=t.PaperProps,H=void 0===L?{}:L,U=t.scroll,N=void 0===U?"paper":U,_=t.TransitionComponent,G=void 0===_?g.a:_,Q=t.transitionDuration,V=void 0===Q?p:Q,z=t.TransitionProps,K=t["aria-describedby"],X=t["aria-labelledby"],Y=Object(i.a)(t,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),q=a.useRef();return a.createElement(c.a,Object(r.a)({className:Object(s.a)(l.root,f),BackdropComponent:h.a,BackdropProps:Object(r.a)({transitionDuration:V},n),closeAfterTransition:!0,disableBackdropClick:v,disableEscapeKeyDown:y,onEscapeKeyDown:E,onClose:I,open:W,ref:e},Y),a.createElement(G,Object(r.a)({appear:!0,in:W,timeout:V,onEnter:S,onEntering:M,onEntered:j,onExit:D,onExiting:R,onExited:B,role:"none presentation"},z),a.createElement("div",{className:Object(s.a)(l.container,l["scroll".concat(Object(u.a)(N))]),onMouseUp:function(t){t.target===t.currentTarget&&t.target===q.current&&(q.current=null,P&&P(t),!v&&I&&I(t,"backdropClick"))},onMouseDown:function(t){q.current=t.target}},a.createElement(F,Object(r.a)({elevation:24,role:"dialog","aria-describedby":K,"aria-labelledby":X},H,{className:Object(s.a)(l.paper,l["paperScroll".concat(Object(u.a)(N))],l["paperWidth".concat(Object(u.a)(String(O)))],H.className,x&&l.paperFullScreen,w&&l.paperFullWidth)}),o))))}));e.a=Object(l.a)((function(t){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(t.breakpoints.values.xs,444),"&$paperScrollBody":Object(o.a)({},t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:t.breakpoints.values.sm,"&$paperScrollBody":Object(o.a)({},t.breakpoints.down(t.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:t.breakpoints.values.md,"&$paperScrollBody":Object(o.a)({},t.breakpoints.down(t.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:t.breakpoints.values.lg,"&$paperScrollBody":Object(o.a)({},t.breakpoints.down(t.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:t.breakpoints.values.xl,"&$paperScrollBody":Object(o.a)({},t.breakpoints.down(t.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(b)},367:function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(0),a=(n(4),n(5)),s=n(6),l=o.forwardRef((function(t,e){var n=t.classes,s=t.className,l=t.dividers,u=void 0!==l&&l,c=Object(i.a)(t,["classes","className","dividers"]);return o.createElement("div",Object(r.a)({className:Object(a.a)(n.root,s,u&&n.dividers),ref:e},c))}));e.a=Object(s.a)((function(t){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(t.palette.divider),borderBottom:"1px solid ".concat(t.palette.divider)}}}),{name:"MuiDialogContent"})(l)},449:function(t,e,n){var r;!function(i){"use strict";function o(t,e,n){var r,i=document.createElement("img");function a(e,a){a&&console.log(a),e&&o.isInstanceOf("Blob",e)?(t=e,r=o.createObjectURL(t)):(r=t,n&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin)),i.src=r}return i.onerror=function(a){return o.onerror(i,a,t,r,e,n)},i.onload=function(a){return o.onload(i,a,t,r,e,n)},"string"===typeof t?(o.hasMetaOption(n)?o.fetchBlob(t,a,n):a(),i):o.isInstanceOf("Blob",t)||o.isInstanceOf("File",t)?(r=o.createObjectURL(t))?(i.src=r,i):o.readFile(t,(function(t){var n=t.target;n&&n.result?i.src=n.result:e&&e(t)})):void 0}var a=i.createObjectURL&&i||i.URL&&URL.revokeObjectURL&&URL||i.webkitURL&&webkitURL;function s(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||o.revokeObjectURL(t)}o.hasMetaOption=function(t){return t&&t.meta},o.fetchBlob=function(t,e){e()},o.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},o.transform=function(t,e,n,r,i){n(t,i)},o.onerror=function(t,e,n,r,i,o){s(r,o),i&&i.call(t,e)},o.onload=function(t,e,n,r,i,a){s(r,a),i&&o.transform(t,a,i,n,{originalWidth:t.naturalWidth||t.width,originalHeight:t.naturalHeight||t.height})},o.createObjectURL=function(t){return!!a&&a.createObjectURL(t)},o.revokeObjectURL=function(t){return!!a&&a.revokeObjectURL(t)},o.readFile=function(t,e,n){if(i.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,r[n=n||"readAsDataURL"])return r[n](t),r}return!1},void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}("undefined"!==typeof window&&window||this)},455:function(t,e,n){"use strict";var r=n(2),i=n(0),o=(n(4),n(6)),a=n(89),s=i.forwardRef((function(t,e){return i.createElement(a.a,Object(r.a)({component:"p",variant:"body1",color:"textSecondary",ref:e},t))}));e.a=Object(o.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(s)},510:function(t,e,n){var r=n(72);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},540:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449)],void 0===(o="function"===typeof(r=function(t){var e="undefined"!==typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[],65517:[]}},t.parseMetaData=function(e,n,r,i){i=i||{};var o=this,a=(r=r||{}).maxMetaDataSize||262144;!!("undefined"!==typeof DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice)&&t.readFile(t.blobSlice.call(e,0,a),(function(e){if(e.target.error)return console.log(e.target.error),void n(i);var a,s,l,u,c=e.target.result,h=new DataView(c),g=2,f=h.byteLength-4,d=g;if(65496===h.getUint16(0)){for(;g<f&&((a=h.getUint16(g))>=65504&&a<=65519||65534===a);){if(g+(s=h.getUint16(g+2)+2)>h.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((l=t.metaDataParsers.jpeg[a])&&!r.disableMetaDataParsers)for(u=0;u<l.length;u+=1)l[u].call(o,h,g,s,i,r);d=g+=s}!r.disableImageHead&&d>6&&(c.slice?i.imageHead=c.slice(0,d):i.imageHead=new Uint8Array(c).subarray(0,d))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(i)}),"readAsArrayBuffer")||n(i)},t.replaceHead=function(e,n,r){t.parseMetaData(e,(function(i){r(new Blob([n,t.blobSlice.call(e,i.imageHead.byteLength)],{type:"image/jpeg"}))}),{maxMetaDataSize:256,disableMetaDataParsers:!0})};var n=t.transform;t.transform=function(e,r,i,o,a){t.hasMetaOption(r)?t.parseMetaData(o,(function(a){n.call(t,e,r,i,o,a)}),r,a):n.apply(t,arguments)}})?r.apply(e,i):r)||(t.exports=o)}()},598:function(t,e){t.exports=function(t,e){return"".concat(t,"-").concat(e,"-").concat(Math.random().toString(16).slice(3,8))}},599:function(t,e){var n=this,r=!1;e.logging=r,e.setLogging=function(t){r=t},e.log=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r?console.log.apply(n,e):null}},600:function(t,e,n){var r,i;void 0===(i="function"===typeof(r=function(){function t(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild);for(var r,i=document.createElement("a"),o=1;o<t;o++)i.href=arguments[o],r=i.href,e.href=r;return n.removeChild(e),r}return t})?r.call(e,n,e,t):r)||(t.exports=i)},688:function(t,e,n){var r=n(598),i=0;t.exports=function(t){var e=t.id,n=t.action,o=t.payload,a=void 0===o?{}:o,s=e;return"undefined"===typeof s&&(s=r("Job",i),i+=1),{id:s,action:n,payload:a}}},689:function(t,e,n){var r=n(9),i=n(151),o=n(510),a=n(363),s=n(1010),l=n(1013),u=n(688),c=n(599).log,h=n(598),g=n(1014).defaultOEM,f=n(1015),d=f.defaultOptions,p=f.spawnWorker,b=f.terminateWorker,v=f.onMessage,m=f.loadImage,y=f.send,A=0;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=h("Worker",A),n=s(o(o({},d),t)),f=n.logger,x=n.errorHandler,C=a(n,["logger","errorHandler"]),w={},k={},O=p(C);A+=1;var P=function(t,e){w[t]=e},I=function(t,e){k[t]=e},S=function(t){var n=t.id,r=t.action,i=t.payload;return new Promise((function(t,o){c("[".concat(e,"]: Start ").concat(n,", action=").concat(r)),P(r,t),I(r,o),y(O,{workerId:e,jobId:n,action:r,payload:i})}))},j=function(t){return S(u({id:t,action:"load",payload:{options:C}}))},M=function(t,e,n){return S(u({id:n,action:"FS",payload:{method:"writeFile",args:[t,e]}}))},E=function(t,e){return S(u({id:e,action:"FS",payload:{method:"readFile",args:[t,{encoding:"utf8"}]}}))},D=function(t,e){return S(u({id:e,action:"FS",payload:{method:"unlink",args:[t]}}))},B=function(t,e,n){return S(u({id:n,action:"FS",payload:{method:t,args:e}}))},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",e=arguments.length>1?arguments[1]:void 0;return S(u({id:e,action:"loadLanguage",payload:{langs:t,options:C}}))},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2?arguments[2]:void 0;return S(u({id:n,action:"initialize",payload:{langs:t,oem:e}}))},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return S(u({id:e,action:"setParameters",payload:{params:t}}))},F=function(){var t=i(r.mark((function t(e){var n,i,o=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},i=o.length>2?o[2]:void 0,t.t0=S,t.t1=u,t.t2=i,t.next=7,m(e);case 7:return t.t3=t.sent,t.t4=n,t.t5={image:t.t3,options:t.t4},t.t6={id:t.t2,action:"recognize",payload:t.t5},t.t7=(0,t.t1)(t.t6),t.abrupt("return",(0,t.t0)(t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return S(u({id:n,action:"getPDF",payload:{title:t,textonly:e}}))},H=function(){var t=i(r.mark((function t(e,n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=S,t.t1=u,t.t2=n,t.next=5,m(e);case 5:return t.t3=t.sent,t.t4={image:t.t3},t.t5={id:t.t2,action:"detect",payload:t.t4},t.t6=(0,t.t1)(t.t5),t.abrupt("return",(0,t.t0)(t.t6));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){var t=i(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==O&&(b(O),O=null),t.abrupt("return",Promise.resolve());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return v(O,(function(t){var e=t.workerId,n=t.jobId,r=t.status,i=t.action,a=t.data;if("resolve"===r){c("[".concat(e,"]: Complete ").concat(n));var s=a;"recognize"===i?s=l(a):"getPDF"===i&&(s=Array.from(o(o({},a),{},{length:Object.keys(a).length}))),w[i]({jobId:n,data:s})}else if("reject"===r){if(k[i](a),!x)throw Error(a);x(a)}else"progress"===r&&f(a)})),{id:e,worker:O,setResolve:P,setReject:I,load:j,writeText:M,readText:E,removeFile:D,FS:B,loadLanguage:R,initialize:W,setParameters:T,recognize:F,getPDF:L,detect:H,terminate:U}}},690:function(t,e){t.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},691:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449)],void 0===(o="function"===typeof(r=function(t){var e=t.transform;t.transform=function(n,r,i,o,a){e.call(t,t.scale(n,r,a),r,i,o,a)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var n,r,i,o,a=e.aspectRatio;if(!a)return e;for(r in n={},e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n.crop=!0,(i=t.naturalWidth||t.width)/(o=t.naturalHeight||t.height)>a?(n.maxWidth=o*a,n.maxHeight=o):(n.maxWidth=i,n.maxHeight=i/a),n},t.renderImageToCanvas=function(t,e,n,r,i,o,a,s,l,u,c){var h=t.getContext("2d");return!1===c.imageSmoothingEnabled?h.imageSmoothingEnabled=!1:c.imageSmoothingQuality&&(h.imageSmoothingQuality=c.imageSmoothingQuality),h.drawImage(e,n,r,i,o,a,s,l,u),t},t.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,n,r){n=n||{};var i,o,a,s,l,u,c,h,g,f,d,p=document.createElement("canvas"),b=e.getContext||t.hasCanvasOption(n)&&p.getContext,v=e.naturalWidth||e.width,m=e.naturalHeight||e.height,y=v,A=m;function x(){var t=Math.max((a||y)/y,(s||A)/A);t>1&&(y*=t,A*=t)}function C(){var t=Math.min((i||y)/y,(o||A)/A);t<1&&(y*=t,A*=t)}if(b&&(c=(n=t.getTransformedOptions(e,n,r)).left||0,h=n.top||0,n.sourceWidth?(l=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(c=v-l-n.right)):l=v-c-(n.right||0),n.sourceHeight?(u=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(h=m-u-n.bottom)):u=m-h-(n.bottom||0),y=l,A=u),i=n.maxWidth,o=n.maxHeight,a=n.minWidth,s=n.minHeight,b&&i&&o&&n.crop?(y=i,A=o,(d=l/u-i/o)<0?(u=o*l/i,void 0===n.top&&void 0===n.bottom&&(h=(m-u)/2)):d>0&&(l=i*u/o,void 0===n.left&&void 0===n.right&&(c=(v-l)/2))):((n.contain||n.cover)&&(a=i=i||a,s=o=o||s),n.cover?(C(),x()):(x(),C())),b){if((g=n.pixelRatio)>1&&(p.style.width=y+"px",p.style.height=A+"px",y*=g,A*=g,p.getContext("2d").scale(g,g)),(f=n.downsamplingRatio)>0&&f<1&&y<l&&A<u)for(;l*f>y;)p.width=l*f,p.height=u*f,t.renderImageToCanvas(p,e,c,h,l,u,0,0,p.width,p.height,n),c=0,h=0,l=p.width,u=p.height,(e=document.createElement("canvas")).width=l,e.height=u,t.renderImageToCanvas(e,p,0,0,l,u,0,0,l,u,n);return p.width=y,p.height=A,t.transformCoordinates(p,n),t.renderImageToCanvas(p,e,c,h,l,u,0,0,y,A,n)}return e.width=y,e.height=A,e}})?r.apply(e,i):r)||(t.exports=o)}()},692:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449),n(540)],void 0===(o="function"===typeof(r=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.privateIFDs[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}function n(t,e,n){if(n&&!(e+n>t.byteLength))return new Blob([t.buffer.slice(e,e+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}e.prototype.map={Orientation:274,Thumbnail:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.privateIFDs={34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var r={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}};function i(t,e,n,i,o,a){var s,l,u,c,h,g,f=r[i];if(f){if(!((l=(s=f.size*o)>4?e+t.getUint32(n+8,a):n+8)+s>t.byteLength)){if(1===o)return f.getValue(t,l,a);for(u=[],c=0;c<o;c+=1)u[c]=f.getValue(t,l+c*f.size,a);if(f.ascii){for(h="",c=0;c<u.length&&"\0"!==(g=u[c]);c+=1)h+=g;return h}return u}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function o(t,e,n,r,o,a,s,l){var u,c,h,g,f,d;if(n+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((c=n+2+12*(u=t.getUint16(n,r)))+4>t.byteLength)){for(h=0;h<u;h+=1)g=n+2+12*h,f=t.getUint16(g,r),s&&!s[f]||l&&!0===l[f]||(d=i(t,e,g,t.getUint16(g+2,r),t.getUint32(g+4,r),r),o[f]=d,a&&(a[f]=g));return t.getUint32(c,r)}console.log("Invalid Exif data: Invalid directory size.")}}function a(t,n,r,i,a,s,l){var u=t.exif[n];u&&(t.exif[n]=new e(n),t.exifOffsets&&(t.exifOffsets[n]=new e(n)),o(r,i,i+u,a,t.exif[n],t.exifOffsets&&t.exifOffsets[n],s&&s[n],l&&l[n]))}r[7]=r[1],t.parseExifData=function(t,r,i,s,l){if(!l.disableExif){var u,c,h=l.includeExifTags,g=l.excludeExifTags||{34665:{37500:!0}},f=r+10;if(1165519206===t.getUint32(r+4))if(f+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(r+8)){switch(t.getUint16(f)){case 18761:u=!0;break;case 19789:u=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(f+2,u)?(c=t.getUint32(f+4,u),s.exif=new e,l.disableExifOffsets||(s.exifOffsets=new e,s.exifTiffOffset=f,s.exifLittleEndian=u),(c=o(t,f,f+c,u,s.exif,s.exifOffsets,h,g))&&!l.disableExifThumbnail&&(c=o(t,f,f+c,u,s.exif,s.exifOffsets,h,g),s.exif[513]&&s.exif[514]&&(s.exif[513]=n(t,f+s.exif[513],s.exif[514]))),Object.keys(s.exif.privateIFDs).forEach((function(e){a(s,e,t,f,u,h,g)}))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,n){return new DataView(t,e.exifOffsets[274]+8,2).setUint16(0,n,e.exifLittleEndian),t}},t.writeExifData=function(e,n,r,i){t.exifWriters[n.exif.map[r]](e,n,i)},t.ExifMap=e})?r.apply(e,i):r)||(t.exports=o)}()},693:function(t,e,n){var r,i,o;!function(a){"use strict";i=[n(449),n(540)],void 0===(o="function"===typeof(r=function(t){function e(){}function n(t,e,n){for(var r="",i=e+n,o=e;o<i;o+=1)r+=String.fromCharCode(t.getUint8(o));return r}function r(t,e,r,i,o){return"binary"===e.types[t]?new Blob([r.buffer.slice(i,i+o)]):"Uint16"===e.types[t]?r.getUint16(i):n(r,i,o)}function i(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function o(t,e,n,o,a,s){for(var l,u,c,h=e+n,g=e;g<h;)28===t.getUint8(g)&&2===t.getUint8(g+1)&&(c=t.getUint8(g+2),a&&!a[c]||s&&s[c]||(u=t.getInt16(g+3),l=r(c,o.iptc,t,g+5,u),o.iptc[c]=i(o.iptc[c],l),o.iptcOffsets&&(o.iptcOffsets[c]=g))),g+=1}function a(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function s(t,e){var n=t.getUint8(e+7);return n%2!==0&&(n+=1),0===n&&(n=4),n}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,n,r,i,l){if(!l.disableIptc)for(var u=n+r;n+8<u;){if(a(t,n)){var c=s(t,n),h=n+8+c;if(h>u){console.log("Invalid IPTC data: Invalid segment offset.");break}var g=t.getUint16(n+6+c);if(n+g>u){console.log("Invalid IPTC data: Invalid segment size.");break}return i.iptc=new e,l.disableIptcOffsets||(i.iptcOffsets=new e),void o(t,h,g,i,l.includeIptcTags,l.excludeIptcTags||{202:!0})}n+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e})?r.apply(e,i):r)||(t.exports=o)}()}}]);