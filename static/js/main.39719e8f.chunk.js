/*! For license information please see main.39719e8f.chunk.js.LICENSE.txt */
(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[14],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(105);function c(){return{decodedToken:Object(a.a)(localStorage.getItem("authToken")||"").decodedToken,isExpired:Object(a.a)(localStorage.getItem("authToken")||"").isExpired,set token(e){localStorage.setItem("authToken",e)},get token(){return localStorage.getItem("authToken")||""},set user(e){localStorage.setItem("userData",JSON.stringify(e))},get user(){return JSON.parse(localStorage.getItem("userData")||"null")},set usermeta(e){localStorage.setItem("userMetaDatum",JSON.stringify(e))},get usermeta(){return JSON.parse(localStorage.getItem("userMetaDatum")||"null")}}}},167:function(e,t,n){},207:function(e,t){!function(e,t,n){function a(e,t){return typeof e===t}function c(e){var t=d.className,n=l._config.classPrefix||"";if(b&&(t=t.baseVal),l._config.enableJSClass){var a=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(a,"$1"+n+"js$2")}l._config.enableClasses&&(t+=" "+n+e.join(" "+n),b?d.className.baseVal=t:d.className=t)}function i(e,t){if("object"==typeof e)for(var n in e)u(e,n)&&i(n,e[n]);else{var a=(e=e.toLowerCase()).split("."),r=l[a[0]];if(2==a.length&&(r=r[a[1]]),"undefined"!=typeof r)return l;t="function"==typeof t?t():t,1==a.length?l[a[0]]=t:(!l[a[0]]||l[a[0]]instanceof Boolean||(l[a[0]]=new Boolean(l[a[0]])),l[a[0]][a[1]]=t),c([(t&&0!=t?"":"no-")+a.join("-")]),l._trigger(e,t)}return l}var r=[],o=[],s={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},l=function(){};l.prototype=s,l=new l;var u,d=t.documentElement,b="svg"===d.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;u=a(e,"undefined")||a(e.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),s._l={},s.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),l.hasOwnProperty(e)&&setTimeout((function(){l._trigger(e,l[e])}),0)},s._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},l._q.push((function(){s.addTest=i})),l.addAsyncTest((function(){var e=new Image;e.onerror=function(){i("webplossless",!1)},e.onload=function(){i("webplossless",1==e.width)},e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="})),l.addAsyncTest((function(){function e(e,t,n){function a(t){var a=!(!t||"load"!==t.type)&&1==c.width;i(e,"webp"===e&&a?new Boolean(a):a),n&&n(t)}var c=new Image;c.onerror=a,c.onload=a,c.src=t}var t=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],n=t.shift();e(n.name,n.uri,(function(n){if(n&&"load"===n.type)for(var a=0;a<t.length;a++)e(t[a].name,t[a].uri)}))})),l.addAsyncTest((function(){var e=new Image;e.onerror=function(){i("webpalpha",!1)},e.onload=function(){i("webpalpha",1==e.width)},e.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="})),function(){var e,t,n,c,i,s;for(var u in o)if(o.hasOwnProperty(u)){if(e=[],(t=o[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(c=a(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(s=e[i].split(".")).length?l[s[0]]=c:(!l[s[0]]||l[s[0]]instanceof Boolean||(l[s[0]]=new Boolean(l[s[0]])),l[s[0]][s[1]]=c),r.push((c?"":"no-")+s.join("-"))}}(),c(r),delete s.addTest,delete s.addAsyncTest;for(var j=0;j<l._q.length;j++)l._q[j]();e.Modernizr=l}(window,document)},208:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n.n(a),i=n(25),r=n(0),o=n.n(r),s=n(12),l=n.n(s),u=n(138),d=n.n(u),b=n(31),j=n(8),h=n(7),m=n(24),p=(n(167),n(234)),f=n(214),O=n(257),x=n(258),g=n(259),v=n(260),A=n(235),w=n(89),k=n(282),y=n(215),S=n(285),_=n(286),C=n(287),I=n(288),P=n(256),N=n(300),M=n(241),B=n(294),T=n(301),z=n(295),D=n(296),E=n(237),U=n(137),R=n(135),W=n(261),L=n(263),J=n(264),Q=n(265),V=n(266),F=n(269),G=n(271),q=n(272),K=n(273),X=n(274),Y=n(275),$=n(277),H=n(278),Z=n(279),ee=n(280),te=n(281),ne=n(283),ae=n(284),ce=n(289),ie=n(290),re=n(291),oe=n(292),se=n(298),le=n(297),ue=n(299),de=n(262),be=n.n(de),je=n(267),he=n.n(je),me=n(268),pe=n.n(me),fe=n(270),Oe=n.n(fe),xe=n(276),ge=n.n(xe),ve=n(213),Ae=n(17),we=n(41),ke=n(37),ye=n(254),Se=n(255),_e=n(1),Ce=Object(p.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}})),Ie=function(e){var t=e.children,n=e.window,a=Ce(),c=Object(ye.a)({target:n?n():void 0,disableHysteresis:!0,threshold:100});return Object(_e.jsx)(Se.a,{in:c,children:Object(_e.jsx)("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:a.root,children:t})})},Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e){if("serviceWorker"in navigator&&"sekai.best"===window.location.hostname){if(new URL("/pr-342",window.location.href).origin!==window.location.origin)return;var t="".concat("/pr-342","/service-worker.js");Pe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Me(t,e)}else"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}function Me(e,t){navigator.serviceWorker.register(e).then((function(e){if(e.waiting){var n=e.waiting;"installed"!==n.state?n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}:t&&t.onUpdate&&t.onUpdate(e)}e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Be=n(84),Te=function(e){var t=e.message,n=e.action,a=e.ButtonProps,c=e.SnackbarProps,i=e.customParameters;return Object(_e.jsx)(U.a,Object(m.a)(Object(m.a)({autoHideDuration:3e3},c),{},{children:Object(_e.jsx)(ue.a,{severity:null===i||void 0===i?void 0:i.type,action:null!=n&&Object(_e.jsx)(R.a,Object(m.a)(Object(m.a)({color:"inherit",size:"small"},a),{},{children:n})),children:t})}))},ze=240,De=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(11),n.e(52),n.e(4),n.e(43)]).then(n.bind(null,1104))})),Ee=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(22)]).then(n.bind(null,1106))})),Ue=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(11),n.e(4),n.e(34)]).then(n.bind(null,1111))})),Re=Object(r.lazy)((function(){return Promise.all([n.e(41),n.e(62)]).then(n.bind(null,1117))})),We=Object(r.lazy)((function(){return Promise.all([n.e(42),n.e(61)]).then(n.bind(null,1118))})),Le=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(24)]).then(n.bind(null,1064))})),Je=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(20)]).then(n.bind(null,1065))})),Qe=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(18)]).then(n.bind(null,1107))})),Ve=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(19)]).then(n.bind(null,1066))})),Fe=Object(r.lazy)((function(){return Promise.all([n.e(13),n.e(44)]).then(n.bind(null,1119))})),Ge=Object(r.lazy)((function(){return Promise.all([n.e(13),n.e(49),n.e(4),n.e(7),n.e(60)]).then(n.bind(null,1068))})),qe=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(79)]).then(n.bind(null,1069))})),Ke=Object(r.lazy)((function(){return Promise.all([n.e(38),n.e(4),n.e(63)]).then(n.bind(null,1120))})),Xe=Object(r.lazy)((function(){return Promise.all([n.e(37),n.e(4),n.e(67)]).then(n.bind(null,1070))})),Ye=Object(r.lazy)((function(){return n.e(59).then(n.bind(null,1071))})),$e=Object(r.lazy)((function(){return Promise.all([n.e(40),n.e(5),n.e(76)]).then(n.bind(null,1072))})),He=Object(r.lazy)((function(){return Promise.all([n.e(36),n.e(5),n.e(75)]).then(n.bind(null,1073))})),Ze=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(29)]).then(n.bind(null,1077))})),et=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(28)]).then(n.bind(null,1078))})),tt=Object(r.lazy)((function(){return Promise.all([n.e(30),n.e(4),n.e(64)]).then(n.bind(null,1112))})),nt=Object(r.lazy)((function(){return Promise.all([n.e(47),n.e(4),n.e(54)]).then(n.bind(null,1121))})),at=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(27)]).then(n.bind(null,1122))})),ct=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(26)]).then(n.bind(null,1123))})),it=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(66),n.e(68)]).then(n.bind(null,1124))})),rt=Object(r.lazy)((function(){return n.e(80).then(n.bind(null,1079))})),ot=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(73)]).then(n.bind(null,1080))})),st=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(8),n.e(16),n.e(45)]).then(n.bind(null,1103))})),lt=Object(r.lazy)((function(){return Promise.all([n.e(5),n.e(53)]).then(n.bind(null,1125))})),ut=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(10),n.e(5),n.e(35)]).then(n.bind(null,1083))})),dt=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(8),n.e(32),n.e(70)]).then(n.bind(null,1084))})),bt=Object(r.lazy)((function(){return Promise.all([n.e(31),n.e(56)]).then(n.bind(null,1090))})),jt=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(21)]).then(n.bind(null,1108))})),ht=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(33)]).then(n.bind(null,1113))})),mt=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(10),n.e(5),n.e(72)]).then(n.bind(null,1126))})),pt=Object(r.lazy)((function(){return Promise.all([n.e(39),n.e(4),n.e(55)]).then(n.bind(null,1114))})),ft=Object(r.lazy)((function(){return n.e(50).then(n.bind(null,1091))})),Ot=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(48)]).then(n.bind(null,1092))})),xt=Object(p.a)((function(e){return{toolbar:Object(m.a)(Object(m.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",padding:e.spacing(0,3)}),root:{display:"flex"},drawer:Object(h.a)({},e.breakpoints.up("md"),{width:ze,flexShrink:0}),appBar:Object(h.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(ze,"px)"),marginLeft:ze}),menuButton:Object(h.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),title:{flexGrow:1},drawerPaper:{width:ze},content:Object(h.a)({flexGrow:1,padding:e.spacing(3)},e.breakpoints.up("md"),{width:"calc(100% - ".concat(ze,"px)")}),listItem:{"padding-top":"0px","padding-bottom":"0px"},listItemInner:Object(h.a)({"padding-top":"4px","padding-bottom":"4px"},e.breakpoints.down("md"),{"padding-top":"12px","padding-bottom":"12px"})}}));function gt(e){var t=e.icon,n=e.text,a=e.to,c=e.theme,i=Object(r.useContext)(ke.c).user,o=Object(Ae.j)({path:a,exact:"/"===a}),s=xt();return!e.visibleRoles||i&&e.visibleRoles.includes(i.role.name)?Object(_e.jsx)("li",{style:{width:"100%"},children:Object(_e.jsxs)(f.a,{component:we.b,classes:{root:s.listItemInner},to:a,children:[Object(_e.jsx)(O.a,{style:{color:o?c.palette.secondary.main:c.palette.text.primary},children:t}),Object(_e.jsx)(x.a,{primary:n,style:{color:o?c.palette.secondary.main:c.palette.text.primary}})]})}):Object(_e.jsx)(r.Fragment,{})}function vt(e){var t=e.item,n=e.theme,a=Object(r.useContext)(ke.c).user,c=Object(Ae.j)({path:t.to,exact:"/"===t.to}),i=xt(),o=Object(r.useState)(Boolean(c)),s=Object(j.a)(o,2),l=s[0],u=s[1];return!t.visibleRoles||a&&t.visibleRoles.includes(a.role.name)?Object(_e.jsxs)(r.Fragment,{children:[Object(_e.jsx)(f.a,{disabled:t.disabled,button:!0,classes:{root:i.listItem},onClick:function(){return u((function(e){return!e}))},children:Object(_e.jsxs)(f.a,{classes:{root:i.listItemInner},children:[Object(_e.jsx)(O.a,{style:{color:c?n.palette.secondary.main:n.palette.text.primary},children:t.icon}),Object(_e.jsx)(x.a,{primary:t.text,style:{color:c?n.palette.secondary.main:n.palette.text.primary}})]})},t.to),Object(_e.jsx)(g.a,{in:l,timeout:"auto",unmountOnExit:!0,children:t.children.map((function(e){return Object(_e.jsx)(f.a,{disabled:e.disabled,button:!0,classes:{root:i.listItem},children:e.children?Object(_e.jsx)(vt,{item:e,theme:n}):Object(_e.jsx)(gt,{to:e.to,text:e.text,icon:e.icon,disabled:e.disabled,theme:n})},e.to)}))})]}):Object(_e.jsx)(r.Fragment,{})}var At=function(){var e=Object(ve.a)().t,t=Object(r.useContext)(ke.a).displayMode,n=Object(Ae.g)(),a=Object(Ae.g)().goBack,c=Object(v.a)("(prefers-color-scheme: dark)"),i=o.a.useMemo((function(){return[[{text:e("common:home"),icon:Object(_e.jsx)(W.a,{}),to:"/",disabled:!1},{text:e("common:announcement"),icon:Object(_e.jsx)(be.a,{}),to:"/announcement",disabled:!1},{text:e("common:translation"),icon:Object(_e.jsx)(L.a,{}),to:"/translation",disabled:!1,visibleRoles:["Translator","Admin"]}],[{text:e("common:card"),icon:Object(_e.jsx)(J.a,{}),to:"/card",disabled:!1},{text:e("common:music"),icon:Object(_e.jsx)(Q.a,{}),to:"/music",disabled:!1},{text:e("common:gacha"),icon:Object(_e.jsx)(V.a,{}),to:"/gacha",disabled:!1},{text:e("common:event"),icon:Object(_e.jsx)(he.a,{}),to:"/event",disabled:!1},{text:e("common:stamp"),icon:Object(_e.jsx)(pe.a,{}),to:"/stamp",disabled:!1},{text:e("common:comic"),icon:Object(_e.jsx)(F.a,{}),to:"/comic",disabled:!1},{text:e("common:character"),icon:Object(_e.jsx)(Oe.a,{}),to:"/chara",disabled:!1},{text:e("common:mission.main"),icon:Object(_e.jsx)(G.a,{}),to:"/mission",disabled:!1,children:[{text:e("common:mission.honor"),to:"/mission/title",disabled:!1},{text:e("common:mission.livepass"),to:"/mission/livepass",disabled:!0},{text:e("common:character"),to:"/mission/character",disabled:!1},{text:e("common:mission.normal"),to:"/mission/normal",disabled:!1},{text:e("common:mission.beginner"),to:"/mission/beginner",disabled:!1}]},{text:e("honor:page_title"),icon:Object(_e.jsx)(q.a,{}),to:"/honor",disabled:!1},{text:"Live2D",icon:Object(_e.jsx)(K.a,{}),to:"/l2d",disabled:!1},{text:e("common:virtualLive"),icon:Object(_e.jsx)(X.a,{}),to:"/virtual_live",disabled:!1}],[{text:e("common:musicMeta"),icon:Object(_e.jsx)(Y.a,{}),to:"/music_meta",disabled:!1},{text:e("common:musicRecommend"),icon:Object(_e.jsx)(ge.a,{}),to:"/music_recommend",disabled:!1},{text:e("common:eventCalc"),icon:Object(_e.jsx)(ge.a,{}),to:"/event_calc",disabled:!1},{text:e("common:storyReader"),icon:Object(_e.jsx)($.a,{}),to:"/storyreader",disabled:!1,children:[{text:e("common:text"),to:"/storyreader",disabled:!1},{text:"Live2D",to:"/storyreader-live2d",disabled:!0}]},{text:e("common:eventTracker"),icon:Object(_e.jsx)(H.a,{}),to:"/eventtracker",disabled:!1},{text:e("common:eventAnalyzer"),icon:Object(_e.jsx)(H.a,{}),to:"/eventanalyzer",disabled:!0}],[{text:e("common:settings.title"),icon:Object(_e.jsx)(Z.a,{}),to:"/settings",disabled:!1},{text:e("common:support"),icon:Object(_e.jsx)(ee.a,{}),to:"/support",disabled:!1},{text:e("common:about"),icon:Object(_e.jsx)(te.a,{}),to:"/about",disabled:!1}]]}),[e]),s=xt(),l=Object(r.useState)(!1),u=Object(j.a)(l,2),d=u[0],h=u[1],p=Object(r.useState)(i.map((function(){return!0}))),O=Object(j.a)(p,2),x=O[0],de=O[1],je=Object(r.useState)(!1),me=Object(j.a)(je,2),fe=me[0],xe=me[1],ye=Object(r.useState)(null),Se=Object(j.a)(ye,2),Ce=Se[0],Pe=Se[1],Me=Object(r.useState)(!1),ze=Object(j.a)(Me,2),At=ze[0],wt=ze[1],kt=Object(r.useState)(null),yt=Object(j.a)(kt,2),St=yt[0],_t=yt[1],Ct=o.a.useMemo((function(){return Object(A.a)({palette:{type:"auto"===t?c?"dark":"light":t,primary:{main:"auto"===t?c?"#7986cb":"#3f51b5":"dark"===t?"#7986cb":"#3f51b5"}}})}),[t,c]),It=function(){h(!d)},Pt=Object(r.useMemo)((function(){return Object(_e.jsx)(ke.d,{children:Object(_e.jsxs)("div",{children:[Object(_e.jsx)("div",{className:s.toolbar,children:Object(_e.jsx)(w.a,{variant:"h6",children:e("common:toolbar.title")})}),Object(_e.jsx)(k.a,{}),Object(_e.jsxs)(y.a,{children:[Object(_e.jsxs)(f.a,{button:!0,onClick:function(){return de((function(e){return[!e[0]].concat(Object(b.a)(e.slice(1)))}))},children:[Object(_e.jsx)(w.a,{color:"textSecondary",children:e("common:community")}),x[0]?Object(_e.jsx)(ne.a,{}):Object(_e.jsx)(ae.a,{})]}),Object(_e.jsx)(g.a,{in:x[0],timeout:"auto",unmountOnExit:!0,children:i[0].map((function(e){return e.children?Object(_e.jsx)(vt,{item:e,theme:Ct},e.to):Object(_e.jsx)(f.a,{disabled:e.disabled,button:!0,classes:{root:s.listItem},children:Object(_e.jsx)(gt,Object(m.a)(Object(m.a)({},e),{},{theme:Ct}))},e.to)}))}),Object(_e.jsxs)(f.a,{button:!0,onClick:function(){return de((function(e){return[e[0],!e[1]].concat(Object(b.a)(e.slice(2)))}))},children:[Object(_e.jsx)(w.a,{color:"textSecondary",children:e("common:information")}),x[1]?Object(_e.jsx)(ne.a,{}):Object(_e.jsx)(ae.a,{})]}),Object(_e.jsx)(g.a,{in:x[1],timeout:"auto",unmountOnExit:!0,children:i[1].map((function(e){return e.children?Object(_e.jsx)(vt,{item:e,theme:Ct},e.to):Object(_e.jsx)(f.a,{disabled:e.disabled,button:!0,classes:{root:s.listItem},children:Object(_e.jsx)(gt,{to:e.to,text:e.text,icon:e.icon,disabled:e.disabled,theme:Ct})},e.to)}))}),Object(_e.jsxs)(f.a,{button:!0,onClick:function(){return de((function(e){return[e[0],e[1],!e[2]].concat(Object(b.a)(e.slice(3)))}))},children:[Object(_e.jsx)(w.a,{color:"textSecondary",children:e("common:tools")}),x[2]?Object(_e.jsx)(ne.a,{}):Object(_e.jsx)(ae.a,{})]}),Object(_e.jsx)(g.a,{in:x[2],timeout:"auto",unmountOnExit:!0,children:i[2].map((function(e){return e.children?Object(_e.jsx)(vt,{item:e,theme:Ct},e.to):Object(_e.jsx)(f.a,{disabled:e.disabled,button:!0,classes:{root:s.listItem},children:Object(_e.jsx)(gt,{to:e.to,text:e.text,icon:e.icon,disabled:e.disabled,theme:Ct})},e.to)}))}),Object(_e.jsxs)(f.a,{button:!0,onClick:function(){return de((function(e){return[].concat(Object(b.a)(e.slice(0,3)),[!e[3]],Object(b.a)(e.slice(4)))}))},children:[Object(_e.jsx)(w.a,{color:"textSecondary",children:e("common:about")}),x[3]?Object(_e.jsx)(ne.a,{}):Object(_e.jsx)(ae.a,{})]}),Object(_e.jsx)(g.a,{in:x[3],timeout:"auto",unmountOnExit:!0,children:i[3].map((function(e){return e.children?Object(_e.jsx)(vt,{item:e,theme:Ct},e.to):Object(_e.jsx)(f.a,{disabled:e.disabled,button:!0,classes:{root:s.listItem},children:Object(_e.jsx)(gt,{to:e.to,text:e.text,icon:e.icon,disabled:e.disabled,theme:Ct})},e.to)}))})]})]})})}),[s.listItem,s.toolbar,i,x,e,Ct]),Nt=void 0!==window?function(){return window.document.body}:void 0,Mt=Object(r.useCallback)((function(e){wt(!0),_t(e.waiting)}),[]);Object(r.useEffect)((function(){Ne({onUpdate:Mt})}),[Mt]);var Bt=Object(r.useCallback)((function(){St&&(St.onstatechange=function(){"activated"===St.state&&window.location.reload()},St.postMessage({type:"SKIP_WAITING"})),wt(!1)}),[St]);return Object(_e.jsx)(S.a,{theme:Ct,children:Object(_e.jsxs)(Be.SnackbarProvider,{SnackbarComponent:Te,children:[Object(_e.jsxs)("div",{className:s.root,children:[Object(_e.jsx)(_.a,{}),Object(_e.jsx)(C.a,{position:"fixed",className:s.appBar,children:Object(_e.jsxs)(I.a,{children:[Object(_e.jsx)(P.a,{color:"inherit",edge:"start",onClick:It,className:s.menuButton,children:Object(_e.jsx)(ce.a,{})}),Object(_e.jsxs)(w.a,{variant:"h6",noWrap:!0,classes:{root:s.title},children:["Sekai Viewer ",Object(_e.jsx)("small",{children:"0.8.0"})]}),Object(_e.jsx)(P.a,{color:"inherit",onClick:function(){return a()},disableRipple:!0,style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(ie.a,{fontSize:"inherit"})}),Object(_e.jsxs)(N.a,{smDown:!0,implementation:"css",children:[Object(_e.jsx)(we.b,{to:"/settings",style:{color:Ct.palette.common.white},children:Object(_e.jsx)(P.a,{color:"inherit",style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(Z.a,{fontSize:"inherit"})})}),Object(_e.jsx)(we.b,{to:"/user",style:{color:Ct.palette.common.white},children:Object(_e.jsx)(P.a,{color:"inherit",style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(re.a,{fontSize:"inherit"})})})]}),Object(_e.jsx)(N.a,{mdUp:!0,implementation:"css",children:Object(_e.jsx)(P.a,{onClick:function(e){xe(!0),Pe(e.currentTarget)},color:"inherit",children:Object(_e.jsx)(oe.a,{})})})]})}),Object(_e.jsxs)(M.a,{anchorEl:Ce,keepMounted:!0,open:fe,onClose:function(){xe(!1),Pe(null)},children:[Object(_e.jsxs)(B.a,{onClick:function(){n.push("/settings"),xe(!1),Pe(null)},children:[Object(_e.jsx)(P.a,{color:"inherit",size:"medium",children:Object(_e.jsx)(Z.a,{fontSize:"inherit"})}),Object(_e.jsx)(w.a,{children:e("common:settings.title")})]}),Object(_e.jsxs)(B.a,{onClick:function(){n.push("/user"),xe(!1),Pe(null)},children:[Object(_e.jsx)(P.a,{color:"inherit",size:"medium",children:Object(_e.jsx)(re.a,{fontSize:"inherit"})}),Object(_e.jsx)(w.a,{children:e("common:user")})]})]}),Object(_e.jsxs)("nav",{className:s.drawer,children:[Object(_e.jsx)(N.a,{mdUp:!0,implementation:"css",children:Object(_e.jsx)(T.a,{container:Nt,variant:"temporary",anchor:"rtl"===Ct.direction?"right":"left",open:d,onClose:It,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0},children:Pt})}),Object(_e.jsx)(N.a,{smDown:!0,implementation:"css",children:Object(_e.jsx)(T.a,{variant:"permanent",open:!0,classes:{paper:s.drawerPaper},children:Pt})})]}),Object(_e.jsxs)(z.a,{className:s.content,children:[Object(_e.jsx)("div",{className:s.toolbar,id:"back-to-top-anchor"}),Object(_e.jsx)(ke.d,{children:Object(_e.jsx)(Ae.d,{children:Object(_e.jsxs)(r.Suspense,{fallback:Object(_e.jsxs)(D.a,{container:!0,direction:"column",spacing:3,children:[Object(_e.jsx)(D.a,{item:!0,children:Object(_e.jsx)(le.a,{variant:"rect",width:"30%",height:30})}),Object(_e.jsx)(D.a,{item:!0,children:Object(_e.jsx)(le.a,{variant:"rect",width:"90%",height:200})}),Object(_e.jsx)(D.a,{item:!0,children:Object(_e.jsx)(le.a,{variant:"rect",width:"90%",height:200})})]}),children:[Object(_e.jsx)(Ae.b,{path:"/",exact:!0,children:Object(_e.jsx)(Ee,{})}),Object(_e.jsx)(Ae.b,{path:"/card",exact:!0,children:Object(_e.jsx)(De,{})}),Object(_e.jsx)(Ae.b,{path:"/card/:cardId(\\d+)",children:Object(_e.jsx)(Je,{})}),Object(_e.jsx)(Ae.b,{path:"/music",exact:!0,children:Object(_e.jsx)(Ue,{})}),Object(_e.jsx)(Ae.b,{path:"/music/:musicId(\\d+)",children:Object(_e.jsx)(Qe,{})}),Object(_e.jsx)(Ae.b,{path:"/gacha",exact:!0,children:Object(_e.jsx)(Re,{})}),Object(_e.jsx)(Ae.b,{path:"/gacha/:gachaId",children:Object(_e.jsx)(Le,{})}),Object(_e.jsx)(Ae.b,{path:"/event",exact:!0,children:Object(_e.jsx)(We,{})}),Object(_e.jsx)(Ae.b,{path:"/event/:eventId",children:Object(_e.jsx)(Ve,{})}),Object(_e.jsx)(Ae.b,{path:"/stamp",children:Object(_e.jsx)(Ke,{})}),Object(_e.jsx)(Ae.b,{path:"/comic",children:Object(_e.jsx)(Fe,{})}),Object(_e.jsx)(Ae.b,{path:"/chara",exact:!0,children:Object(_e.jsx)(qe,{})}),Object(_e.jsx)(Ae.b,{path:"/chara/:charaId",children:Object(_e.jsx)(Ge,{})}),Object(_e.jsx)(Ae.b,{path:"/unit/:unitId",children:Object(_e.jsx)(Xe,{})}),Object(_e.jsx)(Ae.b,{path:"/about",exact:!0,children:Object(_e.jsx)(Ye,{})}),Object(_e.jsx)(Ae.b,{path:"/support",exact:!0,children:Object(_e.jsx)($e,{})}),Object(_e.jsx)(Ae.b,{path:"/music_recommend",exact:!0,children:Object(_e.jsx)(Ze,{})}),Object(_e.jsx)(Ae.b,{path:"/event_calc",exact:!0,children:Object(_e.jsx)(et,{})}),Object(_e.jsx)(Ae.b,{path:"/storyreader",children:Object(_e.jsx)(tt,{})}),Object(_e.jsx)(Ae.b,{path:"/mission/title",children:Object(_e.jsx)(nt,{})}),Object(_e.jsx)(Ae.b,{path:"/mission/normal",children:Object(_e.jsx)(at,{})}),Object(_e.jsx)(Ae.b,{path:"/mission/beginner",children:Object(_e.jsx)(ct,{})}),Object(_e.jsx)(Ae.b,{path:"/mission/character",children:Object(_e.jsx)(it,{})}),Object(_e.jsx)(Ae.b,{path:"/user",children:Object(_e.jsx)(rt,{})}),Object(_e.jsx)(Ae.b,{path:"/connect/:provider/redirect",children:Object(_e.jsx)(ot,{})}),Object(_e.jsx)(Ae.b,{path:"/eventtracker",children:Object(_e.jsx)(st,{})}),Object(_e.jsx)(Ae.b,{path:"/announcement",exact:!0,children:Object(_e.jsx)(lt,{})}),Object(_e.jsx)(Ae.b,{path:"/announcement/:id",children:Object(_e.jsx)(ut,{})}),Object(_e.jsx)(Ae.b,{path:"/l2d",children:Object(_e.jsx)(dt,{})}),Object(_e.jsx)(Ae.b,{path:"/virtual_live",exact:!0,children:Object(_e.jsx)(bt,{})}),Object(_e.jsx)(Ae.b,{path:"/virtual_live/:id",children:Object(_e.jsx)(jt,{})}),Object(_e.jsx)(Ae.b,{path:"/translation",exact:!0,children:Object(_e.jsx)(ht,{})}),Object(_e.jsx)(Ae.b,{path:"/translation/:slug",children:Object(_e.jsx)(mt,{})}),Object(_e.jsx)(Ae.b,{path:"/honor",children:Object(_e.jsx)(pt,{})}),Object(_e.jsx)(Ae.b,{path:"/eventanalyzer",children:Object(_e.jsx)(ft,{})}),Object(_e.jsx)(Ae.b,{path:"/music_meta",children:Object(_e.jsx)(Ot,{})}),Object(_e.jsx)(Ae.b,{path:"/settings",children:Object(_e.jsx)(He,{})})]})})})]}),Object(_e.jsx)(Ie,{children:Object(_e.jsx)(E.a,{color:"secondary",size:"small","aria-label":"scroll back to top",children:Object(_e.jsx)(se.a,{})})})]}),Object(_e.jsx)(U.a,{open:At,children:Object(_e.jsx)(ue.a,{severity:"info",action:Object(_e.jsx)(R.a,{color:"inherit",size:"small",onClick:function(){return Bt()},children:e("common:update")}),children:e("common:update-available")})})]})})},wt=(n(207),n(49)),kt=(n(208),n(46)),yt=n.n(kt),St=n(57),_t=n.n(St),Ct=n(75),It=240,Pt=Object(p.a)((function(e){return{toolbar:Object(m.a)(Object(m.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",padding:e.spacing(0,3)}),root:{display:"flex"},drawer:Object(h.a)({},e.breakpoints.up("md"),{width:It,flexShrink:0}),appBar:Object(h.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(It,"px)"),marginLeft:It}),menuButton:Object(h.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),title:{flexGrow:1},drawerPaper:{width:It},content:Object(h.a)({flexGrow:1,padding:e.spacing(3)},e.breakpoints.up("md"),{width:"calc(100% - ".concat(It,"px)")})}})),Nt=function(e){var t=Pt(),n=Object(v.a)("(prefers-color-scheme: dark)"),a=Object(r.useMemo)((function(){return Object(Ct.a)({palette:{type:n?"dark":"light",primary:{main:n?"#7986cb":"#3f51b5"}}})}),[n]),c=Object(r.useMemo)((function(){return Object(_e.jsxs)("div",{children:[Object(_e.jsx)("div",{className:t.toolbar,children:Object(_e.jsx)(le.a,{variant:"text",width:"100%"})}),Object(_e.jsx)(k.a,{}),Object(_e.jsx)(y.a,{children:Array.from({length:20}).map((function(e,t){return Object(_e.jsxs)(f.a,{children:[Object(_e.jsx)(O.a,{children:Object(_e.jsx)(le.a,{variant:"circle",width:24,height:24})}),Object(_e.jsx)(x.a,{children:Object(_e.jsx)(le.a,{variant:"rect",width:"100%",height:24})})]},t)}))})]})}),[t.toolbar]),i=void 0!==window?function(){return window.document.body}:void 0;return Object(_e.jsx)(S.a,{theme:a,children:Object(_e.jsxs)("div",{className:t.root,children:[Object(_e.jsx)(_.a,{}),Object(_e.jsx)(C.a,{position:"fixed",className:t.appBar,children:Object(_e.jsxs)(I.a,{children:[Object(_e.jsx)(P.a,{color:"inherit",edge:"start",className:t.menuButton,children:Object(_e.jsx)(ce.a,{})}),Object(_e.jsxs)(w.a,{variant:"h6",noWrap:!0,classes:{root:t.title},children:["Sekai Viewer ",Object(_e.jsx)("small",{children:"0.8.0"})]}),Object(_e.jsx)(P.a,{color:"inherit",disableRipple:!0,style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(ie.a,{fontSize:"inherit"})}),Object(_e.jsxs)(N.a,{smDown:!0,implementation:"css",children:[Object(_e.jsx)(P.a,{color:"inherit",style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(Z.a,{fontSize:"inherit"})}),Object(_e.jsx)(we.b,{to:"/user",style:{color:a.palette.common.white},children:Object(_e.jsx)(P.a,{color:"inherit",style:{padding:".6rem"},size:"medium",children:Object(_e.jsx)(re.a,{fontSize:"inherit"})})})]}),Object(_e.jsx)(N.a,{mdUp:!0,implementation:"css",children:Object(_e.jsx)(P.a,{color:"inherit",children:Object(_e.jsx)(oe.a,{})})})]})}),Object(_e.jsxs)("nav",{className:t.drawer,children:[Object(_e.jsx)(N.a,{mdUp:!0,implementation:"css",children:Object(_e.jsx)(T.a,{container:i,variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:!1,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0},children:c})}),Object(_e.jsx)(N.a,{smDown:!0,implementation:"css",children:Object(_e.jsx)(T.a,{variant:"permanent",open:!0,classes:{paper:t.drawerPaper},children:c})})]})]})})};d.a.initialize({gtmId:"GTM-NFC6SW2"}),window.isChinaMainland=!1,Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t.a.getItem("country");case 2:if(t=e.sent){e.next=8;break}return e.next=6,yt.a.get("".concat("https://api.sekai.best","/country"));case 6:t=e.sent.data.data.country,_t.a.setItem("country",t);case 8:return window.isChinaMainland="CN"===t,e.next=11,Object(wt.a)();case 11:l.a.render(Object(_e.jsx)(o.a.StrictMode,{children:Object(_e.jsx)(we.a,{children:Object(_e.jsx)(r.Suspense,{fallback:Object(_e.jsx)(Nt,{}),children:Object(_e.jsx)(ke.b,{children:Object(_e.jsx)(At,{})})})})}),document.getElementById("root"));case 12:case"end":return e.stop()}}),e)})))(),Object(i.a)(c.a.mark((function e(){var t,n,a,i,r,o,s,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(localStorage.getItem("lastUserCheck")||"0"),!((new Date).getTime()-t>36e5)){e.next=27;break}if(n=JSON.parse(localStorage.getItem("userData")||"null"),a=localStorage.getItem("authToken")||"",!n||!a){e.next=27;break}return i=yt.a.create({baseURL:"https://strapi.sekai.best"}),e.next=8,i.get("/users/me",{headers:{authorization:"Bearer ".concat(a)}});case 8:return r=e.sent,o=r.data,localStorage.setItem("userData",JSON.stringify(o)),e.next=13,i.get("/user-metadata/me",{headers:{authorization:"Bearer ".concat(a)}});case 13:return s=e.sent,l=s.data,localStorage.setItem("userMetaDatum",JSON.stringify(l)),e.prev=16,e.next=19,i.get("/sekai-profiles/me",{headers:{authorization:"Bearer ".concat(a)}});case 19:u=e.sent,d=u.data,localStorage.setItem("sekaiProfile",JSON.stringify(d)),e.next=26;break;case 24:e.prev=24,e.t0=e.catch(16);case 26:localStorage.setItem("lastUserCheck",String((new Date).getTime()));case 27:case"end":return e.stop()}}),e,null,[[16,24]])})))()},30:function(e,t,n){"use strict";var a,c,i,r,o;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),function(e){e[e.None=0]="None",e[e.Talk=1]="Talk",e[e.CharacerLayout=2]="CharacerLayout",e[e.InputName=3]="InputName",e[e.CharacterMotion=4]="CharacterMotion",e[e.Selectable=5]="Selectable",e[e.SpecialEffect=6]="SpecialEffect",e[e.Sound=7]="Sound"}(a||(a={})),function(e){e[e.Now=0]="Now",e[e.WaitUnitilFinished=1]="WaitUnitilFinished"}(c||(c={})),function(e){e[e.None=0]="None",e[e.BlackIn=1]="BlackIn",e[e.BlackOut=2]="BlackOut",e[e.WhiteIn=3]="WhiteIn",e[e.WhiteOut=4]="WhiteOut",e[e.ShakeScreen=5]="ShakeScreen",e[e.ShakeWindow=6]="ShakeWindow",e[e.ChangeBackground=7]="ChangeBackground",e[e.Telop=8]="Telop",e[e.FlashbackIn=9]="FlashbackIn",e[e.FlashbackOut=10]="FlashbackOut",e[e.ChangeCardStill=11]="ChangeCardStill",e[e.AmbientColorNormal=12]="AmbientColorNormal",e[e.AmbientColorEvening=13]="AmbientColorEvening",e[e.AmbientColorNight=14]="AmbientColorNight",e[e.PlayScenarioEffect=15]="PlayScenarioEffect",e[e.StopScenarioEffect=16]="StopScenarioEffect",e[e.ChangeBackgroundStill=17]="ChangeBackgroundStill",e[e.PlaceInfo=18]="PlaceInfo",e[e.Movie=19]="Movie",e[e.SekaiIn=20]="SekaiIn",e[e.SekaiOut=21]="SekaiOut",e[e.AttachCharacterShader=22]="AttachCharacterShader",e[e.SimpleSelectable=23]="SimpleSelectable",e[e.FullScreenText=24]="FullScreenText",e[e.StopShakeScreen=25]="StopShakeScreen",e[e.StopShakeWindow=26]="StopShakeWindow"}(i||(i={})),function(e){e[e.CrossFade=0]="CrossFade",e[e.Stack=1]="Stack",e[e.SpecialSePlay=2]="SpecialSePlay",e[e.Stop=3]="Stop"}(r||(r={})),function(e){e.PLAY_LIVE="play_live",e.WAITING_ROOM="waiting_room",e.COLLECT_COSTUME_3D="collect_costume_3d",e.COLLECT_STAMP="collect_stamp",e.READ_AREA_TALK="read_area_talk",e.SKILL_LEVEL_UP="skill_level_up",e.MASTER_RANK="master_rank",e.READ_CARD_EPISODE_FIRST="read_card_episode_first",e.READ_CARD_EPISODE_SECOND="read_card_episode_second"}(o||(o={}))},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return j}));var a=n(8),c=n(0),i=n(213),r=n(48),o=n(49),s=n(114),l=n(1),u=Object(c.createContext)(void 0),d=function(e){var t=e.children,n=Object(i.a)().i18n,s=Object(o.b)().assetI18n,d=Object(c.useState)(n.language),b=Object(a.a)(d,2),j=b[0],h=b[1],m=Object(r.h)("display-mode","auto"),p=Object(a.a)(m,2),f=p[0],O=p[1],x=Object(r.h)("languages-cache",[]),g=Object(a.a)(x,2),v=g[0],A=g[1],w=Object(r.h)("content-translation-mode","translated"),k=Object(a.a)(w,2),y=k[0],S=k[1],_=Object(r.h)("is-show-spoiler",!1),C=Object(a.a)(_,2),I=C[0],P=C[1];return Object(c.useEffect)((function(){localStorage.getItem("is-show-spoiler-force-false")||(P(!1),localStorage.setItem("is-show-spoiler-force-false","true"))}),[P]),Object(l.jsx)(u.Provider,{value:{lang:j,updateLang:function(e){h(e),n.changeLanguage(e),s.changeLanguage(e)},displayMode:f,updateDisplayMode:function(e){O(e)},contentTransMode:y,updateContentTransMode:function(e){S(e)},languages:v,updateLanguages:function(e){A(e)},isShowSpoiler:I,updateIsShowSpoiler:function(e){P(e)}},children:t})},b=Object(c.createContext)(void 0),j=function(e){var t=e.children,n=Object(s.a)(),i=Object(c.useState)(n.user),r=Object(a.a)(i,2),o=r[0],u=r[1],d=Object(c.useState)(n.token),j=Object(a.a)(d,2),h=j[0],m=j[1],p=Object(c.useState)(n.usermeta),f=Object(a.a)(p,2),O=f[0],x=f[1],g=Object(c.useState)(JSON.parse(localStorage.getItem("sekaiProfile")||"null")||void 0),v=Object(a.a)(g,2),A=v[0],w=v[1];return Object(l.jsx)(b.Provider,{value:{user:Object(c.useMemo)((function(){return o}),[o]),jwtToken:Object(c.useMemo)((function(){return h}),[h]),sekaiProfile:A,updateUser:Object(c.useCallback)((function(e){n.user=e,u(e)}),[n]),updateJwtToken:Object(c.useCallback)((function(e){n.token=e,m(e)}),[n]),updateSekaiProfile:Object(c.useCallback)((function(e){w((function(t){var n=Object.assign({},t,e);return e?localStorage.setItem("sekaiProfile",JSON.stringify(n)):localStorage.removeItem("sekaiProfile"),n}))}),[]),logout:Object(c.useCallback)((function(){n.user=null,n.token="",w(void 0),localStorage.removeItem("sekaiProfile")}),[n]),usermeta:Object(c.useMemo)((function(){return O}),[O]),updateUserMeta:Object(c.useCallback)((function(e){n.usermeta=Object.assign({},n.usermeta,e),x((function(t){return Object.assign({},t,e)}))}),[n])},children:t})}},48:function(e,t,n){"use strict";n.d(t,"m",(function(){return S})),n.d(t,"g",(function(){return _})),n.d(t,"j",(function(){return C})),n.d(t,"i",(function(){return I})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return M})),n.d(t,"k",(function(){return T})),n.d(t,"b",(function(){return z})),n.d(t,"l",(function(){return D})),n.d(t,"h",(function(){return E})),n.d(t,"p",(function(){return U})),n.d(t,"f",(function(){return R})),n.d(t,"d",(function(){return W})),n.d(t,"o",(function(){return L})),n.d(t,"e",(function(){return J})),n.d(t,"n",(function(){return Q}));var a=n(24),c=n(113),i=n(9),r=n.n(i),o=n(25),s=n(8),l=n(46),u=n.n(l),d=n(0),b=n(142),j=n(140),h=n.n(j),m=n(57),p=n.n(m),f=n(30),O=n(49),x=n(17),g=n(97),v=n(84),A=n(213),w={cn:{jp:"https://sekai-json-1258184166.file.myqcloud.com/master",tw:"https://sekai-json-1258184166.file.myqcloud.com/master-tw",cn:"https://sekai-json-1258184166.file.myqcloud.com/master-cn",en:"https://sekai-json-1258184166.file.myqcloud.com/master-en"},ww:{jp:"https://sekai-world.github.io/sekai-master-db-diff",tw:"https://sekai-world.github.io/sekai-master-db-tc-diff",cn:"https://sekai-world.github.io/sekai-master-db-cn-diff",en:"https://sekai-world.github.io/sekai-master-db-en-diff"}},k={cn:{jp:"https://sekai-assets-1258184166.file.myqcloud.com",tw:"https://sekai-tc-assets-1258184166.file.myqcloud.com",cn:"https://sekai-cn-assets-1258184166.file.myqcloud.com",en:"https://sekai-en-assets-1258184166.file.myqcloud.com"},ww:{jp:"https://sekai-res.dnaroma.eu/file/sekai-assets",tw:"https://sekai-res.dnaroma.eu/file/sekai-tc-assets",cn:"https://sekai-res.dnaroma.eu/file/sekai-cn-assets",en:"https://sekai-res.dnaroma.eu/file/sekai-en-assets"},minio:{jp:"https://minio.dnaroma.eu/sekai-assets",tw:"https://minio.dnaroma.eu/sekai-tc-assets",cn:"https://minio.dnaroma.eu/sekai-cn-assets",en:"https://minio.dnaroma.eu/sekai-en-assets"}},y=new b.a;function S(e){var t=Object(d.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(d.useRef)(a);return Object(d.useEffect)((function(){i.current=a}),[a]),[a,i,c]}function _(e){var t=Q(),n=Object(s.a)(t,1)[0],a=Object(d.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(t){var a,c,i,o,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:n,c=window.isChinaMainland?w.cn[a]:w.ww[a],e.next=4,u.a.get("".concat(c,"/").concat(t,".json"));case 4:return i=e.sent,o=i.data,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),c=Object(g.a)(e,a),i=c.data,l=c.error;return[i,!l&&!i,l]}function C(e){var t=Object(O.b)().assetT;switch(e){case"both":return{all:"All",vocaloid:"\u30d0\u30fc\u30c1\u30e3\u30eb\u30fb\u30b7\u30f3\u30ac\u30fc | ".concat(t("unit_profile:piapro.name","\u30d0\u30fc\u30c1\u30e3\u30eb\u30fb\u30b7\u30f3\u30ac\u30fc")),light_music_club:"Leo/need | ".concat(t("unit_profile:light_sound.name","Leo/need")),idol:"MORE MORE JUMP! | ".concat(t("unit_profile:idol.name","MORE MORE JUMP!")),school_refusal:"25\u6642\u3001\u30ca\u30a4\u30c8\u30b3\u30fc\u30c9\u3067\u3002 | ".concat(t("unit_profile:school_refusal.name","25\u6642\u3001\u30ca\u30a4\u30c8\u30b3\u30fc\u30c9\u3067\u3002")),theme_park:"\u30ef\u30f3\u30c0\u30fc\u30e9\u30f3\u30ba\xd7\u30b7\u30e7\u30a6\u30bf\u30a4\u30e0 | ".concat(t("unit_profile:theme_park.name","\u30ef\u30f3\u30c0\u30fc\u30e9\u30f3\u30ba\xd7\u30b7\u30e7\u30a6\u30bf\u30a4\u30e0")),street:"Vivid BAD SQUAD | ".concat(t("unit_profile:street.name","Vivid BAD SQUAD")),other:"Other"};case"original":return{all:"All",vocaloid:"\u30d0\u30fc\u30c1\u30e3\u30eb\u30fb\u30b7\u30f3\u30ac\u30fc",light_music_club:"Leo/need",idol:"MORE MORE JUMP!",school_refusal:"25\u6642\u3001\u30ca\u30a4\u30c8\u30b3\u30fc\u30c9\u3067\u3002",theme_park:"\u30ef\u30f3\u30c0\u30fc\u30e9\u30f3\u30ba\xd7\u30b7\u30e7\u30a6\u30bf\u30a4\u30e0",street:"Vivid BAD SQUAD",other:"Other"};case"translated":return{all:"All",vocaloid:t("unit_profile:piapro.name","\u30d0\u30fc\u30c1\u30e3\u30eb\u30fb\u30b7\u30f3\u30ac\u30fc"),light_music_club:t("unit_profile:light_sound.name","Leo/need"),idol:t("unit_profile:idol.name","MORE MORE JUMP!"),school_refusal:t("unit_profile:school_refusal.name","25\u6642\u3001\u30ca\u30a4\u30c8\u30b3\u30fc\u30c9\u3067\u3002"),theme_park:t("unit_profile:theme_park.name","\u30ef\u30f3\u30c0\u30fc\u30e9\u30f3\u30ba\xd7\u30b7\u30e7\u30a6\u30bf\u30a4\u30e0"),street:t("unit_profile:street.name","Vivid BAD SQUAD"),other:"Other"}}}function I(){var e=Object(d.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get((window.isChinaMainland?"https://sekai-best-assets-1258184166.file.myqcloud.com":"https://minio.dnaroma.eu/sekai-best-assets")+"/".concat(t,".json"));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return[Object(g.a)("music_metas",e).data]}function P(e,t){var n=t.map((function(e){return e.id}));return e.filter((function(e){return n.includes(e.music_id)}))}var N=new h.a({concurrency:1});function M(e,t){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(r.a.mark((function e(t,n){var a,c,i,o,s,l,d=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>2&&void 0!==d[2]?d[2]:"ww",c=d.length>3&&void 0!==d[3]?d[3]:"jp",i=Modernizr.webplossless,o="".concat(k[a][c],"/").concat(t),!t.endsWith(".webp")||i){e.next=25;break}return e.next=7,p.a.getItem(o);case 7:if(s=e.sent){e.next=21;break}return e.next=11,u.a.get(o,{responseType:"arraybuffer"});case 11:return l=e.sent,e.next=14,N.add((function(){return y.decode(new Uint8Array(l.data))}));case 14:return s=e.sent,e.next=17,p.a.setItem(o,s);case 17:case 21:return n&&n(s),e.abrupt("return",s);case 23:e.next=27;break;case 25:return n&&n(o),e.abrupt("return",o);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){var e=_("mobCharacters"),t=Object(s.a)(e,1)[0],n=_("character2ds"),a=Object(s.a)(n,1)[0],i=Object(O.c)(),l=Q(),b=Object(s.a)(l,1)[0];return Object(d.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(n){var o,s,l,d,j,h,m,p,O,x,g,v,A,w,k,y,S,_,C,I,P=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=P.length>1&&void 0!==P[1]&&P[1],s=P.length>2&&void 0!==P[2]&&P[2],l={characters:[],actions:[]},a&&a.length&&t&&t.length&&n){e.next=5;break}return e.abrupt("return",l);case 5:return e.t0=u.a,e.next=8,M(n,void 0,window.isChinaMainland?"cn":"ww",b);case 8:return e.t1=e.sent,e.t2={responseType:"json"},e.next=12,e.t0.get.call(e.t0,e.t1,e.t2);case 12:if(d=e.sent,j=d.data,h=j.ScenarioId,m=j.AppearCharacters,p=j.Snippets,O=j.TalkData,x=j.SpecialEffectData,g=j.SoundData,v=j.FirstBgm,!(A=j.FirstBackground)){e.next=25;break}return e.t3=l.actions,e.t4=f.b.SpecialEffect,e.t5=f.c.WaitUnitilFinished,e.t6=v,e.next=22,M("scenario/background/".concat(A,"_rip/").concat(A,".webp"),void 0,window.isChinaMainland?"cn":"ww");case 22:e.t7=e.sent,e.t8={type:e.t4,isWait:e.t5,delay:0,seType:"ChangeBackground",body:e.t6,resource:e.t7},e.t3.push.call(e.t3,e.t8);case 25:if(!v){e.next=35;break}return e.t9=l.actions,e.t10=f.b.Sound,e.t11=f.c.WaitUnitilFinished,e.t12=f.d[0],e.next=32,M("sound/scenario/bgm/".concat(v,"_rip/").concat(v,".mp3"),void 0,window.isChinaMainland?"cn":"ww");case 32:e.t13=e.sent,e.t14={type:e.t10,isWait:e.t11,delay:0,playMode:e.t12,hasBgm:!0,hasSe:!1,bgm:e.t13,se:""},e.t9.push.call(e.t9,e.t14);case 35:l.characters=m.map((function(e){var n=a.find((function(t){return t.id===e.Character2dId}));switch(n.characterType){case"game_character":return{id:n.characterId,name:i(n.characterId)};case"mob":return{id:n.characterId,name:t.find((function(e){return e.id===n.characterId})).name}}})),w=Object(c.a)(p),e.prev=37,w.s();case 39:if((k=w.n()).done){e.next=100;break}y=k.value,S={},e.t15=y.Action,e.next=e.t15===f.b.Talk?45:e.t15===f.b.SpecialEffect?47:e.t15===f.b.Sound?71:96;break;case 45:return e.delegateYield(r.a.mark((function e(){var t,n,c,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O[y.ReferenceIndex],n={id:0,name:""},t.TalkCharacters[0].Character2dId&&(c=a.find((function(e){return e.id===t.TalkCharacters[0].Character2dId})),n.id=c.characterId),n.name=t.WindowDisplayName,i=t.Voices.length?"sound/".concat(o?"card_":"").concat(s?"actionset":"scenario","/voice/").concat(h,"_rip/").concat(t.Voices[0].VoiceId,".mp3"):"",t.Voices.length&&t.Voices[0].VoiceId.startsWith("partvoice")&&(l=a.find((function(e){return e.id===t.TalkCharacters[0].Character2dId})),i=l?"sound/scenario/part_voice/".concat(l.assetName,"_").concat(l.unit,"_rip/").concat(t.Voices[0].VoiceId,".mp3"):""),e.t0=y.Action,e.t1=y.ProgressBehavior===f.c.WaitUnitilFinished,e.t2=y.Delay,e.t3=n,e.t4=t.Body,!t.Voices.length){e.next=17;break}return e.next=14,M(i,void 0,window.isChinaMainland?"cn":"ww");case 14:e.t5=e.sent,e.next=18;break;case 17:e.t5="";case 18:e.t6=e.t5,S={type:e.t0,isWait:e.t1,delay:e.t2,chara:e.t3,body:e.t4,voice:e.t6};case 20:case"end":return e.stop()}}),e)}))(),"t16",46);case 46:return e.abrupt("break",97);case 47:if(_=x[y.ReferenceIndex],C=f.e[_.EffectType],e.t17=y.Action,e.t18=y.ProgressBehavior===f.c.WaitUnitilFinished,e.t19=y.Delay,e.t20=C,e.t21=_.StringVal,"FullScreenText"!==C){e.next=60;break}return e.next=57,M("sound/scenario/voice/".concat(h,"_rip/").concat(_.StringValSub,".mp3"),void 0,window.isChinaMainland?"cn":"ww");case 57:e.t22=e.sent,e.next=68;break;case 60:if("ChangeBackground"!==C){e.next=66;break}return e.next=63,M("scenario/background/".concat(_.StringValSub,"_rip/").concat(_.StringValSub,".webp"),void 0,window.isChinaMainland?"cn":"ww");case 63:e.t23=e.sent,e.next=67;break;case 66:e.t23="Movie"===C?"scenario/movie/".concat(_.StringVal,"_rip"):"";case 67:e.t22=e.t23;case 68:return e.t24=e.t22,S={type:e.t17,isWait:e.t18,delay:e.t19,seType:e.t20,body:e.t21,resource:e.t24},e.abrupt("break",97);case 71:if(I=g[y.ReferenceIndex],e.t25=y.Action,e.t26=y.ProgressBehavior===f.c.WaitUnitilFinished,e.t27=y.Delay,e.t28=f.d[I.PlayMode],e.t29=!!I.Bgm,e.t30=!!I.Se,!I.Bgm){e.next=84;break}return e.next=81,M("sound/scenario/bgm/".concat(I.Bgm,"_rip/").concat(I.Bgm,".mp3"),void 0,window.isChinaMainland?"cn":"ww");case 81:e.t31=e.sent,e.next=85;break;case 84:e.t31="";case 85:if(e.t32=e.t31,!I.Se){e.next=92;break}return e.next=89,M("sound/scenario/se/se_pack00001_rip/".concat(I.Se,".mp3"),void 0,window.isChinaMainland?"cn":"ww");case 89:e.t33=e.sent,e.next=93;break;case 92:e.t33="";case 93:return e.t34=e.t33,S={type:e.t25,isWait:e.t26,delay:e.t27,playMode:e.t28,hasBgm:e.t29,hasSe:e.t30,bgm:e.t32,se:e.t34},e.abrupt("break",97);case 96:S={type:y.Action,isWait:y.ProgressBehavior===f.c.WaitUnitilFinished,delay:y.Delay};case 97:l.actions.push(S);case 98:e.next=39;break;case 100:e.next=105;break;case 102:e.prev=102,e.t35=e.catch(37),w.e(e.t35);case 105:return e.prev=105,w.f(),e.finish(105);case 108:return e.abrupt("return",l);case 109:case"end":return e.stop()}}),e,null,[[37,102,105,108]])})));return function(t){return e.apply(this,arguments)}}(),[a,i,t,b])}function z(){return(new Date).toLocaleDateString("en-US",{timeZone:"Asia/Tokyo"}).split("/").slice(0,2).join("/")}function D(){var e=Object(x.h)().search;return Object(d.useMemo)((function(){return new URLSearchParams(e)}),[e])}function E(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object(d.useState)((function(){try{var a=window.localStorage.getItem(e);if(a){var c=JSON.parse(a);return n||c?c:(window.localStorage.setItem(e,JSON.stringify(t)),t)}return t}catch(i){return console.log(e,i),window.localStorage.setItem(e,JSON.stringify(t)),t}})),c=Object(s.a)(a,2),i=c[0],r=c[1],o=function(a){try{var c=a instanceof Function?a(i):a;r(n||c?c:t),window.localStorage.setItem(e,JSON.stringify(n||c?c:t))}catch(o){console.log(o)}};return[i,o]}function U(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(d.useReducer)((function(e){return!e}),e)}function R(){var e=Object(v.useSnackbar)();return Object(d.useMemo)((function(){var t=function(t){return function(n,c,i,r){return e.showMessage(n,c,i,Object(a.a)(Object(a.a)({},r),{},{type:t}))}};return Object(a.a)(Object(a.a)({},e),{},{showMessage:t("info"),showInfo:t("info"),showWarning:t("warning"),showError:t("error"),showSuccess:t("success")})}),[e])}var W={1:3,2:1,3:4,4:5,5:2,6:7,7:6};function L(){var e=Object(A.a)().t;return Object(d.useMemo)((function(){return[{name:e("filter:skill.score_up"),descriptionSpriteName:"score_up"},{name:e("filter:skill.judgment_up"),descriptionSpriteName:"judgment_up"},{name:e("filter:skill.life_recovery"),descriptionSpriteName:"life_recovery"},{name:e("filter:skill.perfect_score_up"),descriptionSpriteName:"perfect_score_up"},{name:e("filter:skill.life_score_up"),descriptionSpriteName:"life_score_up"}]}),[e])}function J(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n],n]);t.sort((function(e,t){return e[0]<t[0]?-1:1}));for(var a=[],c=0;c<e.length;c++)a.push(t[c][1]);return a}function Q(){return E("server-region","jp",!1)}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O}));var a=n(9),c=n.n(a),i=n(8),r=n(25),o=n(106),s=n(55),l=n(101),u=n(102),d=n(0),b=n(37),j=n(48),h=o.a.createInstance();function m(){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.a.use(s.e).use(l.a).use(u.a).init({ns:["common","home","card","music","gacha","event","unit","member","filter","music","title","member","unit","about","support","music_recommend","story_reader","mission","event_calc","team_build","user","auth","announcement","comment","live2d","virtual_live","translate","honor"],defaultNS:"common",fallbackLng:{default:["en"]},fallbackNS:"common",load:"currentOnly",backend:{loadPath:(window.isChinaMainland?"https://sekai-json-1258184166.file.myqcloud.com/locales":"https://i18n-json.sekai.best")+"/{{lng}}/{{ns}}.json"},returnEmptyString:!1}),h.use(l.a).use(u.a).init({ns:["music_titles","card_prefix","card_skill_name","event_name","gacha_name","character_name","skill_desc","character_profile","unit_profile","stamp_name","comic_title","release_cond","card_episode_title","music_vocal","unit_story_chapter_title","honor_mission","normal_mission","beginner_mission","honor_name","honorGroup_name","virtualLive_name","unit_story_episode_title","event_story_episode_title","character_mission","card_gacha_phrase","cheerful_carnival_teams","cheerful_carnival_themes","area_name"],fallbackLng:{default:["ja"]},load:"currentOnly",backend:{loadPath:(window.isChinaMainland?"https://sekai-json-1258184166.file.myqcloud.com/locales":"https://i18n-json.sekai.best")+"/{{lng}}/{{ns}}.json"},returnEmptyString:!1});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){var e=(Object(d.useContext)(b.a)||{contentTransMode:"original"}).contentTransMode,t=Object(d.useCallback)((function(e,t,n){var a=h.t(e,n);return a===e.split(":")[1]?t:a}),[]),n=Object(d.useCallback)((function(n,a,c){switch(e){case"original":return a;case"translated":return t(n,a,c);case"both":return"".concat(a," | ").concat(t(n,a,c))}}),[t,e]);return{assetT:t,assetI18n:h,getTranslated:n}}function O(e){var t=(Object(d.useContext)(b.a)||{contentTransMode:"original"}).contentTransMode;e&&(t=e);var n=Object(j.g)("gameCharacters"),a=Object(i.a)(n,1)[0],c=f(),r=c.assetT,o=c.assetI18n;return Object(d.useCallback)((function(e){if(a&&a.length){var n=a.find((function(t){return t.id===e})),c=["zh-CN","zh-TW","ko","ja","id","ms"];if(null===n||void 0===n?void 0:n.firstName)switch(t){case"original":return"".concat(n.firstName," ").concat(n.givenName);case"translated":return c.includes(o.language)?"".concat(r("character_name:".concat(e,".firstName"),n.firstName)," ").concat(r("character_name:".concat(e,".givenName"),n.givenName)):"".concat(r("character_name:".concat(e,".givenName"),n.givenName)," ").concat(r("character_name:".concat(e,".firstName"),n.firstName));case"both":return"".concat(n.firstName," ").concat(n.givenName," | ")+(c.includes(o.language)?"".concat(r("character_name:".concat(e,".firstName"),n.firstName)," ").concat(r("character_name:".concat(e,".givenName"),n.givenName)):"".concat(r("character_name:".concat(e,".givenName"),n.givenName)," ").concat(r("character_name:".concat(e,".firstName"),n.firstName)))}return null===n||void 0===n?void 0:n.givenName}}),[o.language,r,a,t])}}},[[209,15,17]]]);