(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[5],{309:function(t,e,r){"use strict";r.d(e,"f",(function(){return b})),r.d(e,"e",(function(){return m})),r.d(e,"a",(function(){return k})),r.d(e,"b",(function(){return h})),r.d(e,"c",(function(){return v})),r.d(e,"d",(function(){return g}));var n=r(8),a=r(24),c=r(9),u=r.n(c),s=r(25),o=r(46),i=r.n(o),p=r(0),f=r(97),l=r(48);function b(t){var e=Object(p.useRef)(t),r=Object(p.useMemo)((function(){var t=i.a.create({baseURL:"https://strapi.sekai.best"});return t.interceptors.request.use((function(t){return e.current&&(t.headers.authorization="Bearer ".concat(e.current)),t})),t.interceptors.response.use((function(t){return t}),(function(t){throw 401===t.response.status?e.current="":t.response.data.message&&500!==t.response.status?t.id=t.response.data.message[0].messages[0].id:500===t.response.status?(t.id=t.response.data.error,t.message=t.response.data.message):t.id=t.message,t})),t}),[e]);return{postLoginLocal:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/auth/local",e);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postRegisterLocal:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/auth/local/register",e);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getRedirectConnectLoginUrl:Object(p.useCallback)((function(t){return"".concat(r.getUri({url:"".concat("https://strapi.sekai.best","/connect/").concat(t)}))}),[r]),getConnectCallback:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/auth/".concat(e,"/callback").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),getUserMe:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/users/me",e?{headers:{authorization:"Bearer ".concat(e)}}:{});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postUpload:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/upload",e,{headers:Object.assign({"Content-Type":"multipart/form-data"},n?{authorization:"Bearer ".concat(n)}:{})});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),putUserMetadataMe:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.put("/user-metadata/me",Object.assign({},e,e.languages?{languages:e.languages.map((function(t){return t.id}))}:{}));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postForgotPassword:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/auth/forgot-password",{email:e});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postResetPassword:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/auth/reset-password",{code:e,password:n,passwordConfirmation:a});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[r]),getSekaiProfileMe:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/sekai-profiles/me",e?{headers:{authorization:"Bearer ".concat(e)}}:{});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postSekaiProfileVerify:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/sekai-profiles/verify",{userid:e});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postSekaiProfileConfirm:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/sekai-profiles/".concat(e,"/confirm"),{userid:n});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),putSekaiProfileUpdate:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.put("/sekai-profiles/".concat(e,"/update"));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getLanguages:Object(p.useCallback)(Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/languages?_sort=id:ASC");case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)}))),[r]),getUserMetadataMe:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/user-metadata/me",e?{headers:{authorization:"Bearer ".concat(e)}}:{});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getSekaiCurrentEvent:Object(p.useCallback)(Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/sekai-current-event");case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)}))),[r]),getSekaiProfileEventRecordMe:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/sekai-profile-event-records/me",{params:e?{eventId:e}:{}});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),postSekaiProfileEventRecord:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/sekai-profile-event-records/record",{eventId:e});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),putSekaiCardList:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.put("/sekai-profiles/".concat(e,"/cardlist"),n);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),deleteSekaiCardList:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.delete("/sekai-profiles/".concat(e,"/cardlist"),{params:{cards:n}});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),putSekaiDeckList:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.put("/sekai-profiles/".concat(e,"/decklist"),n);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),deleteSekaiDeckList:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.delete("/sekai-profiles/".concat(e,"/decklist"),{params:{decks:n}});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),getAnnouncements:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/announcements?",{params:Object(a.a)({_sort:"isPin:DESC,published_at:DESC"},e||{})});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getAnnouncementById:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/announcements/".concat(e),{params:n});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),getAnnouncementPage:Object(p.useCallback)(Object(s.a)(u.a.mark((function t(){var e,n,c,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:30,n=s.length>1&&void 0!==s[1]?s[1]:0,c=s.length>2?s[2]:void 0,t.next=5,r.get("/announcements",{params:Object(a.a)({_limit:e,_start:n*e,_sort:"isPin:DESC,published_at:DESC"},c||{})});case 5:return t.abrupt("return",t.sent.data);case 6:case"end":return t.stop()}}),t)}))),[r]),getAnnouncementCount:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Number,t.next=3,r.get("/announcements/count",{params:e});case 3:return t.t1=t.sent.data,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getAnnouncementByLanguagesPage:Object(p.useCallback)(Object(s.a)(u.a.mark((function t(){var e,n,c,s,o=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:30,n=o.length>1&&void 0!==o[1]?o[1]:0,c=o.length>2?o[2]:void 0,s=o.length>3?o[3]:void 0,t.next=6,r.get("/announcements/language",{params:Object(a.a)({_limit:e,_start:n*e,_sort:"isPin:DESC,published_at:DESC",targetLangs:c},s||{})});case 6:return t.abrupt("return",t.sent.data);case 7:case"end":return t.stop()}}),t)}))),[r]),getAnnouncementByLanguagesCount:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Number,t.next=3,r.get("/announcements/language/count",{params:{targetLangs:e}});case 3:return t.t1=t.sent.data,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getComments:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/comments/".concat(e,":").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),postComment:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a,c,s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/comments/".concat(e,":").concat(n),{authorUser:a,authorAvatar:c?c.url:null,content:s,related:[{refId:n,ref:e,field:"comments"}]});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n,a,c){return t.apply(this,arguments)}}(),[r]),getUserProfile:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/user-metadata/profile/user/".concat(e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),patchCommentLike:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.patch("/comments/".concat(e,":").concat(n,"/comment/").concat(a,"/like"));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[r]),postCommentAbuse:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a,c,s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/comments/".concat(e,":").concat(n,"/comment/").concat(a,"/report-abuse"),{reason:c,content:s});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n,a,c){return t.apply(this,arguments)}}(),[r]),getTranslations:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/translations",{params:Object(a.a)({_limit:n,_start:e*n},c||{})});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[r]),getTranslationById:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/translations/".concat(e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getTranslationBySlug:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/translations/slug/".concat(n,"/").concat(e),{params:a});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),[r]),postTranslation:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n,a,c,s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.post("/translations",{user:e.id,sourceSlug:n,sourceLang:a,target:c,targetLang:s});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n,a,c){return t.apply(this,arguments)}}(),[r]),putTranslationId:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.put("/translations/".concat(e),n);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r]),getTranslationCount:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/translations/count",{params:e});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getTranslationBySourceSlug:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/translations",{params:{sourceSlug:e}});case 2:return t.abrupt("return",t.sent.data[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getMusic:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/musics",{params:{musicId:e,_limit:1}});case 2:return t.abrupt("return",t.sent.data[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getCard:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/cards",{params:{cardId:e,_limit:1}});case 2:return t.abrupt("return",t.sent.data[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getEvent:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/events",{params:{eventId:e,_limit:1}});case 2:return t.abrupt("return",t.sent.data[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),getVirtualLive:Object(p.useCallback)(function(){var t=Object(s.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.get("/virtual-lives",{params:{virtualLiveId:e,_limit:1}});case 2:return t.abrupt("return",t.sent.data[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r])}}var d=function(){var t=Object(s.a)(u.a.mark((function t(e,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get(e,{params:r});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function m(){var t=Object(p.useMemo)((function(){return{_sort:"id:ASC"}}),[]),e=Object(f.a)(["".concat("https://strapi.sekai.best","/languages"),t],d),r=e.data,n=e.error;return{languages:r,isLoading:!n&&!r,error:n}}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,c=Object(p.useMemo)((function(){return Object(a.a)({_limit:e,_start:t*e,_sort:"isPin:DESC,published_at:DESC",targetLangs:r},n||{})}),[r,e,t,n]),u=Object(f.a)(["".concat("https://strapi.sekai.best","/announcements/language"),c],d),s=u.data,o=u.error;return{announcements:s,isLoading:!o&&!s,error:o}}function h(){var t=Object(l.n)(),e=Object(n.a)(t,1)[0],r=Object(f.a)("".concat("https://strapi.sekai.best","/sekai-current-event").concat("tw"===e?"-tw":""),d),a=r.data,c=r.error;return{currEvent:a,isLoading:!c&&!a,error:c}}function v(){var t=Object(f.a)("".concat(window.isChinaMainland?"https://minio.dnaroma.eu/sekai-best-assets":"".concat("https://minio.dnaroma.eu","/sekai-best-assets"),"/models.json"),d),e=t.data,r=t.error;return{modelList:e,isLoading:!r&&!e,error:r}}function g(t){var e=Object(p.useMemo)((function(){return{tier:t}}),[t]),r=Object(f.a)(["".concat("https://strapi.sekai.best","/patrons"),e],d),n=r.data,a=r.error;return{patrons:n,isLoading:!a&&!n,error:a}}}}]);