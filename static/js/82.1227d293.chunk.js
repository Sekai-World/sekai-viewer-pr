(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[82],{1100:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),i=a(113),c=a(31),o=a(25),s=a(8),l=a(7),d=a(0),u=a(1036),b=a(312),h=a(234),p=a(18),m=a(260),j=a(296),g=a(89),f=a(1059),x=a(615),k=a(1109),O=a(135),v=a(316),y=a(1061),w=a(614),C=a(545),_=a(134),I=a(519),M=a(362),S=a(367),W=a(455),N=a(386),L=a(1093),U=a.n(L),R=a(1101),F=a.n(R),P=a(213),A=a(46),D=a.n(A),H=a(351),B=a(1004),T=a(48),E=a(37),V=a(309),z=a(303),q=a(680),J=a(687),G=a(299),$=a(1);var K=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,t=2*e*(e-1),a=new Float64Array(t),r=0;r<t;r++)a[r]=Math.cos(r/(2*e)*Math.PI);return a}(32);function Q(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=new Float64Array(t*t),r=0;r<t;r++)for(var n=0;n<t;n++){var i=4*(t*r+n);a[t*r+n]=.299*e[i+0]+.587*e[i+1]+.114*e[i+2]}for(var c=X(a,t),o=[],s=1;s<=8;s++)for(var l=1;l<=8;l++)o.push(c[32*s+l]);for(var d=o.slice().sort((function(e,t){return e-t}))[Math.floor(o.length/2)],u=0;u<o.length;u++)o[u]=o[u]>d?1:0;return o}function X(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=new Float64Array(t),r=1;r<t;r++)a[r]=1;a[0]=1/Math.sqrt(2);for(var n=new Float64Array(t*t),i=0;i<t;i++)for(var c=0;c<t;c++){for(var o=0,s=0;s<t;s++)for(var l=0;l<t;l++)o+=K[(2*s+1)*i]*K[(2*l+1)*c]*e[t*s+l];o*=a[i]*a[c]/4,n[t*i+c]=o}return n}function Y(e,t){for(var a=0,r=0;r<e.length;r++)e[r]!==t[r]&&a++;return a}var Z=Object(h.a)((function(e){var t;return{media:(t={},Object(l.a)(t,e.breakpoints.down("sm"),{paddingTop:"75%"}),Object(l.a)(t,e.breakpoints.up("md"),{paddingTop:"56.25%"}),Object(l.a)(t,"backgroundSize","contain"),Object(l.a)(t,"width","100%"),t),slideSubtitle:{"& > div:nth-child(2) > p:nth-child(2)":{whiteSpace:"pre-line",textAlign:"left"},height:"100%"}}}));t.default=function(){var e=Object(z.a)(),t=Object(b.a)(),a=Object(p.a)(),r=Z(),l=Object(P.a)().t,h=Object(d.useContext)(E.c),L=h.jwtToken,R=h.sekaiProfile,A=h.updateSekaiProfile,K=Object(V.f)(L).putSekaiCardList,X=Object(T.f)(),ee=X.showError,te=X.showSuccess,ae=Object(T.g)("cards"),re=Object(s.a)(ae,1)[0],ne=Object(d.useState)(!1),ie=Object(s.a)(ne,2),ce=ie[0],oe=ie[1],se=Object(d.useState)([]),le=Object(s.a)(se,2),de=le[0],ue=le[1],be=Object(d.useState)(!1),he=Object(s.a)(be,2),pe=he[0],me=he[1],je=Object(d.useState)(!1),ge=Object(s.a)(je,2),fe=ge[0],xe=ge[1],ke=Object(T.p)(!1),Oe=Object(s.a)(ke,2),ve=Oe[0],ye=Oe[1],we=Object(d.useState)(-1),Ce=Object(s.a)(we,2),_e=Ce[0],Ie=Ce[1],Me=Object(T.p)(!1),Se=Object(s.a)(Me,2),We=Se[0],Ne=Se[1],Le=Object(d.useMemo)((function(){return[0,20,30,50,60]}),[]),Ue=Object(d.useMemo)((function(){return[0,999,999,40,50]}),[]),Re=Object(m.a)(a.breakpoints.up("sm")),Fe=Object(d.useCallback)((function(e){if(e.target){var t=e.target.result;if(t&&"string"===typeof t){var a=new u.b;oe(!0),a.load(t,Object(o.a)(n.a.mark((function e(){var t,r,o,s,l,d,b,h,p,m,j,g,f,x,k,O,v,y,w,C,_,I,M,S,W,N,L,U,R,F,P,A,H,T,E,V,z,q,J,G,$,K,X,Z,ee,te,ae,ne,ie,ce,se,le,de,be,he,me,je,ge,fe;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue([]),t=a.clone(),u.a.grayScale(a,t),r=new u.c(-1,-1,-1,-1),o=.75,s=0;case 6:if(!(s<t.getHeight())){e.next=15;break}for(l=0,d=0;d<t.getWidth();d++)4294967295===t.getIntColor(d,s)&&l++;if(!(l/t.getWidth()>=o)){e.next=12;break}return r.y1=s,e.abrupt("break",15);case 12:s++,e.next=6;break;case 15:b=t.getHeight();case 16:if(!(b>0)){e.next=25;break}for(h=0,p=t.getWidth();p>0;p--)4294967295===t.getIntColor(p,b)&&h++;if(!(h/t.getWidth()>=o)){e.next=22;break}return r.y2=b,e.abrupt("break",25);case 22:b--,e.next=16;break;case 25:r.height=r.y2-r.y1,m=.9,j=0;case 28:if(!(j<t.getWidth())){e.next=37;break}for(g=0,f=r.y1;f<r.y2;f++)4294967295===t.getIntColor(j,f)&&g++;if(!(g/r.height>=m)){e.next=34;break}return r.x1=j,e.abrupt("break",37);case 34:j++,e.next=28;break;case 37:x=t.getWidth();case 38:if(!(x>0)){e.next=47;break}for(k=0,O=r.y2;O>r.y1;O--)4294967295===t.getIntColor(x,O)&&k++;if(!(k/r.height>=m)){e.next=44;break}return r.x2=x,e.abrupt("break",47);case 44:x--,e.next=38;break;case 47:r.width=r.x2-r.x1,u.a.crop(t.clone(),t,r.x1,r.y1,r.width,r.height),v=a.clone(),u.a.crop(a,v,r.x1,r.y1,r.width,r.height),u.a.blackAndWhite(t.clone(),t,3),y=0,w=[],C=0,_=[],I=4294967295,M=0;case 58:if(!(M<t.getWidth())){e.next=88;break}S=[],W=[],N=!1,L=0;case 63:if(!(L<t.getHeight())){e.next=81;break}if(t.getIntColor(M,L)<I&&!N?(S.push(L),N=!0):t.getIntColor(M,L)>=I&&N&&(S.push(L),N=!1),!(2===S.length&&S[1]-S[0]>30)){e.next=71;break}return u.a.crop(t.clone(),t,0,S[1]+20,t.getWidth(),t.getHeight()),u.a.crop(v.clone(),v,0,S[1]+20,v.getWidth(),v.getHeight()),S=[],L=0,e.abrupt("continue",78);case 71:if(4!==S.length){e.next=78;break}if(U=S[1]-S[0]+S[3]-S[2],!(W.length&&Math.abs(U-W[W.length-1])>10)){e.next=75;break}return e.abrupt("continue",78);case 75:_.push(S[0]),W.push(U),S=[];case 78:L++,e.next=63;break;case 81:if(!W.length){e.next=85;break}return y=Math.round(W.slice(1).reduce((function(e,t){return e+t}),0)/(W.length-1)),Math.abs(W[0]-y)>10?_.unshift():Math.abs(W[0]-y)>=4&&(_[0]=_[0]-Math.abs(W[0]-y)),e.abrupt("break",88);case 85:M++,e.next=58;break;case 88:R=2,F=_[0]-20;case 90:if(!(F<t.getHeight())){e.next=112;break}P=[],A=[],H=!1,T=0;case 95:if(!(T<t.getWidth())){e.next=106;break}if(t.getIntColor(T,F)<I&&!H?(P.push(T),H=!0):t.getIntColor(T,F)>=I&&H&&(P.push(T),H=!1),P.length!==2*R){e.next=103;break}if("break"!==(E=function(){var e=Object(c.a)(P),t=Array.from({length:R}).reduce((function(t,a,r){return t+(e[2*r+1]-e[2*r])}),0);return t<60?(R+=1)>3?(R=2,F=_[1]-15,w=[],A=[],"break"):(T=-1,P=[],"continue"):w.length&&P[0]-w[w.length-1]<20?"continue":(A.push(t),w.push(P[0]),void(P=[]))}())){e.next=101;break}return e.abrupt("break",106);case 101:if("continue"!==E){e.next=103;break}return e.abrupt("continue",103);case 103:T++,e.next=95;break;case 106:if(!A.length){e.next=109;break}return C=Math.round(A.reduce((function(e,t){return e+t}),0)/A.length),e.abrupt("break",112);case 109:F++,e.next=90;break;case 112:for(V=[],z=[],q=[],J=[],G=Math.max(C,y)+4,w.forEach((function(e){_.forEach((function(t){var a=new u.b(G,G);u.a.crop(v,a,e,t,G,G),V.push(a);var r=new u.b;u.a.crop(a,r,Math.round(.165*G),Math.round(.165*G),Math.round(.445*G),Math.round(.445*G)),u.a.scale(r.clone(),r,32,32),u.a.grayScale(r.clone(),r);var n=Q(r.data,32).join("");J.push(n);var i=a.clone();u.a.blackAndWhite(i.clone(),i,10),u.a.invertColors(i.clone(),i);var c=new u.b;u.a.crop(i,c,3,G-Math.round(.2*G),Math.round(.5*G),Math.round(.2*G)),z.push(c);var o=new u.b,s=G>115?Math.round(.24*G):Math.round(.253*G),l=G>115?Math.round(.18*G):Math.round(.17*G);u.a.crop(i,o,G-s,G-s,l,l),u.a.scale(o.clone(),o,32,32),q.push(o)}))})),$=[],K=0,X=V;K<X.length;K++)Z=X[K],(ee=document.createElement("canvas")).width=Z.getWidth(),ee.height=Z.getHeight(),null===(te=ee.getContext("2d"))||void 0===te||te.putImageData(Z.loadImageData(),0,0),$.push(ee.toDataURL());return e.next=122,D.a.get("".concat(window.isChinaMainland?"https://minio.dnaroma.eu/sekai-best-assets":"".concat("https://minio.dnaroma.eu","/sekai-best-assets"),"/chara_hash.json"));case 122:if(ae=e.sent,ne=ae.data,ie=[],J.forEach((function(e){var t=ne.map((function(t){return[t[0],Y(t[1],e)]})).sort((function(e,t){return e[1]-t[1]})).filter((function(e){return e[1]<=24})).sort((function(e,t){return e[1]-t[1]}));ie.push(t.length?t[0][1]<=10?t.slice(0,1):t:[["",64]])})),ce=[],se=[],!pe){e.next=162;break}le=Array.from({length:1}).map((function(){return Object(B.createWorker)({corePath:window.isChinaMainland?"".concat("https://sekai-best-assets-1258184166.file.myqcloud.com","/tesseract-core.").concat("object"===typeof WebAssembly?"wasm":"asm",".js"):"https://unpkg.com/tesseract.js-core@2.2.0/tesseract-core.".concat("object"===typeof WebAssembly?"wasm":"asm",".js"),workerPath:window.isChinaMainland?"".concat("https://sekai-best-assets-1258184166.file.myqcloud.com","/worker.min.js"):"https://unpkg.com/tesseract.js@2.1.4/dist/worker.min.js",langPath:window.isChinaMainland?"https://sekai-best-assets-1258184166.file.myqcloud.com":"https://tessdata.projectnaptha.com/4.0.0"})})),de=Object(B.createScheduler)(),be=Object(i.a)(le),e.prev=132,be.s();case 134:if((he=be.n()).done){e.next=145;break}return me=he.value,e.next=138,me.load();case 138:return e.next=140,me.loadLanguage("eng");case 140:return e.next=142,me.initialize("eng");case 142:de.addWorker(me);case 143:e.next=134;break;case 145:e.next=150;break;case 147:e.prev=147,e.t0=e.catch(132),be.e(e.t0);case 150:return e.prev=150,be.f(),e.finish(150);case 153:return e.next=155,Promise.all(z.map((function(e){var t=document.createElement("canvas");t.width=e.getWidth(),t.height=e.getHeight();var a=t.getContext("2d");return null===a||void 0===a||a.putImageData(e.loadImageData(),0,0),de.addJob("recognize",t.toDataURL())})));case 155:return je=e.sent,ce=je.map((function(e){return e.data.text})),e.next=159,Promise.all(q.map((function(e){var t=document.createElement("canvas");t.width=e.getWidth(),t.height=e.getHeight();var a=t.getContext("2d");return null===a||void 0===a||a.putImageData(e.loadImageData(),0,0),de.addJob("recognize",t.toDataURL())})));case 159:ge=e.sent,se=ge.map((function(e){return e.data.text})),de.terminate();case 162:fe=$.map((function(e,t){var a=ie[t].length&&re?ie[t].map((function(e){var t;return(null===(t=re.find((function(t){return e[0].includes(t.assetbundleName)})))||void 0===t?void 0:t.id)||-1})):[-1],r=ce.length&&Number(ce[t].replace(/.*Lv.(\d{1,2}).*/,"$1"))||1;return{id:t+1,crop:e,full:ie[t].length?ie[t].map((function(e){return"".concat("https://minio.dnaroma.eu","/sekai-assets/thumbnail/chara_rip/").concat(e[0])})):[""],hashResults:ie[t],distances:ie[t].length?ie[t].map((function(e){return e[1]})):[0],level:r,masterRank:se.length&&Math.min(Number(se[t].replace(/\D/g,"")),5)||0,cardIds:a,useIndex:0,trained:!!ie[t].length&&ie[t][0][0].includes("after_training")||r>=Ue[re.find((function(e){return e.id===a[0]})).rarity],skillLevel:1,story1Unlock:-1!==a[0],story2Unlock:-1!==a[0]&&r>=Le[re.find((function(e){return e.id===a[0]})).rarity]}})),ue(fe.filter((function(e){return 64!==e.distances[0]}))),oe(!1);case 165:case"end":return e.stop()}}),e,null,[[132,147,150,153]])}))))}}}),[re,Le,pe,Ue]),Pe=Object(d.useCallback)((function(e,t,a){var r=a.id,n=de.findIndex((function(e){return e.id===r})),i=de[n];i[t]=Number(e),ue([].concat(Object(c.a)(de.slice(0,n)),[i],Object(c.a)(de.slice(n+1))))}),[de]),Ae=Object(d.useMemo)((function(){return[{field:"id",headerName:l("common:id"),width:60},{field:"crop",headerName:l("user:profile.import_card.table.row.cropped_image"),width:100,renderCell:function(e){return Object($.jsx)("img",{src:e.value,style:{height:"64px",width:"64px"},alt:""})},align:"center"},{field:"bestMatch",headerName:l("user:profile.import_card.table.row.best_match"),width:100,renderCell:function(e){var t=e.getValue("useIndex");return(null===re||void 0===re?void 0:re.find((function(a){return a.id===e.getValue("cardIds")[t]})))?Object($.jsxs)(j.a,{container:!0,direction:"column",alignItems:"center",onClick:function(){Ie(Number(e.row.id)),ye()},children:[Object($.jsx)("img",{src:e.getValue("full")[t],style:{height:"64px",width:"64px",cursor:"pointer"},alt:"".concat((100*(1-e.getValue("distances")[t]/64)).toFixed(1),"%")}),Object($.jsx)(g.a,{children:"".concat((100*(1-e.getValue("distances")[t]/64)).toFixed(1),"%")})]}):Object($.jsx)(d.Fragment,{})},align:"center"},{field:"level",headerName:l("card:cardLevel"),width:100,renderCell:function(e){return Object($.jsx)(f.a,{value:e.value,type:"number",inputMode:"numeric",inputProps:{min:0,max:60},fullWidth:!0,onChange:function(t){return Pe(t.target.value,"level",e.row)}})}},{field:"masterRank",headerName:l("user:profile.import_card.table.row.card_master_rank"),width:100,renderCell:function(e){return Object($.jsx)(f.a,{value:e.value,type:"number",fullWidth:!0,inputMode:"numeric",inputProps:{min:0,max:5},onChange:function(t){return Pe(t.target.value,"masterRank",e.row)}})}},{field:"skillLevel",headerName:l("card:skillLevel"),width:100,renderCell:function(e){return Object($.jsx)(f.a,{value:e.value,type:"number",fullWidth:!0,inputMode:"numeric",inputProps:{min:0,max:4},onChange:function(t){return Pe(t.target.value,"skillLevel",e.row)}})}},{field:"card_states",headerName:l("user:profile.import_card.table.row.card_states"),width:250,renderCell:function(e){return Object($.jsxs)(j.a,{container:!0,direction:"column",children:[Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.getValue("trained"),onChange:function(t,a){return Pe(a,"trained",e.row)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:trained")}),Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.getValue("story1Unlock"),onChange:function(t,a){return Pe(a,"story1Unlock",e.row)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:sideStory1Unlocked")}),Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.getValue("story2Unlock"),onChange:function(t,a){return Pe(a,"story2Unlock",e.row)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:sideStory2Unlocked")})]})}}]}),[l,re,ye,Pe]),De=Object(d.useCallback)(Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R&&re){e.next=2;break}return e.abrupt("return");case 2:return xe(!0),e.prev=3,t=de.map((function(e){var t=e.cardIds[e.useIndex],a=re.find((function(e){return e.id===t})),r="rarity_birthday"!==a.cardRarityType&&a.rarity>=3;return{cardId:t,level:e.level,masterRank:e.masterRank,skillLevel:e.skillLevel,trained:r&&e.trained,trainable:r,story1Unlock:e.story1Unlock,story2Unlock:e.story2Unlock}})).sort((function(e,t){return e.cardId-t.cardId})),e.next=7,K(R.id,t);case 7:R.cardList&&R.cardList.length&&(R.cardList.forEach((function(e){t.some((function(t){return t.cardId===e.cardId}))||t.push(e)})),t.sort((function(e,t){return e.cardId-t.cardId}))),A({cardList:t}),te(l("user:profile.import_card.submit_success")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),ee(l("user:profile.import_card.submit_error"));case 15:xe(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))),[re,K,de,R,ee,te,l,A]);return Object($.jsxs)(j.a,{container:!0,direction:"column",children:[Object($.jsx)(G.a,{severity:"warning",className:e.alert,children:l("common:betaIndicator")}),Object($.jsxs)(j.a,{container:!0,spacing:1,children:[Object($.jsxs)(j.a,{item:!0,xs:12,children:[Object($.jsx)("input",{accept:"image/png,image/jpeg",className:t.inputHidden,id:"upload-member-button",type:"file",onChange:function(e){if(e.target.files&&e.target.files.length){var t=e.target.files.item(0);if(null===t||void 0===t?void 0:t.type.startsWith("image/")){var a=new FileReader;a.onload=Fe,a.readAsDataURL(t),e.target.value=""}}},disabled:ce||!re||!re.length}),Object($.jsxs)(j.a,{container:!0,alignItems:"center",spacing:1,children:[Object($.jsx)(j.a,{item:!0,children:Object($.jsx)("label",{htmlFor:"upload-member-button",children:Object($.jsx)(O.a,{variant:"outlined",component:"span",disabled:ce||!re||!re.length,startIcon:ce?Object($.jsx)(v.a,{size:24}):Object($.jsx)(U.a,{}),children:l("user:profile.import_card.import_button")})})}),Object($.jsx)(j.a,{item:!0,children:Object($.jsx)(O.a,{variant:"outlined",startIcon:Object($.jsx)(F.a,{}),onClick:function(){return Ne()},children:l("common:help")})})]})]}),Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsx)(j.a,{container:!0,children:Object($.jsx)(j.a,{item:!0,children:Object($.jsx)(y.a,{title:Object($.jsx)(g.a,{variant:"caption",style:{whiteSpace:"pre-line"},children:l("user:profile.import_card.enable_ocr_tooltip")}),arrow:!0,children:Object($.jsx)(w.a,{children:Object($.jsx)(x.a,{control:Object($.jsx)(C.a,{checked:pe,onChange:function(e){return me(e.target.checked)}}),label:l("user:profile.import_card.enable_ocr")})})})})})}),Re&&Object($.jsx)(j.a,{item:!0,xs:12,style:{height:"600px"},children:Object($.jsx)(H.a,{columns:Ae,rows:de,disableColumnFilter:!0,disableColumnReorder:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,rowHeight:100,pageSize:100})}),Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsx)(j.a,{container:!0,spacing:1,children:!Re&&de.map((function(e){return Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsx)(_.a,{variant:"outlined",style:{padding:"0.5rem"},children:Object($.jsxs)(j.a,{container:!0,spacing:1,children:[Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsxs)(j.a,{container:!0,justify:"space-around",alignItems:"center",spacing:1,children:[Object($.jsx)(j.a,{item:!0,children:Object($.jsx)("img",{src:e.crop,style:{height:"64px",width:"64px"},alt:""})}),Object($.jsx)(j.a,{item:!0,children:Object($.jsxs)(j.a,{container:!0,direction:"column",alignItems:"center",onClick:function(){Ie(Number(e.id)),ye()},children:[Object($.jsx)("img",{src:e.full[e.useIndex],style:{height:"64px",width:"64px",cursor:"pointer"},alt:"".concat((100*(1-e.distances[e.useIndex]/64)).toFixed(1),"%")}),Object($.jsx)(g.a,{children:"".concat((100*(1-e.distances[e.useIndex]/64)).toFixed(1),"%")})]})})]})}),Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsxs)(j.a,{container:!0,spacing:1,children:[Object($.jsx)(j.a,{item:!0,xs:4,children:Object($.jsx)(I.a,{value:e.level,type:"number",fullWidth:!0,inputMode:"numeric",inputProps:{min:0,max:60},label:l("card:cardLevel"),onChange:function(t){return Pe(t.target.value,"level",e)}})}),Object($.jsx)(j.a,{item:!0,xs:4,children:Object($.jsx)(I.a,{value:e.masterRank,type:"number",fullWidth:!0,inputMode:"numeric",inputProps:{min:0,max:5},label:l("user:profile.import_card.table.row.card_master_rank"),onChange:function(t){return Pe(t.target.value,"masterRank",e)}})}),Object($.jsx)(j.a,{item:!0,xs:4,children:Object($.jsx)(I.a,{value:e.skillLevel,type:"number",fullWidth:!0,inputMode:"numeric",inputProps:{min:0,max:4},label:l("card:skillLevel"),onChange:function(t){return Pe(t.target.value,"skillLevel",e)}})})]})}),Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsxs)(j.a,{container:!0,direction:"column",children:[Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.trained,onChange:function(t,a){return Pe(a,"trained",e)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:trained")}),Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.story1Unlock,onChange:function(t,a){return Pe(a,"story1Unlock",e)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:sideStory1Unlocked")}),Object($.jsx)(x.a,{control:Object($.jsx)(k.a,{checked:e.story2Unlock,onChange:function(t,a){return Pe(a,"story2Unlock",e)},style:{paddingTop:"0.1rem",paddingBottom:"0.1rem"}}),label:l("card:sideStory2Unlocked")})]})})]})})},e.id)}))})}),Object($.jsx)(j.a,{item:!0,xs:12,children:Object($.jsx)(O.a,{variant:"contained",color:"primary",disabled:!de.length||fe,onClick:De,fullWidth:!0,startIcon:fe&&Object($.jsx)(v.a,{size:24}),children:l("common:submit")})})]}),Object($.jsx)(M.a,{open:ve,onClose:function(){return ye()},children:Object($.jsxs)(S.a,{children:[Object($.jsx)(W.a,{children:l("user:profile.import_card.table.row.other_possible_result")}),Object($.jsx)(j.a,{container:!0,spacing:1,children:!!de.length&&-1!==_e&&de.find((function(e){return e.id===_e})).full.map((function(e,t){return Object($.jsx)(j.a,{item:!0,onClick:function(){var a=de.findIndex((function(e){return e.id===_e})),r=de[a];r.useIndex=t,r.trained=e.includes("after_training"),ue([].concat(Object(c.a)(de.slice(0,a)),[r],Object(c.a)(de.slice(a+1)))),ye(),Ie(-1)},children:Object($.jsxs)(j.a,{container:!0,direction:"column",alignItems:"center",children:[Object($.jsx)("img",{src:e,style:{height:"64px",width:"64px",cursor:"pointer"},alt:"".concat((100*(1-de.find((function(e){return e.id===_e})).distances[t]/64)).toFixed(1),"%")}),Object($.jsx)(g.a,{children:"".concat((100*(1-de.find((function(e){return e.id===_e})).distances[t]/64)).toFixed(1),"%")})]})},t)}))}),Object($.jsx)(W.a,{children:l("user:profile.import_card.wrong_result")}),Object($.jsx)(O.a,{color:"secondary",variant:"contained",onClick:function(){var e=de.findIndex((function(e){return e.id===_e}));ue([].concat(Object(c.a)(de.slice(0,e)),Object(c.a)(de.slice(e+1)))),ye(),Ie(-1)},children:l("common:delete")})]})}),Object($.jsxs)(q.AutoRotatingCarousel,{label:l("common:close"),autoplay:!1,mobile:J.isMobile,open:We,onClose:function(){return Ne()},onStart:function(){return Ne()},children:[Object($.jsx)(q.Slide,{className:r.slideSubtitle,media:Object($.jsx)(N.a,{image:"".concat("https://minio.dnaroma.eu","/strapi-upload/IMG_0128_a70218cb12.png"),title:"import card step 1",className:r.media}),mediaBackgroundStyle:{backgroundColor:a.palette.primary.main},style:{backgroundColor:a.palette.primary.main},title:l("user:profile.import_card.help.step1.title"),subtitle:l("user:profile.import_card.help.step1.subtitle")}),Object($.jsx)(q.Slide,{className:r.slideSubtitle,media:Object($.jsx)(N.a,{image:"".concat("https://minio.dnaroma.eu","/sekai-best-assets/import_cards/step2.png"),title:"import card step 2",className:r.media}),mediaBackgroundStyle:{backgroundColor:a.palette.primary.main},style:{backgroundColor:a.palette.primary.main},title:l("user:profile.import_card.help.step2.title"),subtitle:l("user:profile.import_card.help.step2.subtitle")}),Object($.jsx)(q.Slide,{className:r.slideSubtitle,media:Object($.jsx)(N.a,{image:"".concat("https://minio.dnaroma.eu","/sekai-best-assets/import_cards/step3.png"),title:"import card step 3",className:r.media}),mediaBackgroundStyle:{backgroundColor:a.palette.primary.main},style:{backgroundColor:a.palette.primary.main},title:l("user:profile.import_card.help.step3.title"),subtitle:l("user:profile.import_card.help.step3.subtitle")}),Object($.jsx)(q.Slide,{className:r.slideSubtitle,media:Object($.jsx)(N.a,{image:"".concat("https://minio.dnaroma.eu","/sekai-best-assets/import_cards/step4.png"),title:"import card step 4",className:r.media}),mediaBackgroundStyle:{backgroundColor:a.palette.primary.main},style:{backgroundColor:a.palette.primary.main},title:l("user:profile.import_card.help.step4.title"),subtitle:l("user:profile.import_card.help.step4.subtitle")})]})]})}}}]);