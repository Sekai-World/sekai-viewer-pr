(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[70,5],{1084:function(e,t,n){"use strict";n.r(t);var a=n(24),r=n(7),c=n(9),s=n.n(c),i=n(31),o=n(25),u=n(8),l=n(0),p=n(1032),d=n(46),b=n.n(d),f=n(299),m=n(1110),j=n(18),h=n(89),v=n(296),O=n(519),g=n(135),k=n(295),x=n(554),w=n(288),y=n(134),C=n(1061),_=n(256),S=n(241),M=n(294),L=n(213),T=n(303),P=n(500),R=n(1085),E=n(1086),I=n(1087),z=n(1088),F=n(1089),N=n(941),A=n.n(N),B=n(552),q=n(942),W=n.n(q),D=n(943),U=n(309),V=n(1);t.default=function(){var e=Object(T.a)(),t=Object(L.a)().t,n=Object(j.a)(),c=Object(l.useMemo)((function(){return new p.a}),[]),d=Object(l.useState)(),N=Object(u.a)(d,2),q=N[0],J=N[1],H=Object(l.useState)(null),G=Object(u.a)(H,2),K=G[0],X=G[1],Y=Object(l.useState)(""),Q=Object(u.a)(Y,2),Z=Q[0],$=Q[1],ee=Object(l.useState)(""),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],re=Object(l.useState)(),ce=Object(u.a)(re,2),se=ce[0],ie=ce[1],oe=Object(l.useState)([]),ue=Object(u.a)(oe,2),le=ue[0],pe=ue[1],de=Object(l.useState)(null),be=Object(u.a)(de,2),fe=be[0],me=be[1],je=Object(l.useState)([]),he=Object(u.a)(je,2),ve=he[0],Oe=he[1],ge=Object(l.useState)(null),ke=Object(u.a)(ge,2),xe=ke[0],we=ke[1],ye=Object(l.useState)(!1),Ce=Object(u.a)(ye,2),_e=Ce[0],Se=Ce[1],Me=Object(l.useState)(0),Le=Object(u.a)(Me,2),Te=Le[0],Pe=Le[1],Re=Object(l.useState)(""),Ee=Object(u.a)(Re,2),Ie=Ee[0],ze=Ee[1],Fe=Object(l.useState)(!1),Ne=Object(u.a)(Fe,2),Ae=Ne[0],Be=Ne[1],qe=Object(l.useState)(!1),We=Object(u.a)(qe,2),De=We[0],Ue=We[1],Ve=Object(l.useState)(),Je=Object(u.a)(Ve,2),He=Je[0],Ge=Je[1],Ke=Object(l.useState)(""),Xe=Object(u.a)(Ke,2),Ye=Xe[0],Qe=Xe[1],Ze=Object(l.useState)(),$e=Object(u.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(U.c)().modelList,at=Object(l.useRef)(null),rt=Object(l.useRef)(null),ct=W.a.fullscreenEnabled,st=Object(l.useCallback)((function(){if(at.current&&rt.current&&se){var e=at.current.clientWidth,t=window.innerWidth*window.devicePixelRatio>=n.breakpoints.values.md?9*e/16:4*e/3,a=e*window.devicePixelRatio,r=t*window.devicePixelRatio;se._modelSize=window.innerWidth*window.devicePixelRatio>=n.breakpoints.values.md?1.3*a:3*a,rt.current.style.width="".concat(e,"px"),rt.current.style.height="".concat(t,"px"),rt.current.width=a,rt.current.height=r,se.appear({pointX:140,pointY:60})}}),[se,n.breakpoints.values.md]);Object(l.useLayoutEffect)((function(){var e=st;return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[st]),Object(l.useLayoutEffect)((function(){document.title=t("title:live2d")}),[t]),Object(l.useLayoutEffect)((function(){return at.current&&rt.current&&(rt.current.getContext("webgl",{preserveDrawingBuffer:!0}),J(c.initialize(void 0,{wrap:at.current,canvas:rt.current}))),function(){c.release()}}),[c]),Object(l.useLayoutEffect)((function(){var e;return ct&&(e=function(){return Be(!!W.a.fullscreenElement)},W.a.addEventListener("fullscreenchange",e)),function(){e&&W.a.removeEventListener("fullscreenchange",e)}}),[ct]),Object(l.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var n,a,r,c,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q||!Z){e.next=45;break}return q.releaseAllModel(),ie(void 0),Se(!0),Pe(0),ze(t("live2d:load_progress.model_metadata")),e.next=8,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/buildmodeldata.asset"),{responseType:"json"});case 8:return n=e.sent,a=n.data,Pe(20),ze(t("live2d:load_progress.model_texture")),e.next=14,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(a.TextureNames[0]));case 14:return Pe(40),ze(t("live2d:load_progress.model_moc3")),e.next=18,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(a.Moc3FileName));case 18:return Pe(60),ze(t("live2d:load_progress.model_physics")),e.next=22,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(a.PhysicsFileName));case 22:if(Z.startsWith("normal")){e.next=32;break}return Pe(80),ze(t("live2d:load_progress.motion_metadata")),e.next=27,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/motion/").concat(ne,"_rip/BuildMotionData.json"),{responseType:"json"});case 27:c=e.sent,o=c.data,r=o,e.next=33;break;case 32:r={motions:[],expressions:[]};case 33:return Pe(90),ze(t("live2d:load_progress.display_model")),u=a.Moc3FileName.replace(".moc3.bytes",""),e.next=38,q.addModel({path:"".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/"),fileName:u,modelName:Z,modelSize:at.current.clientWidth,textures:[],motions:[].concat(Object(i.a)(r.motions.map((function(e){return{name:e,url:"".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/motion/").concat(ne,"_rip/").concat(e,".motion3.json")}}))),Object(i.a)(r.expressions.map((function(e){return{name:e,url:"".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/motion/").concat(ne,"_rip/").concat(e,".motion3.json")}})))),expressions:[]},!0);case 38:l=e.sent,pe(r.motions),Oe(r.expressions),l&&ie(l),Se(!1),Pe(0),ze("");case 45:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[q,Z,ne,t]);var it=Object(l.useCallback)(Object(o.a)(s.a.mark((function e(){var n,a,c,o,l,p,d,f,m,j,h,v,O,g,k,x,w,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se(!0),Pe(0),ze(t("live2d:pack_progress.generate_metadata")),n=new A.a,e.next=6,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/buildmodeldata.asset"),{responseType:"json"});case 6:return a=e.sent,c=a.data,o={Version:3,FileReferences:{Moc:"".concat(Z,".moc3"),Textures:["".concat(Z,".2048/texture_00.png")],Physics:"".concat(Z,".physics3.json"),Motions:[].concat(Object(i.a)(le),Object(i.a)(ve)).reduce((function(e,t){return Object.assign({},e,Object(r.a)({},t,[{File:"motions/".concat(t,".motion3.json"),FadeInTime:.5,FadeOutTime:.5}]))}),{})},Groups:[{Target:"Parameter",Name:"EyeBlink",Ids:[]},{Target:"Parameter",Name:"LipSync",Ids:[]}]},n.file("".concat(Z,".model3.json"),JSON.stringify(o,null,2)),Pe(10),ze(t("live2d:pack_progress.download_texture")),e.next=14,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(c.TextureNames[0]),{responseType:"blob"});case 14:return l=e.sent,p=l.data,n.file(o.FileReferences.Textures[0],p),Pe(20),ze(t("live2d:pack_progress.download_moc3")),e.next=21,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(c.Moc3FileName),{responseType:"blob"});case 21:return d=e.sent,f=d.data,n.file(o.FileReferences.Moc,f),Pe(30),ze(t("live2d:pack_progress.download_physics")),e.next=28,b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/model/").concat(Z,"_rip/").concat(c.PhysicsFileName),{responseType:"blob"});case 28:for(m=e.sent,j=m.data,n.file(o.FileReferences.Physics,j),Pe(40),h=Object.keys(o.FileReferences.Motions).length,O=function(){v++,ze(t("live2d:pack_progress.download_motions",{total:h,dlcount:v})),Pe(40+Math.round(v/h*50))},ze(t("live2d:pack_progress.download_motions",{total:h,dlcount:v=0})),g=[],k=function(){var e=Object(u.a)(w[x],2),t=e[0],a=e[1];g.push(b.a.get("".concat(window.isChinaMainland?"https://sekai-assets-1258184166.file.myqcloud.com":"".concat("https://minio.dnaroma.eu","/sekai-assets"),"/live2d/motion/").concat(ne,"_rip/").concat(t,".motion3.json"),{responseType:"blob"}).then((function(e){var t=e.data;O(),n.file(a[0].File,t)})))},x=0,w=Object.entries(o.FileReferences.Motions);x<w.length;x++)k();return e.next=41,Promise.all(g);case 41:return ze(t("live2d:pack_progress.generate_zip")),e.next=44,n.generateAsync({type:"blob"});case 44:y=e.sent,Object(B.saveAs)(y,"".concat(Z,".zip")),Se(!1),Pe(0),ze("");case 49:case"end":return e.stop()}}),e)}))),[ve,Z,ne,le,t]),ot=Object(l.useCallback)((function(){if(rt.current){var e=rt.current.toDataURL();Object(B.saveAs)(e)}}),[]),ut=Object(l.useCallback)(function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De){e.next=10;break}return e.next=3,He.finishAsync();case 3:n=e.sent,Object(B.saveAs)(n.blobURL),He.destroy(),Ge(void 0),Ue(!1),e.next=18;break;case 10:return Qe(t),e.next=13,D.a.createAsync(rt.current,{mimeType:t});case 13:a=e.sent,Ge(a),a.start(),tt(void 0),Ue(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[De,He]);return Object(V.jsxs)(l.Fragment,{children:[Object(V.jsx)(h.a,{variant:"h6",className:e.header,children:"Live2D"}),Object(V.jsx)(f.a,{severity:"warning",className:e.alert,children:t("common:betaIndicator")}),Object(V.jsxs)(v.a,{container:!0,spacing:1,alignItems:"center",children:[Object(V.jsx)(v.a,{item:!0,xs:9,md:4,lg:3,xl:2,children:Object(V.jsx)(m.a,{value:K,onChange:function(e,t){return X(t)},options:(null===nt||void 0===nt?void 0:nt.sort())||[],getOptionLabel:function(e){return e},renderInput:function(e){return Object(V.jsx)(O.a,Object(a.a)(Object(a.a)({},e),{},{label:t("live2d:select.model")}))}})}),Object(V.jsx)(v.a,{item:!0,xs:2,children:Object(V.jsx)(g.a,{disabled:!K||_e,variant:"contained",onClick:function(){$(K),ae(((null===K||void 0===K?void 0:K.startsWith("sub"))?K:null===K||void 0===K?void 0:K.split("_")[0])+"_motion_base")},children:t("common:show")})})]}),_e&&Object(V.jsxs)(k.a,{className:e.content,children:[Object(V.jsx)(h.a,{children:Ie}),Object(V.jsx)(x.a,{variant:"determinate",value:Te})]}),Object(V.jsxs)(k.a,{ref:at,className:e.content,children:[se&&Object(V.jsx)(w.a,{component:y.a,children:Object(V.jsxs)(v.a,{container:!0,spacing:1,alignItems:"center",children:[Object(V.jsxs)(v.a,{item:!0,children:[Object(V.jsx)(C.a,{title:t("live2d:tooltip.download"),children:Object(V.jsx)(_.a,{disabled:!se,onClick:it,children:Object(V.jsx)(P.a,{fontSize:"inherit"})})}),Object(V.jsx)(C.a,{title:t("live2d:tooltip.fullscreen"),children:Ae?Object(V.jsx)(_.a,{disabled:!ct,onClick:function(){W.a.exitFullscreen()},children:Object(V.jsx)(R.a,{fontSize:"inherit"})}):Object(V.jsx)(_.a,{disabled:!ct,onClick:function(){W.a.requestFullscreen(at.current)},children:Object(V.jsx)(E.a,{fontSize:"inherit"})})}),Object(V.jsx)(C.a,{title:t("live2d:tooltip.shot"),children:Object(V.jsx)(_.a,{disabled:!se,onClick:ot,children:Object(V.jsx)(I.a,{fontSize:"inherit"})})}),window.MediaRecorder&&Object(V.jsxs)(l.Fragment,{children:[Object(V.jsx)(C.a,{title:t(De?"live2d:tooltip.stop_record":"live2d:tooltip.start_record"),children:Object(V.jsx)(_.a,{disabled:!se,onClick:function(e){De?ut(Ye):tt(e.currentTarget)},children:De?Object(V.jsx)(z.a,{fontSize:"inherit"}):Object(V.jsx)(F.a,{fontSize:"inherit"})})}),Object(V.jsxs)(S.a,{anchorEl:et,open:!!et,onClose:function(){return tt(void 0)},children:[Object(V.jsx)(M.a,{disabled:!window.MediaRecorder.isTypeSupported("video/webm; codecs=vp8"),onClick:function(){ut("video/webm; codecs=vp8")},children:"WebM VP8"}),Object(V.jsx)(M.a,{disabled:!window.MediaRecorder.isTypeSupported("video/webm; codecs=vp9"),onClick:function(){ut("video/webm; codecs=vp9")},children:"WebM VP9"}),Object(V.jsx)(M.a,{disabled:!window.MediaRecorder.isTypeSupported("video/webm; codecs=h264"),onClick:function(){ut("video/webm; codecs=h264")},children:"WebM H.264 (MKV)"}),Object(V.jsx)(M.a,{disabled:!window.MediaRecorder.isTypeSupported("video/webm; codecs=h265"),onClick:function(){ut("video/webm; codecs=h265")},children:"WebM H.265"})]})]})]}),Object(V.jsx)(v.a,{item:!0,children:Object(V.jsxs)(v.a,{container:!0,children:[Object(V.jsx)(m.a,{value:fe,onChange:function(e,t){return me(t)},options:le,getOptionLabel:function(e){return e},renderInput:function(e){return Object(V.jsx)(O.a,Object(a.a)(Object(a.a)({},e),{},{label:t("live2d:select.motions")}))},style:{minWidth:"170px"}}),Object(V.jsx)(g.a,{disabled:!fe,variant:"contained",onClick:function(){fe&&se.startMotion({groupName:fe,no:0,priority:3,autoIdle:!1,autoAppear:!1,fadeInTime:.5,fadeOutTime:.5})},children:t("common:apply")})]})}),Object(V.jsx)(v.a,{item:!0,children:Object(V.jsxs)(v.a,{container:!0,children:[Object(V.jsx)(m.a,{value:xe,onChange:function(e,t){return we(t)},options:ve,getOptionLabel:function(e){return e},renderInput:function(e){return Object(V.jsx)(O.a,Object(a.a)(Object(a.a)({},e),{},{label:t("live2d:select.expressions")}))},style:{minWidth:"170px"}}),Object(V.jsx)(g.a,{disabled:!xe,variant:"contained",onClick:function(){xe&&se.startMotion({groupName:xe,no:0,priority:3,autoIdle:!1,autoAppear:!1,fadeInTime:.5,fadeOutTime:.5})},children:t("common:apply")})]})})]})}),Object(V.jsx)("canvas",{ref:rt})]})]})}},303:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(234),r=Object(a.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},309:function(e,t,n){"use strict";n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return O}));var a=n(8),r=n(24),c=n(9),s=n.n(c),i=n(25),o=n(46),u=n.n(o),l=n(0),p=n(97),d=n(48);function b(e){var t=Object(l.useRef)(e),n=Object(l.useMemo)((function(){var e=u.a.create({baseURL:"https://strapi.sekai.best"});return e.interceptors.request.use((function(e){return t.current&&(e.headers.authorization="Bearer ".concat(t.current)),e})),e.interceptors.response.use((function(e){return e}),(function(e){throw 401===e.response.status?t.current="":e.response.data.message&&500!==e.response.status?e.id=e.response.data.message[0].messages[0].id:500===e.response.status?(e.id=e.response.data.error,e.message=e.response.data.message):e.id=e.message,e})),e}),[t]);return{postLoginLocal:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/auth/local",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postRegisterLocal:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/auth/local/register",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getRedirectConnectLoginUrl:Object(l.useCallback)((function(e){return"".concat(n.getUri({url:"".concat("https://strapi.sekai.best","/connect/").concat(e)}))}),[n]),getConnectCallback:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/auth/".concat(t,"/callback").concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),getUserMe:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/users/me",t?{headers:{authorization:"Bearer ".concat(t)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postUpload:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/upload",t,{headers:Object.assign({"Content-Type":"multipart/form-data"},a?{authorization:"Bearer ".concat(a)}:{})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),putUserMetadataMe:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put("/user-metadata/me",Object.assign({},t,t.languages?{languages:t.languages.map((function(e){return e.id}))}:{}));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postForgotPassword:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/auth/forgot-password",{email:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postResetPassword:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/auth/reset-password",{code:t,password:a,passwordConfirmation:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[n]),getSekaiProfileMe:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/sekai-profiles/me",t?{headers:{authorization:"Bearer ".concat(t)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postSekaiProfileVerify:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/sekai-profiles/verify",{userid:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postSekaiProfileConfirm:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/sekai-profiles/".concat(t,"/confirm"),{userid:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),putSekaiProfileUpdate:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put("/sekai-profiles/".concat(t,"/update"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getLanguages:Object(l.useCallback)(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/languages?_sort=id:ASC");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[n]),getUserMetadataMe:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/user-metadata/me",t?{headers:{authorization:"Bearer ".concat(t)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getSekaiCurrentEvent:Object(l.useCallback)(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/sekai-current-event");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[n]),getSekaiProfileEventRecordMe:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/sekai-profile-event-records/me",{params:t?{eventId:t}:{}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),postSekaiProfileEventRecord:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/sekai-profile-event-records/record",{eventId:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),putSekaiCardList:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put("/sekai-profiles/".concat(t,"/cardlist"),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),deleteSekaiCardList:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.delete("/sekai-profiles/".concat(t,"/cardlist"),{params:{cards:a}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),putSekaiDeckList:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put("/sekai-profiles/".concat(t,"/decklist"),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),deleteSekaiDeckList:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.delete("/sekai-profiles/".concat(t,"/decklist"),{params:{decks:a}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),getAnnouncements:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/announcements?",{params:Object(r.a)({_sort:"isPin:DESC,published_at:DESC"},t||{})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getAnnouncementById:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/announcements/".concat(t),{params:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),getAnnouncementPage:Object(l.useCallback)(Object(i.a)(s.a.mark((function e(){var t,a,c,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:30,a=i.length>1&&void 0!==i[1]?i[1]:0,c=i.length>2?i[2]:void 0,e.next=5,n.get("/announcements",{params:Object(r.a)({_limit:t,_start:a*t,_sort:"isPin:DESC,published_at:DESC"},c||{})});case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}}),e)}))),[n]),getAnnouncementCount:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,n.get("/announcements/count",{params:t});case 3:return e.t1=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getAnnouncementByLanguagesPage:Object(l.useCallback)(Object(i.a)(s.a.mark((function e(){var t,a,c,i,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:30,a=o.length>1&&void 0!==o[1]?o[1]:0,c=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,e.next=6,n.get("/announcements/language",{params:Object(r.a)({_limit:t,_start:a*t,_sort:"isPin:DESC,published_at:DESC",targetLangs:c},i||{})});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e)}))),[n]),getAnnouncementByLanguagesCount:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,n.get("/announcements/language/count",{params:{targetLangs:t}});case 3:return e.t1=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getComments:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/comments/".concat(t,":").concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),postComment:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r,c,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/comments/".concat(t,":").concat(a),{authorUser:r,authorAvatar:c?c.url:null,content:i,related:[{refId:a,ref:t,field:"comments"}]});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),[n]),getUserProfile:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/user-metadata/profile/user/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),patchCommentLike:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.patch("/comments/".concat(t,":").concat(a,"/comment/").concat(r,"/like"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[n]),postCommentAbuse:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r,c,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/comments/".concat(t,":").concat(a,"/comment/").concat(r,"/report-abuse"),{reason:c,content:i});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),[n]),getTranslations:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/translations",{params:Object(r.a)({_limit:a,_start:t*a},c||{})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[n]),getTranslationById:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/translations/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getTranslationBySlug:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/translations/slug/".concat(a,"/").concat(t),{params:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[n]),postTranslation:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a,r,c,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post("/translations",{user:t.id,sourceSlug:a,sourceLang:r,target:c,targetLang:i});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),[n]),putTranslationId:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put("/translations/".concat(t),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),getTranslationCount:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/translations/count",{params:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getTranslationBySourceSlug:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/translations",{params:{sourceSlug:t}});case 2:return e.abrupt("return",e.sent.data[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getMusic:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/musics",{params:{musicId:t,_limit:1}});case 2:return e.abrupt("return",e.sent.data[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getCard:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/cards",{params:{cardId:t,_limit:1}});case 2:return e.abrupt("return",e.sent.data[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getEvent:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/events",{params:{eventId:t,_limit:1}});case 2:return e.abrupt("return",e.sent.data[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),getVirtualLive:Object(l.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/virtual-lives",{params:{virtualLiveId:t,_limit:1}});case 2:return e.abrupt("return",e.sent.data[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n])}}var f=function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get(t,{params:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function m(){var e=Object(l.useMemo)((function(){return{_sort:"id:ASC"}}),[]),t=Object(p.a)(["".concat("https://strapi.sekai.best","/languages"),e],f),n=t.data,a=t.error;return{languages:n,isLoading:!a&&!n,error:a}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,c=Object(l.useMemo)((function(){return Object(r.a)({_limit:t,_start:e*t,_sort:"isPin:DESC,published_at:DESC",targetLangs:n},a||{})}),[n,t,e,a]),s=Object(p.a)(["".concat("https://strapi.sekai.best","/announcements/language"),c],f),i=s.data,o=s.error;return{announcements:i,isLoading:!o&&!i,error:o}}function h(){var e=Object(d.n)(),t=Object(a.a)(e,1)[0],n=Object(p.a)("".concat("https://strapi.sekai.best","/sekai-current-event").concat("tw"===t?"-tw":""),f),r=n.data,c=n.error;return{currEvent:r,isLoading:!c&&!r,error:c}}function v(){var e=Object(p.a)("".concat(window.isChinaMainland?"https://minio.dnaroma.eu/sekai-best-assets":"".concat("https://minio.dnaroma.eu","/sekai-best-assets"),"/models.json"),f),t=e.data,n=e.error;return{modelList:t,isLoading:!n&&!t,error:n}}function O(e){var t=Object(l.useMemo)((function(){return{tier:e}}),[e]),n=Object(p.a)(["".concat("https://strapi.sekai.best","/patrons"),t],f),a=n.data,r=n.error;return{patrons:a,isLoading:!r&&!a,error:r}}}}]);