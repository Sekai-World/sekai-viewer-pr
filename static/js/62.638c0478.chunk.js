(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[62],{1117:function(e,t,a){"use strict";a.r(t);var c=a(31),n=a(8),r=a(89),i=a(295),s=a(296),o=a(303),j=a(0),l=a(48),b=a(329),d=a(213),u=a(234),O=a(345),m=a(366),h=a(386),f=a(297),x=a(17),g=a(41),p=a(307),v=a(350),y=a(1),N=Object(u.a)((function(e){return{media:{paddingTop:"56.25%",backgroundSize:"contain",position:"relative"},card:{cursor:"pointer"},subheader:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"260px"}}})),w=function(e){var t=e.data,a=N(),c=Object(x.j)().path,i=Object(l.n)(),s=Object(n.a)(i,1)[0],o=Object(j.useState)(""),b=Object(n.a)(o,2),d=b[0],u=b[1];return Object(j.useEffect)((function(){t&&Object(l.c)("gacha/".concat(t.assetbundleName,"/logo_rip/logo.webp"),u,window.isChinaMainland?"cn":"ww",s)}),[t,s]),t?Object(y.jsx)(g.b,{to:c+"/"+t.id,style:{textDecoration:"none"},children:Object(y.jsxs)(O.a,{className:a.card,children:[Object(y.jsx)(h.a,{className:a.media,image:d,title:t.name,children:Object(y.jsx)(v.a,{style:{position:"absolute",top:"1%",left:"1%"},releaseTime:new Date(t.startAt)})}),Object(y.jsxs)(m.a,{style:{paddingBottom:"16px"},children:[Object(y.jsx)(p.b,{contentKey:"gacha_name:".concat(t.id),original:t.name,originalProps:{variant:"subtitle1",className:a.subheader},translatedProps:{variant:"subtitle1",className:a.subheader}}),Object(y.jsxs)(r.a,{variant:"body2",color:"textSecondary",children:[new Date(t.startAt).toLocaleString()," ~"]}),Object(y.jsx)(r.a,{variant:"body2",color:"textSecondary",children:new Date(t.endAt).toLocaleString()})]})]})}):Object(y.jsxs)(O.a,{className:a.card,children:[Object(y.jsx)(f.a,{variant:"rect",className:a.media}),Object(y.jsx)(m.a,{children:Object(y.jsx)(r.a,{variant:"subtitle1",className:a.subheader,children:Object(y.jsx)(f.a,{variant:"text",width:"90%"})})})]})},C=a(547),k=a(548),T=a(549),_=a(550),S=a(498),P=a(514),z=a(489),E=a(551),A=a.n(E),D=a(37);var I=w;t.default=function(){var e=Object(o.a)(),t=Object(d.a)().t,a=Object(j.useContext)(D.a).isShowSpoiler,u=Object(j.useState)([]),O=Object(n.a)(u,2),m=O[0],h=O[1],f=Object(l.g)("gachas"),x=Object(n.a)(f,1)[0],g=Object(j.useState)(1),p=Object(n.a)(g,2),v=p[0],N=p[1],w=Object(j.useState)(12),E=Object(n.a)(w,1)[0],L=Object(j.useState)(!0),B=Object(n.a)(L,2),W=B[0],K=B[1],M=Object(j.useState)(!1),F=Object(n.a)(M,2),J=F[0],R=F[1],V=Object(l.h)("gacha-list-update-sort","desc"),Q=Object(n.a)(V,2),q=Q[0],G=Q[1],H=Object(l.h)("gacha-list-filter-sort-by","startAt"),U=Object(n.a)(H,2),X=U[0],Y=U[1],Z=Object(j.useState)([]),$=Object(n.a)(Z,2),ee=$[0],te=$[1];Object(j.useEffect)((function(){document.title=t("title:gachaList")}),[t]),Object(j.useEffect)((function(){h((function(e){return[].concat(Object(c.a)(e),Object(c.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(ee,v,E)))})),K(!0)}),[v,E,K,ee]),Object(j.useEffect)((function(){if(x&&x.length){var e=Object(c.a)(x);a||(e=e.filter((function(e){return e.startAt<=(new Date).getTime()}))),"desc"===q?e=e.sort((function(e,t){return t[X]-e[X]})):"asc"===q&&(e=e.sort((function(e,t){return e[X]-t[X]}))),te(e),h([]),N(0)}}),[x,N,q,X,a]),Object(j.useEffect)((function(){R(Boolean(x&&x.length))}),[R,x]);var ae=Object(j.useCallback)((function(e,t){J&&(e[0].isIntersecting&&W&&(!ee.length||ee.length>v*E)?(N((function(e){return e+1})),K(!1)):ee.length&&ee.length<=v*E&&t(!1))}),[J,W,E,v,ee.length]),ce=Object(j.useCallback)((function(e,t){G(t||"asc")}),[G]),ne=Object(j.useCallback)((function(e,t){Y(t||"id")}),[Y]);return Object(y.jsxs)(j.Fragment,{children:[Object(y.jsx)(r.a,{variant:"h6",className:e.header,children:t("common:gacha")}),Object(y.jsxs)(i.a,{className:e.content,children:[Object(y.jsxs)(s.a,{container:!0,spacing:1,children:[Object(y.jsx)(s.a,{item:!0,children:Object(y.jsxs)(P.a,{value:q,color:"primary",exclusive:!0,onChange:ce,children:[Object(y.jsx)(z.a,{value:"asc",children:"asc"===q?Object(y.jsx)(C.a,{}):Object(y.jsx)(k.a,{})}),Object(y.jsx)(z.a,{value:"desc",children:"desc"===q?Object(y.jsx)(T.a,{}):Object(y.jsx)(_.a,{})})]})}),Object(y.jsx)(s.a,{item:!0,children:Object(y.jsxs)(P.a,{size:"medium",value:X,color:"primary",exclusive:!0,onChange:ne,children:[Object(y.jsx)(z.a,{value:"id",children:Object(y.jsx)(A.a,{})}),Object(y.jsx)(z.a,{value:"startAt",children:Object(y.jsx)(S.a,{})})]})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{ViewComponent:I,callback:ae,data:m,gridSize:{xs:12,sm:6,md:4,lg:3}})]})]})}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(234),n=Object(c.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},307:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return O}));var c=a(8),n=a(24),r=a(89),i=a(296),s=a(0),o=a(37),j=a(48),l=a(49),b=a(1),d=function(e){var t=e.contentKey,a=e.original,c=e.originalProps,j=e.translatedProps,d=e.assetTOptions,u=Object(s.useContext)(o.a).contentTransMode,O=Object(l.b)().assetT;switch(u){case"original":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{children:a}));case"translated":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textPrimary",children:O(t,a,d)}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{color:"textPrimary",children:a})),Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textSecondary",children:O(t,a,d)}))]})}},u=function(e){var t=e.characterId,a=e.originalProps,d=e.translatedProps,u=e.assetTOptions,O=Object(s.useContext)(o.a).contentTransMode,m=Object(j.g)("gameCharacters"),h=Object(c.a)(m,1)[0],f=Object(l.b)(),x=f.assetT,g=f.assetI18n,p=Object(s.useState)(),v=Object(c.a)(p,2),y=v[0],N=v[1];if(Object(s.useEffect)((function(){h&&N(h.find((function(e){return e.id===t})))}),[h,t]),!y)return Object(b.jsx)(r.a,{});switch(O){case"original":return Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{color:"textPrimary",children:[y.firstName," ",y.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(g.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,u):""," ",x("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[x("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,u):""]}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{children:[y.firstName," ",y.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(g.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,u):""," ",x("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[x("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,u):""]}))]})}},O=function(e){var t=e.releaseCondId,a=e.originalProps,n=e.translatedProps,r=e.assetTOptions,i=Object(j.g)("releaseConditions"),o=Object(c.a)(i,1)[0],l=Object(s.useState)(),u=Object(c.a)(l,2),O=u[0],m=u[1];if(Object(s.useEffect)((function(){o&&m(o.find((function(e){return e.id===t})))}),[t,o]),O){var h="";switch(O.releaseConditionType){case"none":h="release_cond:none_".concat(O.id);break;case"card_level":h="release_cond:card_level",r=Object.assign({},r,{level:O.releaseConditionTypeLevel});break;case"unit_rank":h="release_cond:unit_rank_".concat(O.releaseConditionTypeId),r=Object.assign({},r,{rank:O.releaseConditionTypeLevel});break;case"event_point":h="release_cond:event_point",r=Object.assign({},r,{point:O.releaseConditionTypeQuantity});break;default:h="release_cond:".concat(O.releaseConditionType)}return Object(b.jsx)(d,{contentKey:h,original:O.sentence,originalProps:a,translatedProps:n,assetTOptions:r})}return Object(b.jsx)("div",{})}},329:function(e,t,a){"use strict";var c=a(8),n=a(24),r=a(18),i=a(260),s=a(296),o=a(0),j=a(1),l=["xs","sm","md","lg","xl"],b={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,d=e.data,u=e.gridSize,O=e.viewProps,m=e.onComponentClick,h=function(e){var t=Object(n.a)({},e||b);return l.forEach((function(e,a,c){t[e]||(t[e]=a>0?t[c[a-1]]:12)})),t}(u),f=function(){var e=Object(r.a)();return l.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||l[l.length-1]}(),x=Object(o.useState)(!0),g=Object(c.a)(x,2),p=g[0],v=g[1],y=Object(o.useCallback)((function(e){return a(e,v)}),[a]),N=Object(o.useRef)(null);Object(o.useEffect)((function(){v(!0)}),[d]),Object(o.useEffect)((function(){var e=new IntersectionObserver(y,{threshold:.5}),t=N.current;return t&&e.observe(t),function(){t&&e.disconnect()}}),[y]);var w=12/h[f],C=d.length?w:2*w;return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)(s.a,{container:!0,direction:"row",spacing:1,children:d.length?d.map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:h.xs,sm:h.sm,md:h.md,lg:h.lg,xl:h.xl,onClick:function(){m&&m(e)},children:Object(j.jsx)(t,Object(n.a)({data:e,index:a},O))},e.id)})):null}),Object(j.jsx)(s.a,{container:!0,direction:"row",ref:N,style:{display:p?"flex":"none",paddingTop:"4px"},spacing:1,children:Array.from({length:C}).map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:h.xs,sm:h.sm,md:h.md,lg:h.lg,xl:h.xl,children:Object(j.jsx)(t,{})},"empty-".concat(a))}))})]})}},350:function(e,t,a){"use strict";var c=a(334),n=a(516),r=(a(0),a(213)),i=a(1);t.a=function(e){var t=e.releaseTime,a=e.style,s=Object(r.a)().t;return new Date<t?Object(i.jsx)(c.a,{style:a,color:"secondary",label:s("common:spoiler"),icon:Object(i.jsx)(n.a,{})}):null}}}]);