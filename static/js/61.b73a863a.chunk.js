(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[61],{1118:function(e,t,a){"use strict";a.r(t);var n=a(31),c=a(8),r=a(89),i=a(295),s=a(296),o=a(303),j=a(0),l=a(48),b=a(329),d=a(213),O=a(234),u=a(345),m=a(366),f=a(386),g=a(297),x=a(17),h=a(41),p=a(49),v=a(307),y=a(350),N=a(1),w=Object(O.a)((function(e){return{media:{paddingTop:"56.25%",backgroundSize:"contain",position:"relative"},card:{cursor:"pointer"},header:{},"grid-out":{padding:e.spacing("1%","2%")}}})),C=function(e){var t=e.data,a=w(),n=Object(d.a)().t,i=Object(p.b)().getTranslated,o=Object(x.j)().path,b=Object(l.n)(),O=Object(c.a)(b,1)[0],C=Object(j.useState)(""),S=Object(c.a)(C,2),T=S[0],_=S[1];return Object(j.useEffect)((function(){t&&Object(l.c)("event/".concat(t.assetbundleName,"/logo_rip/logo.webp"),_,window.isChinaMainland?"cn":"ww",O)}),[t,O]),t?Object(N.jsx)(h.b,{to:o+"/"+t.id,style:{textDecoration:"none"},children:Object(N.jsxs)(u.a,{className:a.card,children:[Object(N.jsx)(f.a,{className:a.media,image:T,title:i("event_name:".concat(t.id),t.name),children:Object(N.jsx)(y.a,{style:{position:"absolute",top:"1%",left:"1%"},releaseTime:new Date(t.startAt)})}),Object(N.jsx)(m.a,{style:{paddingBottom:"16px"},children:Object(N.jsxs)(s.a,{container:!0,direction:"column",spacing:1,children:[Object(N.jsx)(s.a,{item:!0,children:Object(N.jsx)(v.b,{contentKey:"event_name:".concat(t.id),original:t.name,originalProps:{variant:"subtitle1",className:a.header}})}),Object(N.jsxs)(s.a,{item:!0,children:[Object(N.jsx)(r.a,{variant:"body2",color:"textSecondary",children:n("event:type.".concat(t.eventType))}),Object(N.jsxs)(r.a,{variant:"body2",color:"textSecondary",children:[new Date(t.startAt).toLocaleString()," ~"]}),Object(N.jsx)(r.a,{variant:"body2",color:"textSecondary",children:new Date(t.aggregateAt).toLocaleString()})]})]})})]})}):Object(N.jsxs)(u.a,{className:a.card,children:[Object(N.jsx)(g.a,{variant:"rect",className:a.media}),Object(N.jsxs)(m.a,{children:[Object(N.jsx)(r.a,{variant:"subtitle1",className:a.header,children:Object(N.jsx)(g.a,{variant:"text",width:"90%"})}),Object(N.jsx)(r.a,{variant:"body2",children:Object(N.jsx)(g.a,{variant:"text",width:"40%"})})]})]})},S=a(547),T=a(548),_=a(549),k=a(550),P=a(498),z=a(514),E=a(489),A=a(551),I=a.n(A),D=a(37);var L={grid:C};t.default=function(){var e=Object(o.a)(),t=Object(d.a)().t,a=Object(j.useContext)(D.a).isShowSpoiler,O=Object(l.g)("events"),u=Object(c.a)(O,1)[0],m=Object(j.useState)([]),f=Object(c.a)(m,2),g=f[0],x=f[1],h=Object(j.useState)(localStorage.getItem("event-list-grid-view-type")||"grid"),p=Object(c.a)(h,1)[0],v=Object(j.useState)(1),y=Object(c.a)(v,2),w=y[0],C=y[1],A=Object(j.useState)(12),B=Object(c.a)(A,1)[0],W=Object(j.useState)(!0),K=Object(c.a)(W,2),M=K[0],F=K[1],J=Object(j.useState)(!1),R=Object(c.a)(J,2),V=R[0],Q=R[1],q=Object(l.h)("event-list-update-sort","desc"),G=Object(c.a)(q,2),H=G[0],U=G[1],X=Object(l.h)("event-list-filter-sort-by","startAt"),Y=Object(c.a)(X,2),Z=Y[0],$=Y[1],ee=Object(j.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1];Object(j.useEffect)((function(){document.title=t("title:eventList")}),[t]),Object(j.useEffect)((function(){x((function(e){return[].concat(Object(n.a)(e),Object(n.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(ae,w,B)))})),F(!0)}),[w,B,F,ae]),Object(j.useEffect)((function(){if(u&&u.length){var e=Object(n.a)(u);a||(e=e.filter((function(e){return e.startAt<=(new Date).getTime()}))),"desc"===H?e=e.sort((function(e,t){return t[Z]-e[Z]})):"asc"===H&&(e=e.sort((function(e,t){return e[Z]-t[Z]}))),ne(e),x([]),C(0)}}),[u,C,H,Z,a]),Object(j.useEffect)((function(){Q(Boolean(u&&u.length))}),[Q,u]);var ce=Object(j.useCallback)((function(e,t){V&&(e[0].isIntersecting&&M&&(!ae.length||ae.length>w*B)?(C((function(e){return e+1})),F(!1)):ae.length&&ae.length<=w*B&&t(!1))}),[V,M,B,w,ae.length]),re=Object(j.useCallback)((function(e,t){U(t||"asc")}),[U]),ie=Object(j.useCallback)((function(e,t){$(t||"id")}),[$]);return Object(N.jsxs)(j.Fragment,{children:[Object(N.jsx)(r.a,{variant:"h6",className:e.header,children:t("common:event")}),Object(N.jsxs)(i.a,{className:e.content,children:[Object(N.jsxs)(s.a,{container:!0,spacing:1,children:[Object(N.jsx)(s.a,{item:!0,children:Object(N.jsxs)(z.a,{value:H,color:"primary",exclusive:!0,onChange:re,children:[Object(N.jsx)(E.a,{value:"asc",children:"asc"===H?Object(N.jsx)(S.a,{}):Object(N.jsx)(T.a,{})}),Object(N.jsx)(E.a,{value:"desc",children:"desc"===H?Object(N.jsx)(_.a,{}):Object(N.jsx)(k.a,{})})]})}),Object(N.jsx)(s.a,{item:!0,children:Object(N.jsxs)(z.a,{size:"medium",value:Z,color:"primary",exclusive:!0,onChange:ie,children:[Object(N.jsx)(E.a,{value:"id",children:Object(N.jsx)(I.a,{})}),Object(N.jsx)(E.a,{value:"startAt",children:Object(N.jsx)(P.a,{})})]})})]}),Object(N.jsx)("br",{}),Object(N.jsx)(b.a,{ViewComponent:L[p],callback:ce,data:g,gridSize:{grid:{xs:12,sm:6,md:4,lg:3},agenda:{xs:12},comfy:{xs:12}}[p]})]})]})}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(234),c=Object(n.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},307:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return O})),a.d(t,"c",(function(){return u}));var n=a(8),c=a(24),r=a(89),i=a(296),s=a(0),o=a(37),j=a(48),l=a(49),b=a(1),d=function(e){var t=e.contentKey,a=e.original,n=e.originalProps,j=e.translatedProps,d=e.assetTOptions,O=Object(s.useContext)(o.a).contentTransMode,u=Object(l.b)().assetT;switch(O){case"original":return Object(b.jsx)(r.a,Object(c.a)(Object(c.a)({},n),{},{children:a}));case"translated":return Object(b.jsx)(r.a,Object(c.a)(Object(c.a)({},j),{},{color:"textPrimary",children:u(t,a,d)}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsx)(r.a,Object(c.a)(Object(c.a)({},n),{},{color:"textPrimary",children:a})),Object(b.jsx)(r.a,Object(c.a)(Object(c.a)({},j),{},{color:"textSecondary",children:u(t,a,d)}))]})}},O=function(e){var t=e.characterId,a=e.originalProps,d=e.translatedProps,O=e.assetTOptions,u=Object(s.useContext)(o.a).contentTransMode,m=Object(j.g)("gameCharacters"),f=Object(n.a)(m,1)[0],g=Object(l.b)(),x=g.assetT,h=g.assetI18n,p=Object(s.useState)(),v=Object(n.a)(p,2),y=v[0],N=v[1];if(Object(s.useEffect)((function(){f&&N(f.find((function(e){return e.id===t})))}),[f,t]),!y)return Object(b.jsx)(r.a,{});switch(u){case"original":return Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({},a),{},{color:"textPrimary",children:[y.firstName," ",y.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(h.language)?Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({},d),{},{color:"textPrimary",children:[y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,O):""," ",x("character_name:".concat(t,".givenName"),y.givenName,O)]})):Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({},d),{},{color:"textPrimary",children:[x("character_name:".concat(t,".givenName"),y.givenName,O)," ",y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,O):""]}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({},a),{},{children:[y.firstName," ",y.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(h.language)?Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({color:"textSecondary"},d),{},{children:[y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,O):""," ",x("character_name:".concat(t,".givenName"),y.givenName,O)]})):Object(b.jsxs)(r.a,Object(c.a)(Object(c.a)({color:"textSecondary"},d),{},{children:[x("character_name:".concat(t,".givenName"),y.givenName,O)," ",y.firstName?x("character_name:".concat(t,".firstName"),y.firstName,O):""]}))]})}},u=function(e){var t=e.releaseCondId,a=e.originalProps,c=e.translatedProps,r=e.assetTOptions,i=Object(j.g)("releaseConditions"),o=Object(n.a)(i,1)[0],l=Object(s.useState)(),O=Object(n.a)(l,2),u=O[0],m=O[1];if(Object(s.useEffect)((function(){o&&m(o.find((function(e){return e.id===t})))}),[t,o]),u){var f="";switch(u.releaseConditionType){case"none":f="release_cond:none_".concat(u.id);break;case"card_level":f="release_cond:card_level",r=Object.assign({},r,{level:u.releaseConditionTypeLevel});break;case"unit_rank":f="release_cond:unit_rank_".concat(u.releaseConditionTypeId),r=Object.assign({},r,{rank:u.releaseConditionTypeLevel});break;case"event_point":f="release_cond:event_point",r=Object.assign({},r,{point:u.releaseConditionTypeQuantity});break;default:f="release_cond:".concat(u.releaseConditionType)}return Object(b.jsx)(d,{contentKey:f,original:u.sentence,originalProps:a,translatedProps:c,assetTOptions:r})}return Object(b.jsx)("div",{})}},329:function(e,t,a){"use strict";var n=a(8),c=a(24),r=a(18),i=a(260),s=a(296),o=a(0),j=a(1),l=["xs","sm","md","lg","xl"],b={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,d=e.data,O=e.gridSize,u=e.viewProps,m=e.onComponentClick,f=function(e){var t=Object(c.a)({},e||b);return l.forEach((function(e,a,n){t[e]||(t[e]=a>0?t[n[a-1]]:12)})),t}(O),g=function(){var e=Object(r.a)();return l.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||l[l.length-1]}(),x=Object(o.useState)(!0),h=Object(n.a)(x,2),p=h[0],v=h[1],y=Object(o.useCallback)((function(e){return a(e,v)}),[a]),N=Object(o.useRef)(null);Object(o.useEffect)((function(){v(!0)}),[d]),Object(o.useEffect)((function(){var e=new IntersectionObserver(y,{threshold:.5}),t=N.current;return t&&e.observe(t),function(){t&&e.disconnect()}}),[y]);var w=12/f[g],C=d.length?w:2*w;return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)(s.a,{container:!0,direction:"row",spacing:1,children:d.length?d.map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl,onClick:function(){m&&m(e)},children:Object(j.jsx)(t,Object(c.a)({data:e,index:a},u))},e.id)})):null}),Object(j.jsx)(s.a,{container:!0,direction:"row",ref:N,style:{display:p?"flex":"none",paddingTop:"4px"},spacing:1,children:Array.from({length:C}).map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:f.xs,sm:f.sm,md:f.md,lg:f.lg,xl:f.xl,children:Object(j.jsx)(t,{})},"empty-".concat(a))}))})]})}},350:function(e,t,a){"use strict";var n=a(334),c=a(516),r=(a(0),a(213)),i=a(1);t.a=function(e){var t=e.releaseTime,a=e.style,s=Object(r.a)().t;return new Date<t?Object(i.jsx)(n.a,{style:a,color:"secondary",label:s("common:spoiler"),icon:Object(i.jsx)(c.a,{})}):null}}}]);