(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[64],{1112:function(e,t,c){"use strict";c.r(t);var a=c(8),r=c(234),n=c(89),i=c(1115),s=c(296),o=c(345),l=c(366),d=c(385),j=c(0),b=c(213),u=c(17),h=c(41),O=c(312),x=c(303),m=c(48),p=c(49),f=c(310),v=c(307),y=c(24),g=c(3),N=c(311),_=c.n(N),S=c(1),w=function(e){var t=e.src,c=e.directSrc,r=void 0!==c&&c,n=e.region,i=void 0===n?"jp":n,s=Object(g.a)(e,["src","directSrc","region"]),o=Object(j.useState)(!1),l=Object(a.a)(o,2),d=l[0],b=l[1],u=Object(j.useState)(t),h=Object(a.a)(u,2),O=h[0],x=h[1];return Object(j.useEffect)((function(){r?b(!0):Object(m.c)(t,(function(e){x(e),b(!0)}),window.isChinaMainland?"cn":"ww",i)}),[r,i,t]),d?Object(S.jsx)(_.a,Object(y.a)({src:O},s)):null},I=c(295),T=c(134),C=c(334),k=c(554),P=c(30),D=c(499),H=Object(r.a)((function(e){return{episodeBanner:{padding:e.spacing(1.5,0)}}})),A=function(e){var t=e.storyType,c=e.storyId,r=Object(x.a)(),i=H(),o=Object(b.a)().t,l=Object(p.b)().getTranslated,d=Object(m.k)(),u=Object(m.f)().showError,h=Object(m.g)("unitStories"),O=Object(a.a)(h,1)[0],y=Object(m.g)("eventStories"),g=Object(a.a)(y,1)[0],N=Object(m.g)("characterProfiles"),w=Object(a.a)(N,1)[0],A=Object(m.g)("cardEpisodes"),E=Object(a.a)(A,1)[0],M=Object(m.g)("actionSets"),R=Object(a.a)(M,1)[0],K=Object(j.useState)(""),V=Object(a.a)(K,2),B=V[0],z=V[1],W=Object(j.useState)(""),U=Object(a.a)(W,2),F=U[0],L=U[1],J=Object(j.useState)(""),G=Object(a.a)(J,2),Q=G[0],q=G[1],X=Object(j.useState)({characters:[],actions:[]}),Y=Object(a.a)(X,2),Z=Y[0],$=Y[1],ee=Object(j.useState)(0),te=Object(a.a)(ee,2),ce=te[0],ae=te[1];return Object(j.useEffect)((function(){$({characters:[],actions:[]});try{switch(t){case"unitStory":if(O){var e=c.split("/"),r=Object(a.a)(e,6),n=r[3],i=r[4],s=r[5],j=O.find((function(e){return e.unit===n})).chapters.find((function(e){return e.chapterNo===Number(i)})),b=j.episodes.find((function(e){return e.episodeNo===Number(s)}));Object(m.c)("story/episode_image/".concat(j.assetbundleName,"_rip/").concat(b.assetbundleName,".webp"),z,window.isChinaMainland?"cn":"ww"),d("scenario/unitstory/".concat(j.assetbundleName,"_rip/").concat(b.scenarioId,".asset"),!1).then((function(e){return $(e)})),L(l("unit_story_chapter_title:".concat(j.unit,"-").concat(j.chapterNo),j.title)),q(l("unit_story_episode_title:".concat(b.unit,"-").concat(b.chapterNo,"-").concat(b.episodeNo),b.title)),ae(b.releaseConditionId)}break;case"eventStory":if(g){var h=c.split("/"),x=Object(a.a)(h,5),p=x[3],v=x[4],y=g.find((function(e){return e.eventId===Number(p)})),N=y.eventStoryEpisodes.find((function(e){return e.episodeNo===Number(v)}));Object(m.c)("event_story/".concat(y.assetbundleName,"/episode_image_rip/").concat(N.assetbundleName,".webp"),z,window.isChinaMainland?"cn":"ww"),d("event_story/".concat(y.assetbundleName,"/scenario_rip/").concat(N.scenarioId,".asset"),!1).then((function(e){return $(e)})),L(""),q("".concat(N.episodeNo," - ").concat(l("event_story_episode_title:".concat(N.eventStoryId,"-").concat(N.episodeNo),N.title))),ae(N.releaseConditionId)}break;case"charaStory":if(w){var _=c.split("/"),S=Object(a.a)(_,4)[3],I=w.find((function(e){return e.characterId===Number(S)}));z(f.h["CharaIcon".concat(S)]),d("scenario/profile_rip/".concat(I.scenarioId,".asset"),!1).then((function(e){return $(e)})),L(""),q(o("member:introduction")),ae(0)}break;case"cardStory":if(E){var T=c.split("/"),C=Object(a.a)(T,6)[5],k=E.find((function(e){return e.id===Number(C)}));Object(m.c)("character/member_small/".concat(k.assetbundleName,"_rip/card_normal.webp"),z,window.isChinaMainland?"cn":"ww"),d("character/member/".concat(k.assetbundleName,"_rip/").concat(k.scenarioId,".asset"),!0).then((function(e){return $(e)})),L(""),q(l("card_episode_title:".concat(k.title),k.title)),ae(k.releaseConditionId)}break;case"areaTalk":if(R){var P=c.split("/"),D=Object(a.a)(P,5)[4],H=R.find((function(e){return e.id===Number(D)}));d("scenario/actionset/group".concat(Math.floor(H.id/100),"_rip/").concat(H.scenarioId,".asset"),!1,!0).then((function(e){return $(e)})),L(""),q("")}}}catch(A){u("failed to load episode")}}),[O,g,c,t,d,w,E,o,l,u,R]),Object(S.jsxs)(I.a,{className:r.content,children:["areaTalk"!==t&&Object(S.jsx)(T.a,{className:i.episodeBanner,children:Object(S.jsxs)(s.a,{container:!0,spacing:1,justify:"space-around",children:[Object(S.jsx)(s.a,{item:!0,xs:"charaStory"===t?6:8,sm:"charaStory"===t?3:4,lg:"charaStory"===t?2:3,children:Object(S.jsx)(_.a,{src:B,color:"",aspectRatio:"charaStory"===t?1:"cardStory"===t?1.774:1.944})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,children:Object(S.jsxs)(s.a,{container:!0,spacing:1,alignItems:"center",justify:"center",style:{height:"100%"},children:[F?Object(S.jsx)(s.a,{item:!0,xs:12,children:Object(S.jsx)(n.a,{align:"center",children:F})}):null,Object(S.jsx)(s.a,{item:!0,xs:12,children:Object(S.jsx)(n.a,{align:"center",children:Q})}),ce?Object(S.jsx)(s.a,{item:!0,xs:12,children:Object(S.jsxs)(s.a,{container:!0,alignItems:"center",justify:"center",spacing:1,children:[Object(S.jsx)(s.a,{item:!0,children:Object(S.jsx)(C.a,{label:o("common:releaseCondition")})}),Object(S.jsx)(s.a,{item:!0,children:Object(S.jsx)(v.c,{releaseCondId:ce,originalProps:{align:"center"},translatedProps:{align:"center"}})})]})}):null]})})]})}),!Z.actions.length&&Object(S.jsx)(k.a,{variant:"indeterminate"}),Z.actions.map((function(e,t){switch(e.type){case P.b.Talk:return Object(S.jsx)(D.d,{characterId:e.chara.id,characterName:e.chara.name,text:e.body,voiceUrl:e.voice},"action-".concat(t));case P.b.SpecialEffect:return Object(S.jsx)(D.c,{seType:e.seType,text:e.body,resource:e.resource},"action-".concat(t));case P.b.Sound:return Object(S.jsx)(D.b,{hasBgm:e.hasBgm,hasSe:e.hasSe,voiceUrl:e.hasBgm?e.bgm:e.se},"action-".concat(t));default:return null}}))]})},E=Object(r.a)((function(e){return{selectCard:{"&:hover":{cursor:"pointer",border:"1px solid rgba(255, 255, 255, 0.12)"}}}}));t.default=function(){var e=E(),t=Object(x.a)(),c=Object(O.a)(),r=Object(b.a)().t,y=Object(p.b)().getTranslated,g=Object(p.c)(),N=Object(u.j)().path,_=Object(m.n)(),I=Object(a.a)(_,1)[0],T=Object(m.g)("unitProfiles"),C=Object(a.a)(T,1)[0],k=Object(m.g)("unitStories"),P=Object(a.a)(k,1)[0],D=Object(m.g)("eventStories"),H=Object(a.a)(D,1)[0],M=Object(m.g)("events"),R=Object(a.a)(M,1)[0],K=Object(m.g)("characterProfiles"),V=Object(a.a)(K,1)[0],B=Object(m.g)("cardEpisodes"),z=Object(a.a)(B,1)[0],W=Object(m.g)("cards"),U=Object(a.a)(W,1)[0],F=Object(m.g)("areas"),L=Object(a.a)(F,1)[0],J=Object(m.g)("actionSets"),G=Object(a.a)(J,1)[0],Q=Object(m.g)("character2ds"),q=Object(a.a)(Q,1)[0],X=Object(j.useMemo)((function(){return{storyreader:r("common:storyReader"),eventStory:r("story_reader:selectValue.eventStory"),unitStory:r("story_reader:selectValue.unitStory"),charaStory:r("story_reader:selectValue.charaStory"),cardStory:r("story_reader:selectValue.cardStory"),areaTalk:r("story_reader:selectValue.areaTalk"),liveTalk:r("story_reader:selectValue.liveTalk")}}),[r]);return Object(S.jsxs)(j.Fragment,{children:[Object(S.jsx)(n.a,{variant:"h6",className:t.header,children:r("common:storyReader")}),Object(S.jsx)(u.b,{children:function(e){var t=e.location.pathname.split("/").filter((function(e){return e}));return Object(S.jsx)(i.a,{children:t.map((function(e,a){var r=a===t.length-1,i="/".concat(t.slice(0,a+1).join("/")),s=X[e];if(!s&&a>=2)switch(t[1]){case"eventStory":if(R&&2===a){var o=R.find((function(t){return t.id===Number(e)}));o&&(s=y("event_name:".concat(e),o.name))}if(H&&3===a){var l=H.find((function(e){return e.eventId===Number(t[2])}));if(l){var d=l.eventStoryEpisodes.find((function(t){return t.episodeNo===Number(e)}));d&&(s=y("event_story_episode_title:".concat(d.eventStoryId,"-").concat(d.episodeNo),d.title))}}break;case"unitStory":if(C&&2===a){var j=C.find((function(t){return t.unit===e}));j&&(s=y("unit_profile:".concat(j.unit,".name"),j.unitName))}if(P){var b=P.find((function(e){return e.unit===t[2]}));if(b&&3===a){var u=b.chapters.find((function(t){return t.chapterNo===Number(e)}));u&&(s=y("unit_story_chapter_title:".concat(u.unit,"-").concat(u.chapterNo),u.title))}if(b&&4===a){var O=b.chapters.find((function(e){return e.chapterNo===Number(t[3])}));if(O){var x=O.episodes.find((function(t){return t.episodeNo===Number(e)}));x&&(s=y("unit_story_episode_title:".concat(x.unit,"-").concat(x.chapterNo,"-").concat(x.episodeNo),x.title))}}}break;case"charaStory":if(V&&2===a){var m=V.find((function(t){return t.characterId===Number(e)}));m&&(s=g(m.characterId)||"")}break;case"cardStory":if(V&&2===a){var p=V.find((function(t){return t.characterId===Number(e)}));p&&(s=g(p.characterId)||"")}if(U&&3===a){var f=U.find((function(t){return t.id===Number(e)}));f&&(s=y("card_prefix:".concat(f.id),f.prefix))}if(z&&4===a){var v=z.find((function(t){return t.id===Number(e)}));v&&(s=y("card_episode_title:".concat(v.title),v.title))}break;case"areaTalk":if(L&&2===a){var N=L.find((function(t){return t.id===Number(e)}));N&&(s=y("area_name:".concat(N.id),N.name))}3===a&&(s=e)}return r?Object(S.jsx)(n.a,{color:"textPrimary",children:s},i):Object(S.jsx)(h.b,{to:i,className:c.noDecoration,children:s},i)}))})}}),Object(S.jsx)("br",{}),Object(S.jsxs)(u.d,{children:[Object(S.jsx)(u.b,{path:"".concat(N),exact:!0,children:Object(S.jsxs)(s.a,{container:!0,spacing:1,children:[Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/eventStory",children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{children:r("story_reader:selectValue.eventStory")})})})})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/unitStory",children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{children:r("story_reader:selectValue.unitStory")})})})})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/charaStory",children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{children:r("story_reader:selectValue.charaStory")})})})})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/cardStory",children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{children:r("story_reader:selectValue.cardStory")})})})})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/areaTalk",children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{children:r("story_reader:selectValue.areaTalk")})})})})}),Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(l.a,{children:Object(S.jsx)(n.a,{color:"textSecondary",children:r("story_reader:selectValue.liveTalk")})})})})]})}),Object(S.jsx)(u.b,{path:"".concat(N,"/eventStory"),exact:!0,children:Object(S.jsx)(s.a,{container:!0,spacing:1,children:!!R&&R.slice().reverse().map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/eventStory/".concat(t.id),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"home/banner/".concat(t.assetbundleName,"_rip/").concat(t.assetbundleName,".webp"),color:"",aspectRatio:16/7,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"event_name:".concat(t.id),original:t.name,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)}))})}),Object(S.jsx)(u.b,{path:"".concat(N,"/eventStory/:eventId"),exact:!0,children:function(t){var a=t.match,r=(null===a||void 0===a?void 0:a.params).eventId;if(r&&H){var n=H.find((function(e){return e.eventId===Number(r)}));if(n)return Object(S.jsx)(s.a,{container:!0,spacing:1,children:n.eventStoryEpisodes.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.episodeNo),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"event_story/".concat(n.assetbundleName,"/episode_image_rip/").concat(t.assetbundleName,".webp"),color:"",aspectRatio:1.944,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"event_story_episode_title:".concat(t.eventStoryId,"-").concat(t.episodeNo),original:t.title,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)}))})}}}),Object(S.jsx)(u.b,{path:"".concat(N,"/eventStory/:eventId/:episodeNo"),exact:!0,children:function(e){var t=e.match;return!!t&&Object(S.jsx)(A,{storyType:"eventStory",storyId:t.url})}}),Object(S.jsx)(u.b,{path:"".concat(N,"/unitStory"),exact:!0,children:Object(S.jsx)(s.a,{container:!0,spacing:1,children:!!C&&C.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/unitStory/".concat(t.unit),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:f.a[I][t.unit],color:"",aspectRatio:2.591,directSrc:!0,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"unit_profile:".concat(t.unit,".name"),original:t.unitName,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.unit)}))})}),Object(S.jsx)(u.b,{path:"".concat(N,"/unitStory/:unit"),exact:!0,children:function(t){var a=t.match,r=(null===a||void 0===a?void 0:a.params).unit;if(r&&P){var n=P.find((function(e){return e.unit===r}));if(n)return Object(S.jsx)(s.a,{container:!0,spacing:1,children:n.chapters.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.chapterNo),children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"unit_story_chapter_title:".concat(t.unit,"-").concat(t.chapterNo),original:t.title,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})})})},t.id)}))})}}}),Object(S.jsx)(u.b,{path:"".concat(N,"/unitStory/:unit/:chapterNo"),exact:!0,children:function(t){var a=t.match,r=null===a||void 0===a?void 0:a.params,n=r.unit,i=r.chapterNo;if(n&&i&&P){var d=P.find((function(e){return e.unit===n}));if(d){var j=d.chapters.find((function(e){return e.chapterNo===Number(i)}));if(j)return Object(S.jsx)(s.a,{container:!0,spacing:1,children:j.episodes.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.episodeNo),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"story/episode_image/".concat(j.assetbundleName,"_rip/").concat(t.assetbundleName,".webp"),color:"",aspectRatio:1.944,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"unit_story_episode_title:".concat(t.unit,"-").concat(t.chapterNo,"-").concat(t.episodeNo),original:t.title,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)}))})}}}}),Object(S.jsx)(u.b,{path:"".concat(N,"/unitStory/:unit/:chapterNo/:episodeNo"),exact:!0,children:function(e){var t=e.match;return!!t&&Object(S.jsx)(A,{storyType:"unitStory",storyId:t.url})}}),Object(S.jsx)(u.b,{path:"".concat(N,"/charaStory"),exact:!0,children:Object(S.jsx)(s.a,{container:!0,spacing:1,children:!!V&&V.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/charaStory/".concat(t.characterId),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(s.a,{container:!0,justify:"center",children:Object(S.jsx)(s.a,{item:!0,xs:4,children:Object(S.jsx)(w,{src:f.h["CharaIcon".concat(t.characterId)],color:"",aspectRatio:1,directSrc:!0,disableTransition:!0})})})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.a,{characterId:t.characterId,originalProps:{style:{overflow:"hidden"},align:"center"},translatedProps:{style:{overflow:"hidden"},align:"center"}})})]})})},t.characterId)}))})}),Object(S.jsx)(u.b,{path:"".concat(N,"/charaStory/:charaId"),exact:!0,children:function(e){var t=e.match;return!!t&&Object(S.jsx)(A,{storyType:"charaStory",storyId:t.url})}}),Object(S.jsx)(u.b,{path:"".concat(N,"/cardStory"),exact:!0,children:Object(S.jsx)(s.a,{container:!0,spacing:1,children:!!V&&V.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/cardStory/".concat(t.characterId),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(s.a,{container:!0,justify:"center",children:Object(S.jsx)(s.a,{item:!0,xs:4,children:Object(S.jsx)(w,{src:f.h["CharaIcon".concat(t.characterId)],color:"",aspectRatio:1,directSrc:!0,disableTransition:!0})})})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.a,{characterId:t.characterId,originalProps:{style:{overflow:"hidden"},align:"center"},translatedProps:{style:{overflow:"hidden"},align:"center"}})})]})})},t.characterId)}))})}),Object(S.jsx)(u.b,{path:"".concat(N,"/cardStory/:charaId"),exact:!0,children:function(t){var a=t.match,r=(null===a||void 0===a?void 0:a.params).charaId;if(r&&U){var n=U.filter((function(e){return e.characterId===Number(r)}));if(n.length)return Object(S.jsx)(s.a,{container:!0,spacing:1,children:n.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.id),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"character/member_small/".concat(t.assetbundleName,"_rip/card_normal.webp"),color:"",aspectRatio:1.774,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"card_prefix:".concat(t.id),original:t.prefix,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)}))})}}}),Object(S.jsx)(u.b,{path:"".concat(N,"/cardStory/:charaId/:cardId"),exact:!0,children:function(t){var a=t.match,r=(null===a||void 0===a?void 0:a.params).cardId;if(r&&z){var n=z.filter((function(e){return e.cardId===Number(r)}));if(n.length)return Object(S.jsx)(s.a,{container:!0,spacing:1,children:n.map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.id),children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"card_episode_title:".concat(t.title),original:t.title,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})})})},t.id)}))})}}}),Object(S.jsx)(u.b,{path:"".concat(N,"/cardStory/:charaId/:cardId/:episodeId"),exact:!0,children:function(e){var t=e.match;return!!t&&Object(S.jsx)(A,{storyType:"cardStory",storyId:t.url})}}),Object(S.jsx)(u.b,{path:"".concat(N,"/areaTalk"),exact:!0,children:Object(S.jsxs)(s.a,{container:!0,spacing:1,children:[!!L&&L.filter((function(e){return"spirit_world"===e.areaType})).map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/areaTalk/".concat(t.id),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"worldmap/contents/normal_rip/img_worldmap_areas".concat(String(t.id).padStart(2,"0"),".webp"),color:"",aspectRatio:1.272,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"area_name:".concat(t.id),original:t.name,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)})),!!L&&L.filter((function(e){return"reality_world"===e.areaType})).map((function(t,a){return Object(S.jsx)(s.a,{item:!0,xs:12,sm:6,md:3,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"/storyreader/areaTalk/".concat(t.id),children:Object(S.jsxs)(o.a,{className:e.selectCard,children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(w,{src:"worldmap/contents/normal_rip/worldmap_area".concat(String(m.d[String(a+1)]).padStart(2,"0"),".webp"),color:"",aspectRatio:1.3,disableTransition:!0})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(v.b,{contentKey:"area_name:".concat(t.id),original:t.name,originalProps:{style:{overflow:"hidden"}},translatedProps:{style:{overflow:"hidden"}}})})]})})},t.id)}))]})}),Object(S.jsx)(u.b,{path:"".concat(N,"/areaTalk/:areaId"),exact:!0,children:function(t){var a=t.match,r=(null===a||void 0===a?void 0:a.params).areaId;if(r&&L&&(L.find((function(e){return e.id===Number(r)}))&&G&&q))return Object(S.jsx)(s.a,{container:!0,spacing:1,children:G.filter((function(e){return e.areaId===Number(r)&&"normal"===e.actionSetType})).map((function(t){return Object(S.jsx)(s.a,{item:!0,xs:6,sm:4,md:3,lg:2,children:Object(S.jsx)(h.b,{className:c.noDecorationAlsoOnHover,color:"inherit",to:"".concat(null===a||void 0===a?void 0:a.url,"/").concat(t.id),children:Object(S.jsx)(o.a,{className:e.selectCard,children:Object(S.jsx)(l.a,{children:Object(S.jsx)(s.a,{container:!0,spacing:1,children:t.characterIds.map((function(e){var t=q.find((function(t){return t.id===e})).characterId;return Object(S.jsx)(s.a,{item:!0,children:Object(S.jsx)(d.a,{src:f.h["CharaIcon".concat(t)]})},e)}))})})})})},t.id)}))})}}),Object(S.jsx)(u.b,{path:"".concat(N,"/areaTalk/:areaId/:actionSetId"),exact:!0,children:function(e){var t=e.match;return!!t&&Object(S.jsx)(A,{storyType:"areaTalk",storyId:t.url})}})]})]})}},307:function(e,t,c){"use strict";c.d(t,"b",(function(){return b})),c.d(t,"a",(function(){return u})),c.d(t,"c",(function(){return h}));var a=c(8),r=c(24),n=c(89),i=c(296),s=c(0),o=c(37),l=c(48),d=c(49),j=c(1),b=function(e){var t=e.contentKey,c=e.original,a=e.originalProps,l=e.translatedProps,b=e.assetTOptions,u=Object(s.useContext)(o.a).contentTransMode,h=Object(d.b)().assetT;switch(u){case"original":return Object(j.jsx)(n.a,Object(r.a)(Object(r.a)({},a),{},{children:c}));case"translated":return Object(j.jsx)(n.a,Object(r.a)(Object(r.a)({},l),{},{color:"textPrimary",children:h(t,c,b)}));case"both":return Object(j.jsxs)(i.a,{container:!0,direction:"column",children:[Object(j.jsx)(n.a,Object(r.a)(Object(r.a)({},a),{},{color:"textPrimary",children:c})),Object(j.jsx)(n.a,Object(r.a)(Object(r.a)({},l),{},{color:"textSecondary",children:h(t,c,b)}))]})}},u=function(e){var t=e.characterId,c=e.originalProps,b=e.translatedProps,u=e.assetTOptions,h=Object(s.useContext)(o.a).contentTransMode,O=Object(l.g)("gameCharacters"),x=Object(a.a)(O,1)[0],m=Object(d.b)(),p=m.assetT,f=m.assetI18n,v=Object(s.useState)(),y=Object(a.a)(v,2),g=y[0],N=y[1];if(Object(s.useEffect)((function(){x&&N(x.find((function(e){return e.id===t})))}),[x,t]),!g)return Object(j.jsx)(n.a,{});switch(h){case"original":return Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({},c),{},{color:"textPrimary",children:[g.firstName," ",g.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(f.language)?Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({},b),{},{color:"textPrimary",children:[g.firstName?p("character_name:".concat(t,".firstName"),g.firstName,u):""," ",p("character_name:".concat(t,".givenName"),g.givenName,u)]})):Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({},b),{},{color:"textPrimary",children:[p("character_name:".concat(t,".givenName"),g.givenName,u)," ",g.firstName?p("character_name:".concat(t,".firstName"),g.firstName,u):""]}));case"both":return Object(j.jsxs)(i.a,{container:!0,direction:"column",children:[Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({},c),{},{children:[g.firstName," ",g.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(f.language)?Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({color:"textSecondary"},b),{},{children:[g.firstName?p("character_name:".concat(t,".firstName"),g.firstName,u):""," ",p("character_name:".concat(t,".givenName"),g.givenName,u)]})):Object(j.jsxs)(n.a,Object(r.a)(Object(r.a)({color:"textSecondary"},b),{},{children:[p("character_name:".concat(t,".givenName"),g.givenName,u)," ",g.firstName?p("character_name:".concat(t,".firstName"),g.firstName,u):""]}))]})}},h=function(e){var t=e.releaseCondId,c=e.originalProps,r=e.translatedProps,n=e.assetTOptions,i=Object(l.g)("releaseConditions"),o=Object(a.a)(i,1)[0],d=Object(s.useState)(),u=Object(a.a)(d,2),h=u[0],O=u[1];if(Object(s.useEffect)((function(){o&&O(o.find((function(e){return e.id===t})))}),[t,o]),h){var x="";switch(h.releaseConditionType){case"none":x="release_cond:none_".concat(h.id);break;case"card_level":x="release_cond:card_level",n=Object.assign({},n,{level:h.releaseConditionTypeLevel});break;case"unit_rank":x="release_cond:unit_rank_".concat(h.releaseConditionTypeId),n=Object.assign({},n,{rank:h.releaseConditionTypeLevel});break;case"event_point":x="release_cond:event_point",n=Object.assign({},n,{point:h.releaseConditionTypeQuantity});break;default:x="release_cond:".concat(h.releaseConditionType)}return Object(j.jsx)(b,{contentKey:x,original:h.sentence,originalProps:c,translatedProps:r,assetTOptions:n})}return Object(j.jsx)("div",{})}},312:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var a=c(7),r=c(234),n=Object(r.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(a.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(a.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)}),inputHidden:{display:"none"},noDecorationAlsoOnHover:{textDecoration:"none","&:hover":{textDecoration:"none"},color:"inherit"},noDecoration:{textDecoration:"none","&:hover":{textDecoration:"underline"},color:"inherit"},pointer:{cursor:"pointer"}}}))},465:function(e,t,c){"use strict";var a=c(24),r=c(9),n=c.n(r),i=c(25),s=c(8),o=c(3),l=c(46),d=c.n(l),j=c(0),b=c(48),u=c(1);t.a=function(e){var t=e.path,c=e.region,r=void 0===c?"jp":c,l=Object(o.a)(e,["path","region"]),h=Object(j.useState)(""),O=Object(s.a)(h,2),x=O[0],m=O[1];return Object(j.useEffect)((function(){return function(){var e=Object(i.a)(n.a.mark((function e(){var c,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)("".concat(t,"/moviebundlebuilddata.asset"),void 0,window.isChinaMainland?"cn":"ww");case 2:return c=e.sent,e.next=5,d.a.get(c,{responseType:"json"});case 5:return a=e.sent.data,i=a.movieBundleDatas[0].usmFileName.replace(/(-\d{3})?\.usm\.bytes/,"").toLowerCase(),e.abrupt("return",Object(b.c)("".concat(t,"/").concat(i,".mp4"),m,window.isChinaMainland?"cn":"ww",r));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){m("")}}),[t,r]),x?Object(u.jsx)("video",Object(a.a)(Object(a.a)({},l),{},{children:Object(u.jsx)("source",{src:x})})):null}},499:function(e,t,c){"use strict";c.d(t,"a",(function(){return w})),c.d(t,"d",(function(){return I})),c.d(t,"c",(function(){return T})),c.d(t,"b",(function(){return C}));var a=c(8),r=c(234),n=c(296),i=c(237),s=c(316),o=c(380),l=c(345),d=c(385),j=c(334),b=c(89),u=c(135),h=c(624),O=c(524),x=c(500),m=c(0),p=c(213),f=c(382),v=c(310),y=c(311),g=c.n(y),N=c(465),_=c(1),S=Object(r.a)((function(e){return{card:{margin:e.spacing(1.5,0),padding:e.spacing(1.5,0)}}})),w=function(e){var t=e.url,c=Object(m.useState)(!1),r=Object(a.a)(c,2),l=r[0],d=r[1],j=Object(m.useState)(),b=Object(a.a)(j,2),u=b[0],p=b[1],v=Object(m.useState)(!1),y=Object(a.a)(v,2),g=y[0],N=y[1],S=Object(m.useCallback)((function(){if(l)u&&u.stop(),d(!1);else{if(u)return void u.play();N(!0);var e=new f.Howl({src:[t]});e.on("load",(function(){N(!1),e.play()})),e.on("play",(function(){d(!0)})),e.on("end",(function(){d(!1)})),p(e)}}),[t,u,l]);return Object(m.useEffect)((function(){return function(){u&&(u.stop(),u.unload())}}),[u]),Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,children:Object(_.jsx)(i.a,{onClick:S,size:"small",children:l?Object(_.jsx)(h.a,{}):g?Object(_.jsx)(s.a,{variant:"indeterminate",size:"1rem",color:"inherit"}):Object(_.jsx)(O.a,{})})}),Object(_.jsx)(n.a,{item:!0,children:Object(_.jsx)(i.a,{size:"small",component:o.a,href:t,download:!0,children:Object(_.jsx)(x.a,{})})})]})},I=function(e){var t=e.characterId,c=e.characterName,a=e.text,r=e.voiceUrl,i=S();return Object(_.jsx)(l.a,{className:i.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1,children:Object(_.jsx)(n.a,{container:!0,justify:"center",children:Object(_.jsx)(d.a,{src:v.h["CharaIcon".concat(t)]})})}),Object(_.jsx)(n.a,{item:!0,xs:7,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:c})}),Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(b.a,{children:a})})]})}),r?Object(_.jsx)(n.a,{item:!0,xs:1,children:Object(_.jsx)(w,{url:r})}):null]})})},T=function(e){var t=e.seType,c=e.text,r=e.resource,i=S(),s=Object(p.a)().t,o=Object(m.useState)(!1),d=Object(a.a)(o,2),h=d[0],O=d[1],x=Object(m.useState)(!1),f=Object(a.a)(x,2),v=f[0],y=f[1];switch(t){case"FullScreenText":return Object(_.jsx)(l.a,{className:i.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1}),Object(_.jsx)(n.a,{item:!0,xs:7,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:s("story_reader:snippet.FullScreenText")})}),Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(b.a,{children:c.trimStart()})})]})}),r?Object(_.jsx)(n.a,{item:!0,xs:1,children:Object(_.jsx)(w,{url:r})}):null]})});case"Telop":return Object(_.jsx)(l.a,{className:i.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1}),Object(_.jsx)(n.a,{item:!0,xs:8,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:s("story_reader:snippet.Telop")})}),Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(b.a,{children:c.trimStart()})})]})})]})});case"ChangeBackground":return Object(_.jsx)(l.a,{className:i.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1}),Object(_.jsx)(n.a,{item:!0,xs:8,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:s("story_reader:snippet.ChangeBackground")})}),h?Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(g.a,{onClick:function(){return window.open(r,"_blank")},src:r,style:{cursor:"pointer"},color:"",aspectRatio:1.624})}):Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(u.a,{variant:"contained",onClick:function(){return O(!0)},children:s("story_reader:snippet.ShowBackground")})})]})})]})});case"Movie":return Object(_.jsx)(l.a,{className:i.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1}),Object(_.jsx)(n.a,{item:!0,xs:8,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:s("story_reader:snippet.Movie")})}),v?Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(N.a,{path:r,style:{maxWidth:"100%"},controls:!0})}):Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(u.a,{variant:"contained",onClick:function(){return y(!0)},children:s("story_reader:snippet.ShowMovie")})})]})})]})});default:return null}},C=function(e){var t=e.hasBgm,c=e.hasSe,a=e.voiceUrl,r=S(),i=Object(p.a)().t;return Object(_.jsx)(l.a,{className:r.card,children:Object(_.jsxs)(n.a,{container:!0,alignItems:"center",spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:3,md:2,lg:1}),Object(_.jsx)(n.a,{item:!0,xs:7,md:9,lg:10,children:Object(_.jsxs)(n.a,{container:!0,spacing:1,children:[Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(j.a,{label:t?i("story_reader:snippet.BGM"):c?i("story_reader:snippet.SE"):"UNKNOWN"})}),a.endsWith("bgm00000.mp3")?Object(_.jsx)(n.a,{item:!0,xs:12,children:Object(_.jsx)(b.a,{children:i("story_reader:snippet.NoSound")})}):null]})}),a&&!a.endsWith("bgm00000.mp3")?Object(_.jsx)(n.a,{item:!0,xs:1,children:Object(_.jsx)(w,{url:a})}):null]})})}}}]);