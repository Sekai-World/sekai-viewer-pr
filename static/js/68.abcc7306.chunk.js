(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[68],{1124:function(e,t,a){"use strict";a.r(t);var c=a(31),n=a(8),r=a(89),i=a(295),s=a(296),o=a(614),j=a(490),l=a(1105),b=a(294),d=a(0),u=a(213),O=a(303),h=a(30),m=a(48),g=a(307),f=a(329),x=a(234),p=a(345),v=a(366),y=a(334),N=a(297),T=a(49),_=a(1),C=Object(x.a)((function(e){return{media:{paddingTop:"5%",backgroundSize:"contain"},card:{cursor:"pointer"},header:{},"grid-out":{padding:e.spacing("1%","2%")}}})),k={grid:function(e){var t=e.data,a=C(),c=Object(T.c)();return t?Object(_.jsx)(d.Fragment,{children:Object(_.jsx)(p.a,{className:a.card,children:Object(_.jsx)(s.a,{container:!0,alignItems:"center",children:Object(_.jsx)(s.a,{item:!0,xs:12,children:Object(_.jsx)(v.a,{style:{paddingBottom:"16px"},children:Object(_.jsxs)(s.a,{container:!0,spacing:1,alignItems:"center",children:[Object(_.jsx)(s.a,{item:!0,xs:2,container:!0,justify:"center",children:Object(_.jsx)(y.a,{label:t.seq})}),Object(_.jsx)(s.a,{item:!0,xs:10,children:Object(_.jsx)(g.b,{contentKey:"character_mission:".concat(t.characterMissionType),original:t.sentence,originalProps:{variant:"subtitle1",className:a.header},translatedProps:{variant:"subtitle1",className:a.header},assetTOptions:{name:c(t.characterId),count:t.requirement}})})]})})})})})}):Object(_.jsx)(p.a,{className:a.card,children:Object(_.jsx)(v.a,{children:Object(_.jsx)(r.a,{variant:"subtitle1",className:a.header,children:Object(_.jsx)(N.a,{variant:"text",width:"90%"})})})})}};t.default=function(){var e=Object(O.a)(),t=Object(u.a)().t,a=Object(m.g)("characterMissions"),x=Object(n.a)(a,1)[0],p=Object(m.g)("characterProfiles"),v=Object(n.a)(p,1)[0],y=Object(d.useState)([]),N=Object(n.a)(y,2),T=N[0],C=N[1],S=Object(d.useState)(1),w=Object(n.a)(S,2),I=w[0],P=w[1],z=Object(d.useState)("play_live"),E=Object(n.a)(z,2),W=E[0],M=E[1],B=Object(d.useState)(localStorage.getItem("event-list-grid-view-type")||"grid"),F=Object(n.a)(B,1)[0],L=Object(d.useState)(1),K=Object(n.a)(L,2),q=K[0],J=K[1],R=Object(d.useState)(12),V=Object(n.a)(R,1)[0],A=Object(d.useState)(!0),Q=Object(n.a)(A,2),D=Q[0],G=Q[1],H=Object(d.useState)(!1),U=Object(n.a)(H,2),X=U[0],Y=U[1],Z=Object(d.useState)([]),$=Object(n.a)(Z,2),ee=$[0],te=$[1];Object(d.useEffect)((function(){document.title=t("title:characterMissionList")}),[t]),Object(d.useEffect)((function(){if(x&&x.length){var e=Object(c.a)(x);e=(e=e.filter((function(e){return e.characterId===I}))).filter((function(e){return e.characterMissionType===W})),te(e),C([]),J(0)}}),[x,J,te,W,I]),Object(d.useEffect)((function(){C((function(e){return[].concat(Object(c.a)(e),Object(c.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(ee,q,V)))})),G(!0)}),[q,V,G,ee]),Object(d.useEffect)((function(){Y(Boolean(x&&x.length))}),[Y,x]);var ae=Object(d.useCallback)((function(e,t){X&&(e[0].isIntersecting&&D&&(!ee.length||ee.length>q*V)?(J((function(e){return e+1})),G(!1)):ee.length&&ee.length<=q*V&&t(!1))}),[X,D,V,q,ee.length]);return Object(_.jsxs)(d.Fragment,{children:[Object(_.jsxs)(r.a,{variant:"h6",className:e.header,children:[t("common:mission.main")," - ",t("common:character")]}),Object(_.jsx)(i.a,{className:e.content,maxWidth:"md",children:Object(_.jsxs)(s.a,{container:!0,spacing:1,justify:"center",children:[v&&v.length?Object(_.jsx)(d.Fragment,{children:Object(_.jsx)(s.a,{item:!0,xs:12,md:4,children:Object(_.jsxs)(o.a,{style:{width:"100%"},children:[Object(_.jsx)(j.a,{id:"select-chara-name",children:t("mission:select.charaName")}),Object(_.jsx)(l.a,{labelId:"select-chara-name",value:I,onChange:function(e){P(e.target.value)},children:v.map((function(e){return Object(_.jsx)(b.a,{value:e.characterId,children:Object(_.jsx)(g.a,{characterId:e.characterId})},e.characterId)}))})]})})}):null,Object.values(h.a).length?Object(_.jsx)(d.Fragment,{children:Object(_.jsx)(s.a,{item:!0,xs:12,md:4,children:Object(_.jsxs)(o.a,{style:{width:"100%"},children:[Object(_.jsx)(j.a,{id:"select-chara-name",children:t("mission:type.caption")}),Object(_.jsx)(l.a,{labelId:"select-mission-type",value:W,onChange:function(e){M(e.target.value)},children:Object.values(h.a).map((function(e){return Object(_.jsx)(b.a,{value:e,children:Object(_.jsx)(r.a,{children:t("mission:type.".concat(e))})},e)}))})]})})}):null]})}),Object(_.jsx)(i.a,{className:e.content,maxWidth:"md",children:Object(_.jsx)(f.a,{ViewComponent:k[F],callback:ae,data:T,gridSize:{grid:{xs:12},agenda:{xs:12},comfy:{xs:12}}[F]})})]})}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(234),n=Object(c.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},307:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return O}));var c=a(8),n=a(24),r=a(89),i=a(296),s=a(0),o=a(37),j=a(48),l=a(49),b=a(1),d=function(e){var t=e.contentKey,a=e.original,c=e.originalProps,j=e.translatedProps,d=e.assetTOptions,u=Object(s.useContext)(o.a).contentTransMode,O=Object(l.b)().assetT;switch(u){case"original":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{children:a}));case"translated":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textPrimary",children:O(t,a,d)}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{color:"textPrimary",children:a})),Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textSecondary",children:O(t,a,d)}))]})}},u=function(e){var t=e.characterId,a=e.originalProps,d=e.translatedProps,u=e.assetTOptions,O=Object(s.useContext)(o.a).contentTransMode,h=Object(j.g)("gameCharacters"),m=Object(c.a)(h,1)[0],g=Object(l.b)(),f=g.assetT,x=g.assetI18n,p=Object(s.useState)(),v=Object(c.a)(p,2),y=v[0],N=v[1];if(Object(s.useEffect)((function(){m&&N(m.find((function(e){return e.id===t})))}),[m,t]),!y)return Object(b.jsx)(r.a,{});switch(O){case"original":return Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{color:"textPrimary",children:[y.firstName," ",y.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(x.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[y.firstName?f("character_name:".concat(t,".firstName"),y.firstName,u):""," ",f("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[f("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?f("character_name:".concat(t,".firstName"),y.firstName,u):""]}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{children:[y.firstName," ",y.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(x.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[y.firstName?f("character_name:".concat(t,".firstName"),y.firstName,u):""," ",f("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[f("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?f("character_name:".concat(t,".firstName"),y.firstName,u):""]}))]})}},O=function(e){var t=e.releaseCondId,a=e.originalProps,n=e.translatedProps,r=e.assetTOptions,i=Object(j.g)("releaseConditions"),o=Object(c.a)(i,1)[0],l=Object(s.useState)(),u=Object(c.a)(l,2),O=u[0],h=u[1];if(Object(s.useEffect)((function(){o&&h(o.find((function(e){return e.id===t})))}),[t,o]),O){var m="";switch(O.releaseConditionType){case"none":m="release_cond:none_".concat(O.id);break;case"card_level":m="release_cond:card_level",r=Object.assign({},r,{level:O.releaseConditionTypeLevel});break;case"unit_rank":m="release_cond:unit_rank_".concat(O.releaseConditionTypeId),r=Object.assign({},r,{rank:O.releaseConditionTypeLevel});break;case"event_point":m="release_cond:event_point",r=Object.assign({},r,{point:O.releaseConditionTypeQuantity});break;default:m="release_cond:".concat(O.releaseConditionType)}return Object(b.jsx)(d,{contentKey:m,original:O.sentence,originalProps:a,translatedProps:n,assetTOptions:r})}return Object(b.jsx)("div",{})}},329:function(e,t,a){"use strict";var c=a(8),n=a(24),r=a(18),i=a(260),s=a(296),o=a(0),j=a(1),l=["xs","sm","md","lg","xl"],b={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,d=e.data,u=e.gridSize,O=e.viewProps,h=e.onComponentClick,m=function(e){var t=Object(n.a)({},e||b);return l.forEach((function(e,a,c){t[e]||(t[e]=a>0?t[c[a-1]]:12)})),t}(u),g=function(){var e=Object(r.a)();return l.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||l[l.length-1]}(),f=Object(o.useState)(!0),x=Object(c.a)(f,2),p=x[0],v=x[1],y=Object(o.useCallback)((function(e){return a(e,v)}),[a]),N=Object(o.useRef)(null);Object(o.useEffect)((function(){v(!0)}),[d]),Object(o.useEffect)((function(){var e=new IntersectionObserver(y,{threshold:.5}),t=N.current;return t&&e.observe(t),function(){t&&e.disconnect()}}),[y]);var T=12/m[g],_=d.length?T:2*T;return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)(s.a,{container:!0,direction:"row",spacing:1,children:d.length?d.map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:m.xs,sm:m.sm,md:m.md,lg:m.lg,xl:m.xl,onClick:function(){h&&h(e)},children:Object(j.jsx)(t,Object(n.a)({data:e,index:a},O))},e.id)})):null}),Object(j.jsx)(s.a,{container:!0,direction:"row",ref:N,style:{display:p?"flex":"none",paddingTop:"4px"},spacing:1,children:Array.from({length:_}).map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:m.xs,sm:m.sm,md:m.md,lg:m.lg,xl:m.xl,children:Object(j.jsx)(t,{})},"empty-".concat(a))}))})]})}}}]);