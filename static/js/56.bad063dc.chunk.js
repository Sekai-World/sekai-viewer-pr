(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[56],{1090:function(e,t,a){"use strict";a.r(t);var c=a(31),n=a(8),r=a(89),i=a(295),s=a(296),o=a(547),j=a(548),l=a(549),b=a(550),d=a(498),u=a(514),O=a(489),m=a(551),x=a.n(m),h=a(0),g=a(213),f=a(37),v=a(303),p=a(48),y=a(329),N=a(553),S=a(1);var w={agenda:N.a};t.default=function(){var e=Object(v.a)(),t=Object(g.a)().t,a=Object(h.useContext)(f.a).isShowSpoiler,m=Object(h.useState)([]),N=Object(n.a)(m,2),_=N[0],C=N[1],T=Object(p.g)("virtualLives"),k=Object(n.a)(T,1)[0],L=Object(h.useState)(localStorage.getItem("virtual-live-list-grid-view-type")||"agenda"),P=Object(n.a)(L,1)[0],z=Object(h.useState)(1),E=Object(n.a)(z,2),A=E[0],I=E[1],W=Object(h.useState)(12),D=Object(n.a)(W,1)[0],B=Object(h.useState)(!0),K=Object(n.a)(B,2),M=K[0],R=K[1],F=Object(h.useState)(!1),J=Object(n.a)(F,2),V=J[0],Q=J[1],q=Object(p.h)("gacha-list-update-sort","desc"),G=Object(n.a)(q,2),H=G[0],U=G[1],X=Object(p.h)("gacha-list-filter-sort-by","startAt"),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(h.useState)([]),te=Object(n.a)(ee,2),ae=te[0],ce=te[1];Object(h.useEffect)((function(){document.title=t("title:virtualLiveList")}),[t]),Object(h.useEffect)((function(){C((function(e){return[].concat(Object(c.a)(e),Object(c.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(ae,A,D)))})),R(!0)}),[A,D,R,ae]),Object(h.useEffect)((function(){if(k){var e=Object(c.a)(k);a||(e=e.filter((function(e){return(e.virtualLiveSchedules[0]?e.virtualLiveSchedules[0].startAt:e.startAt)<=(new Date).getTime()}))),"desc"===H?e=e.sort((function(e,t){return t[Z]-e[Z]})):"asc"===H&&(e=e.sort((function(e,t){return e[Z]-t[Z]}))),ce(e),C([]),I(0)}}),[a,I,Z,H,k]),Object(h.useEffect)((function(){Q(Boolean(k))}),[Q,k]);var ne=Object(h.useCallback)((function(e,t){V&&(e[0].isIntersecting&&M&&(!ae.length||ae.length>A*D)?(I((function(e){return e+1})),R(!1)):ae.length&&ae.length<=A*D&&t(!1))}),[V,M,D,A,ae.length]),re=Object(h.useCallback)((function(e,t){U(t||"asc")}),[U]),ie=Object(h.useCallback)((function(e,t){$(t||"id")}),[$]);return Object(S.jsxs)(h.Fragment,{children:[Object(S.jsx)(r.a,{variant:"h6",className:e.header,children:t("common:virtualLive")}),Object(S.jsxs)(i.a,{className:e.content,children:[Object(S.jsxs)(s.a,{container:!0,spacing:1,children:[Object(S.jsx)(s.a,{item:!0,children:Object(S.jsxs)(u.a,{value:H,color:"primary",exclusive:!0,onChange:re,children:[Object(S.jsx)(O.a,{value:"asc",children:"asc"===H?Object(S.jsx)(o.a,{}):Object(S.jsx)(j.a,{})}),Object(S.jsx)(O.a,{value:"desc",children:"desc"===H?Object(S.jsx)(l.a,{}):Object(S.jsx)(b.a,{})})]})}),Object(S.jsx)(s.a,{item:!0,children:Object(S.jsxs)(u.a,{size:"medium",value:Z,color:"primary",exclusive:!0,onChange:ie,children:[Object(S.jsx)(O.a,{value:"id",children:Object(S.jsx)(x.a,{})}),Object(S.jsx)(O.a,{value:"startAt",children:Object(S.jsx)(d.a,{})})]})})]}),Object(S.jsx)("br",{}),Object(S.jsx)(y.a,{ViewComponent:w[P],callback:ne,data:_,gridSize:{agenda:{xs:12}}[P]})]})]})}},303:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(234),n=Object(c.a)((function(e){return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},capitalize:{textTransform:"capitalize"},tabpanel:{padding:e.spacing("1%",0,0,0)},"grid-out":{padding:e.spacing("1%","0")}}}))},307:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return O}));var c=a(8),n=a(24),r=a(89),i=a(296),s=a(0),o=a(37),j=a(48),l=a(49),b=a(1),d=function(e){var t=e.contentKey,a=e.original,c=e.originalProps,j=e.translatedProps,d=e.assetTOptions,u=Object(s.useContext)(o.a).contentTransMode,O=Object(l.b)().assetT;switch(u){case"original":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{children:a}));case"translated":return Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textPrimary",children:O(t,a,d)}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},c),{},{color:"textPrimary",children:a})),Object(b.jsx)(r.a,Object(n.a)(Object(n.a)({},j),{},{color:"textSecondary",children:O(t,a,d)}))]})}},u=function(e){var t=e.characterId,a=e.originalProps,d=e.translatedProps,u=e.assetTOptions,O=Object(s.useContext)(o.a).contentTransMode,m=Object(j.g)("gameCharacters"),x=Object(c.a)(m,1)[0],h=Object(l.b)(),g=h.assetT,f=h.assetI18n,v=Object(s.useState)(),p=Object(c.a)(v,2),y=p[0],N=p[1];if(Object(s.useEffect)((function(){x&&N(x.find((function(e){return e.id===t})))}),[x,t]),!y)return Object(b.jsx)(r.a,{});switch(O){case"original":return Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{color:"textPrimary",children:[y.firstName," ",y.givenName]}));case"translated":return["zh-CN","zh-TW","ko","ja"].includes(f.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[y.firstName?g("character_name:".concat(t,".firstName"),y.firstName,u):""," ",g("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},d),{},{color:"textPrimary",children:[g("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?g("character_name:".concat(t,".firstName"),y.firstName,u):""]}));case"both":return Object(b.jsxs)(i.a,{container:!0,direction:"column",children:[Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({},a),{},{children:[y.firstName," ",y.givenName]})),["zh-CN","zh-TW","ko","ja"].includes(f.language)?Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[y.firstName?g("character_name:".concat(t,".firstName"),y.firstName,u):""," ",g("character_name:".concat(t,".givenName"),y.givenName,u)]})):Object(b.jsxs)(r.a,Object(n.a)(Object(n.a)({color:"textSecondary"},d),{},{children:[g("character_name:".concat(t,".givenName"),y.givenName,u)," ",y.firstName?g("character_name:".concat(t,".firstName"),y.firstName,u):""]}))]})}},O=function(e){var t=e.releaseCondId,a=e.originalProps,n=e.translatedProps,r=e.assetTOptions,i=Object(j.g)("releaseConditions"),o=Object(c.a)(i,1)[0],l=Object(s.useState)(),u=Object(c.a)(l,2),O=u[0],m=u[1];if(Object(s.useEffect)((function(){o&&m(o.find((function(e){return e.id===t})))}),[t,o]),O){var x="";switch(O.releaseConditionType){case"none":x="release_cond:none_".concat(O.id);break;case"card_level":x="release_cond:card_level",r=Object.assign({},r,{level:O.releaseConditionTypeLevel});break;case"unit_rank":x="release_cond:unit_rank_".concat(O.releaseConditionTypeId),r=Object.assign({},r,{rank:O.releaseConditionTypeLevel});break;case"event_point":x="release_cond:event_point",r=Object.assign({},r,{point:O.releaseConditionTypeQuantity});break;default:x="release_cond:".concat(O.releaseConditionType)}return Object(b.jsx)(d,{contentKey:x,original:O.sentence,originalProps:a,translatedProps:n,assetTOptions:r})}return Object(b.jsx)("div",{})}},329:function(e,t,a){"use strict";var c=a(8),n=a(24),r=a(18),i=a(260),s=a(296),o=a(0),j=a(1),l=["xs","sm","md","lg","xl"],b={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,d=e.data,u=e.gridSize,O=e.viewProps,m=e.onComponentClick,x=function(e){var t=Object(n.a)({},e||b);return l.forEach((function(e,a,c){t[e]||(t[e]=a>0?t[c[a-1]]:12)})),t}(u),h=function(){var e=Object(r.a)();return l.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||l[l.length-1]}(),g=Object(o.useState)(!0),f=Object(c.a)(g,2),v=f[0],p=f[1],y=Object(o.useCallback)((function(e){return a(e,p)}),[a]),N=Object(o.useRef)(null);Object(o.useEffect)((function(){p(!0)}),[d]),Object(o.useEffect)((function(){var e=new IntersectionObserver(y,{threshold:.5}),t=N.current;return t&&e.observe(t),function(){t&&e.disconnect()}}),[y]);var S=12/x[h],w=d.length?S:2*S;return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)(s.a,{container:!0,direction:"row",spacing:1,children:d.length?d.map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:x.xs,sm:x.sm,md:x.md,lg:x.lg,xl:x.xl,onClick:function(){m&&m(e)},children:Object(j.jsx)(t,Object(n.a)({data:e,index:a},O))},e.id)})):null}),Object(j.jsx)(s.a,{container:!0,direction:"row",ref:N,style:{display:v?"flex":"none",paddingTop:"4px"},spacing:1,children:Array.from({length:w}).map((function(e,a){return Object(j.jsx)(s.a,{item:!0,xs:x.xs,sm:x.sm,md:x.md,lg:x.lg,xl:x.xl,children:Object(j.jsx)(t,{})},"empty-".concat(a))}))})]})}},350:function(e,t,a){"use strict";var c=a(334),n=a(516),r=(a(0),a(213)),i=a(1);t.a=function(e){var t=e.releaseTime,a=e.style,s=Object(r.a)().t;return new Date<t?Object(i.jsx)(c.a,{style:a,color:"secondary",label:s("common:spoiler"),icon:Object(i.jsx)(n.a,{})}):null}},553:function(e,t,a){"use strict";var c=a(8),n=a(234),r=a(295),i=a(296),s=a(134),o=a(89),j=a(297),l=a(0),b=a(213),d=a(41),u=a(48),O=a(49),m=a(307),x=a(350),h=a(311),g=a.n(h),f=a(1),v=Object(n.a)((function(e){return{media:{paddingTop:"30%",width:"100%",backgroundSize:"contain"},card:{cursor:"pointer"},header:{},"grid-out":{margin:e.spacing("1%",0)}}}));t.a=function(e){var t=e.data,a=v(),n=Object(b.a)().t,h=Object(O.b)().getTranslated,p=Object(u.n)(),y=Object(c.a)(p,1)[0],N=Object(l.useState)(""),S=Object(c.a)(N,2),w=S[0],_=S[1];return Object(l.useEffect)((function(){t&&Object(u.c)("virtual_live/select/banner/".concat(t.assetbundleName,"_rip/").concat(t.assetbundleName,".png"),_,window.isChinaMainland?"cn":"ww",y)}),[t,y]),t?Object(f.jsx)(d.b,{to:"/virtual_live/"+t.id,style:{textDecoration:"none"},children:Object(f.jsx)(r.a,{maxWidth:"md",className:a.card,children:Object(f.jsxs)(i.a,{container:!0,spacing:2,component:s.a,className:a["grid-out"],alignItems:"center",children:[Object(f.jsx)(i.a,{item:!0,xs:12,md:4,children:Object(f.jsx)(g.a,{src:w,alt:h("virtualLive_name:".concat(t.id),t.name),aspectRatio:3.2562,color:""})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:8,children:Object(f.jsxs)(i.a,{container:!0,direction:"column",spacing:1,children:[Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(x.a,{releaseTime:new Date(t.virtualLiveSchedules[0]?t.virtualLiveSchedules[0].startAt:t.startAt)})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(m.b,{contentKey:"virtualLive_name:".concat(t.id),original:t.name,originalProps:{variant:"subtitle1",className:a.header}})}),Object(f.jsxs)(i.a,{item:!0,container:!0,spacing:1,children:[Object(f.jsx)(i.a,{item:!0,xs:12,children:Object(f.jsx)(o.a,{variant:"body2",color:"textSecondary",children:n("virtual_live:type.".concat(t.virtualLiveType))})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(o.a,{variant:"body2",color:"textSecondary",component:"span",children:new Date(t.startAt).toLocaleString()})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(o.a,{variant:"body2",color:"textSecondary",component:"span",children:"~"})}),Object(f.jsx)(i.a,{item:!0,children:Object(f.jsx)(o.a,{variant:"body2",color:"textSecondary",component:"span",children:new Date(t.endAt).toLocaleString()})})]})]})})]})})}):Object(f.jsx)(r.a,{maxWidth:"md",className:a.card,children:Object(f.jsxs)(i.a,{container:!0,spacing:2,component:s.a,className:a["grid-out"],children:[Object(f.jsx)(i.a,{item:!0,xs:12,md:4,container:!0,alignItems:"center",children:Object(f.jsx)(j.a,{variant:"rect",className:a.media})}),Object(f.jsx)(i.a,{item:!0,xs:12,md:8,children:Object(f.jsxs)(i.a,{container:!0,direction:"column",spacing:1,children:[Object(f.jsx)(o.a,{variant:"subtitle1",className:a.header,children:Object(f.jsx)(j.a,{variant:"text",width:"90%"})}),Object(f.jsx)(o.a,{variant:"body2",children:Object(f.jsx)(j.a,{variant:"text",width:"40%"})})]})})]})})}}}]);